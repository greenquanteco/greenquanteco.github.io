<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 3 Data manipulation with R | Applied Biological Data Analysis: Statistics and R for Biologists</title>
  <meta name="description" content="Helping biologists to become more informed users of R and statistical methods." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 3 Data manipulation with R | Applied Biological Data Analysis: Statistics and R for Biologists" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://greenquanteco.github.io/book/lab_logo_02.jpg" />
  <meta property="og:description" content="Helping biologists to become more informed users of R and statistical methods." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 3 Data manipulation with R | Applied Biological Data Analysis: Statistics and R for Biologists" />
  
  <meta name="twitter:description" content="Helping biologists to become more informed users of R and statistical methods." />
  <meta name="twitter:image" content="https://greenquanteco.github.io/book/lab_logo_02.jpg" />

<meta name="author" content="Dr. Nick Green, Kennesaw State University" />


<meta name="date" content="2024-08-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="fav.ico" type="image/x-icon" />
<link rel="prev" href="mod-02.html"/>
<link rel="next" href="mod-04.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Applied biological data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#work-in-progress-warning"><i class="fa fa-check"></i>Work in progress warning!</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license-and-permissions"><i class="fa fa-check"></i>License and permissions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i>Course description</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-objectives"><i class="fa fa-check"></i>Course objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-requirements"><i class="fa fa-check"></i>Course requirements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recommended-reading"><i class="fa fa-check"></i>Recommended reading</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-organization"><i class="fa fa-check"></i>Course organization</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i>About the author</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="mod-01.html"><a href="mod-01.html"><i class="fa fa-check"></i><b>1</b> Statistics in modern biology</a>
<ul>
<li class="chapter" data-level="1.1" data-path="mod-01.html"><a href="mod-01.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="mod-01.html"><a href="mod-01.html#statistics-in-modern-biology"><i class="fa fa-check"></i><b>1.2</b> Statistics in modern biology</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="mod-01.html"><a href="mod-01.html#the-scientific-method"><i class="fa fa-check"></i><b>1.2.1</b> The scientific method</a></li>
<li class="chapter" data-level="1.2.2" data-path="mod-01.html"><a href="mod-01.html#example-data-analysis"><i class="fa fa-check"></i><b>1.2.2</b> Example data analysis</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="mod-01.html"><a href="mod-01.html#misuses-of-statistics"><i class="fa fa-check"></i><b>1.3</b> Misuses of statistics</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="mod-01.html"><a href="mod-01.html#proving-the-trivial-and-meaningless-hypotheses"><i class="fa fa-check"></i><b>1.3.1</b> “Proving” the trivial and meaningless hypotheses</a></li>
<li class="chapter" data-level="1.3.2" data-path="mod-01.html"><a href="mod-01.html#inappropriate-methods"><i class="fa fa-check"></i><b>1.3.2</b> Inappropriate methods</a></li>
<li class="chapter" data-level="1.3.3" data-path="mod-01.html"><a href="mod-01.html#p-hacking-and-data-dredging"><i class="fa fa-check"></i><b>1.3.3</b> <em>P</em>-hacking and data dredging</a></li>
<li class="chapter" data-level="1.3.4" data-path="mod-01.html"><a href="mod-01.html#inadequate-sample-sizes-and-pseudoreplication"><i class="fa fa-check"></i><b>1.3.4</b> Inadequate sample sizes and pseudoreplication</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="mod-01.html"><a href="mod-01.html#mod-01-nhst"><i class="fa fa-check"></i><b>1.4</b> <em>P</em>-values and null hypothesis significance testing (NHST)</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="mod-01.html"><a href="mod-01.html#definition"><i class="fa fa-check"></i><b>1.4.1</b> Definition</a></li>
<li class="chapter" data-level="1.4.2" data-path="mod-01.html"><a href="mod-01.html#aside-another-way-to-frame-null-hypotheses"><i class="fa fa-check"></i><b>1.4.2</b> Aside: Another way to frame null hypotheses</a></li>
<li class="chapter" data-level="1.4.3" data-path="mod-01.html"><a href="mod-01.html#history-and-status-of-p-values"><i class="fa fa-check"></i><b>1.4.3</b> History and status of <em>P</em>-values</a></li>
<li class="chapter" data-level="1.4.4" data-path="mod-01.html"><a href="mod-01.html#where-p-values-come-from"><i class="fa fa-check"></i><b>1.4.4</b> Where <em>P</em>-values come from</a></li>
<li class="chapter" data-level="1.4.5" data-path="mod-01.html"><a href="mod-01.html#what-p-values-mean-and-do-not-mean"><i class="fa fa-check"></i><b>1.4.5</b> What <em>P</em>-values mean and do not mean</a></li>
<li class="chapter" data-level="1.4.6" data-path="mod-01.html"><a href="mod-01.html#do-you-need-a-p-value"><i class="fa fa-check"></i><b>1.4.6</b> Do you need a <em>P</em>-value?</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="mod-01.html"><a href="mod-01.html#alternatives-to-nhst"><i class="fa fa-check"></i><b>1.5</b> Alternatives to NHST</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="mod-01.html"><a href="mod-01.html#mod-01-bayes"><i class="fa fa-check"></i><b>1.5.1</b> Bayesian inference</a></li>
<li class="chapter" data-level="1.5.2" data-path="mod-01.html"><a href="mod-01.html#information-theoretic-methods"><i class="fa fa-check"></i><b>1.5.2</b> Information-theoretic methods</a></li>
<li class="chapter" data-level="1.5.3" data-path="mod-01.html"><a href="mod-01.html#machine-learning"><i class="fa fa-check"></i><b>1.5.3</b> Machine learning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="mod-02.html"><a href="mod-02.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="mod-02.html"><a href="mod-02.html#getting-started-with-r"><i class="fa fa-check"></i><b>2.1</b> Getting started with R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="mod-02.html"><a href="mod-02.html#what-is-r"><i class="fa fa-check"></i><b>2.1.1</b> What is R?</a></li>
<li class="chapter" data-level="2.1.2" data-path="mod-02.html"><a href="mod-02.html#advantages-of-r"><i class="fa fa-check"></i><b>2.1.2</b> Advantages of R</a></li>
<li class="chapter" data-level="2.1.3" data-path="mod-02.html"><a href="mod-02.html#disadvantages-of-r"><i class="fa fa-check"></i><b>2.1.3</b> Disadvantages of R</a></li>
<li class="chapter" data-level="2.1.4" data-path="mod-02.html"><a href="mod-02.html#base-r-and-vs.-tidyverse"><i class="fa fa-check"></i><b>2.1.4</b> Base R and (vs.?) <code>tidyverse</code></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="mod-02.html"><a href="mod-02.html#download-and-install-r-and-rstudio"><i class="fa fa-check"></i><b>2.2</b> Download and install R (and RStudio)</a></li>
<li class="chapter" data-level="2.3" data-path="mod-02.html"><a href="mod-02.html#using-r"><i class="fa fa-check"></i><b>2.3</b> Using R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="mod-02.html"><a href="mod-02.html#using-the-base-r-gui"><i class="fa fa-check"></i><b>2.3.1</b> Using the base R GUI</a></li>
<li class="chapter" data-level="2.3.2" data-path="mod-02.html"><a href="mod-02.html#using-r-in-rstudio"><i class="fa fa-check"></i><b>2.3.2</b> Using R in RStudio</a></li>
<li class="chapter" data-level="2.3.3" data-path="mod-02.html"><a href="mod-02.html#using-r-with-other-programs"><i class="fa fa-check"></i><b>2.3.3</b> Using R with other programs</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="mod-02.html"><a href="mod-02.html#mod-02-first"><i class="fa fa-check"></i><b>2.4</b> A first R session</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="mod-02.html"><a href="mod-02.html#import-data"><i class="fa fa-check"></i><b>2.4.1</b> Import data</a></li>
<li class="chapter" data-level="2.4.2" data-path="mod-02.html"><a href="mod-02.html#explore-and-visualize-data"><i class="fa fa-check"></i><b>2.4.2</b> Explore and visualize data</a></li>
<li class="chapter" data-level="2.4.3" data-path="mod-02.html"><a href="mod-02.html#transform-data"><i class="fa fa-check"></i><b>2.4.3</b> Transform data</a></li>
<li class="chapter" data-level="2.4.4" data-path="mod-02.html"><a href="mod-02.html#analyze-data"><i class="fa fa-check"></i><b>2.4.4</b> Analyze data</a></li>
<li class="chapter" data-level="2.4.5" data-path="mod-02.html"><a href="mod-02.html#mod-01-elkfig"><i class="fa fa-check"></i><b>2.4.5</b> Write out results</a></li>
<li class="chapter" data-level="2.4.6" data-path="mod-02.html"><a href="mod-02.html#save-your-work"><i class="fa fa-check"></i><b>2.4.6</b> Save your work?</a></li>
<li class="chapter" data-level="2.4.7" data-path="mod-02.html"><a href="mod-02.html#whats-next"><i class="fa fa-check"></i><b>2.4.7</b> What’s next?</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="mod-02.html"><a href="mod-02.html#write-and-execute-commands-in-the-r-console"><i class="fa fa-check"></i><b>2.5</b> Write and execute commands in the R console</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="mod-02.html"><a href="mod-02.html#r-commandsbasics"><i class="fa fa-check"></i><b>2.5.1</b> R commands–basics</a></li>
<li class="chapter" data-level="2.5.2" data-path="mod-02.html"><a href="mod-02.html#elements-of-r-code"><i class="fa fa-check"></i><b>2.5.2</b> Elements of R code</a></li>
<li class="chapter" data-level="2.5.3" data-path="mod-02.html"><a href="mod-02.html#the-r-workspace"><i class="fa fa-check"></i><b>2.5.3</b> The R workspace</a></li>
<li class="chapter" data-level="2.5.4" data-path="mod-02.html"><a href="mod-02.html#r-code-basics-assignment-and-operators"><i class="fa fa-check"></i><b>2.5.4</b> R code basics: assignment and operators</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="mod-02.html"><a href="mod-02.html#mod-02-struct"><i class="fa fa-check"></i><b>2.6</b> Basic R data structures</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="mod-02.html"><a href="mod-02.html#vectors"><i class="fa fa-check"></i><b>2.6.1</b> Vectors</a></li>
<li class="chapter" data-level="2.6.2" data-path="mod-02.html"><a href="mod-02.html#data-frames"><i class="fa fa-check"></i><b>2.6.2</b> Data frames</a></li>
<li class="chapter" data-level="2.6.3" data-path="mod-02.html"><a href="mod-02.html#matrices-and-arrays"><i class="fa fa-check"></i><b>2.6.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="2.6.4" data-path="mod-02.html"><a href="mod-02.html#lists"><i class="fa fa-check"></i><b>2.6.4</b> Lists</a></li>
<li class="chapter" data-level="2.6.5" data-path="mod-02.html"><a href="mod-02.html#s3-s4-and-other-paradigms"><i class="fa fa-check"></i><b>2.6.5</b> S3, S4, and other paradigms</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="mod-02.html"><a href="mod-02.html#r-data-types"><i class="fa fa-check"></i><b>2.7</b> R data types</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="mod-02.html"><a href="mod-02.html#character-type"><i class="fa fa-check"></i><b>2.7.1</b> Character type</a></li>
<li class="chapter" data-level="2.7.2" data-path="mod-02.html"><a href="mod-02.html#numeric-type"><i class="fa fa-check"></i><b>2.7.2</b> Numeric type</a></li>
<li class="chapter" data-level="2.7.3" data-path="mod-02.html"><a href="mod-02.html#integer-type"><i class="fa fa-check"></i><b>2.7.3</b> Integer type</a></li>
<li class="chapter" data-level="2.7.4" data-path="mod-02.html"><a href="mod-02.html#logical-type"><i class="fa fa-check"></i><b>2.7.4</b> Logical type</a></li>
<li class="chapter" data-level="2.7.5" data-path="mod-02.html"><a href="mod-02.html#special-values"><i class="fa fa-check"></i><b>2.7.5</b> Special values</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="mod-02.html"><a href="mod-02.html#manage-r-code-as-scripts-.r-files"><i class="fa fa-check"></i><b>2.8</b> Manage R code as scripts (.r files)</a></li>
<li class="chapter" data-level="2.9" data-path="mod-02.html"><a href="mod-02.html#manage-and-use-r-packages"><i class="fa fa-check"></i><b>2.9</b> Manage and use R packages</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="mod-02.html"><a href="mod-02.html#your-r-library"><i class="fa fa-check"></i><b>2.9.1</b> Your R library</a></li>
<li class="chapter" data-level="2.9.2" data-path="mod-02.html"><a href="mod-02.html#installing-packages-using-the-r-gui"><i class="fa fa-check"></i><b>2.9.2</b> Installing packages using the R GUI</a></li>
<li class="chapter" data-level="2.9.3" data-path="mod-02.html"><a href="mod-02.html#installing-packages-in-rstudio"><i class="fa fa-check"></i><b>2.9.3</b> Installing packages in RStudio</a></li>
<li class="chapter" data-level="2.9.4" data-path="mod-02.html"><a href="mod-02.html#installing-packages-using-the-r-console"><i class="fa fa-check"></i><b>2.9.4</b> Installing packages using the R console</a></li>
<li class="chapter" data-level="2.9.5" data-path="mod-02.html"><a href="mod-02.html#working-with-packages-in-r"><i class="fa fa-check"></i><b>2.9.5</b> Working with packages in R</a></li>
<li class="chapter" data-level="2.9.6" data-path="mod-02.html"><a href="mod-02.html#package-dependencies"><i class="fa fa-check"></i><b>2.9.6</b> Package dependencies</a></li>
<li class="chapter" data-level="2.9.7" data-path="mod-02.html"><a href="mod-02.html#citing-packages"><i class="fa fa-check"></i><b>2.9.7</b> Citing packages</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="mod-02.html"><a href="mod-02.html#r-documentation"><i class="fa fa-check"></i><b>2.10</b> R documentation</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="mod-02.html"><a href="mod-02.html#documentation-help-files"><i class="fa fa-check"></i><b>2.10.1</b> Documentation (help) files</a></li>
<li class="chapter" data-level="2.10.2" data-path="mod-02.html"><a href="mod-02.html#r-vignettes"><i class="fa fa-check"></i><b>2.10.2</b> R vignettes</a></li>
<li class="chapter" data-level="2.10.3" data-path="mod-02.html"><a href="mod-02.html#official-r-project-resources"><i class="fa fa-check"></i><b>2.10.3</b> Official R Project resources</a></li>
<li class="chapter" data-level="2.10.4" data-path="mod-02.html"><a href="mod-02.html#unofficial-online-resources"><i class="fa fa-check"></i><b>2.10.4</b> Unofficial online resources</a></li>
<li class="chapter" data-level="2.10.5" data-path="mod-02.html"><a href="mod-02.html#r-books"><i class="fa fa-check"></i><b>2.10.5</b> R books</a></li>
<li class="chapter" data-level="2.10.6" data-path="mod-02.html"><a href="mod-02.html#two-reminders"><i class="fa fa-check"></i><b>2.10.6</b> Two reminders</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="mod-03.html"><a href="mod-03.html"><i class="fa fa-check"></i><b>3</b> Data manipulation with R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="mod-03.html"><a href="mod-03.html#mod-03-inout"><i class="fa fa-check"></i><b>3.1</b> Data import and export</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="mod-03.html"><a href="mod-03.html#importing-data-preliminaries"><i class="fa fa-check"></i><b>3.1.1</b> Importing data: preliminaries</a></li>
<li class="chapter" data-level="3.1.2" data-path="mod-03.html"><a href="mod-03.html#importing-data-from-text-files-with-read.csv-and-read.table"><i class="fa fa-check"></i><b>3.1.2</b> Importing data from text files with <code>read.csv()</code> and <code>read.table()</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="mod-03.html"><a href="mod-03.html#importing-data-from-saved-workspaces"><i class="fa fa-check"></i><b>3.1.3</b> Importing data from saved workspaces</a></li>
<li class="chapter" data-level="3.1.4" data-path="mod-03.html"><a href="mod-03.html#importing-data-special-cases"><i class="fa fa-check"></i><b>3.1.4</b> Importing data: special cases:</a></li>
<li class="chapter" data-level="3.1.5" data-path="mod-03.html"><a href="mod-03.html#export-data-from-r"><i class="fa fa-check"></i><b>3.1.5</b> Export data from R</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="mod-03.html"><a href="mod-03.html#making-values-in-r"><i class="fa fa-check"></i><b>3.2</b> Making values in R</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="mod-03.html"><a href="mod-03.html#producing-arbitrary-values-with-c"><i class="fa fa-check"></i><b>3.2.1</b> Producing arbitrary values with <code>c()</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="mod-03.html"><a href="mod-03.html#generating-regular-values"><i class="fa fa-check"></i><b>3.2.2</b> Generating regular values</a></li>
<li class="chapter" data-level="3.2.3" data-path="mod-03.html"><a href="mod-03.html#generating-random-values"><i class="fa fa-check"></i><b>3.2.3</b> Generating random values</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="mod-03.html"><a href="mod-03.html#selecting-data-with"><i class="fa fa-check"></i><b>3.3</b> Selecting data with <code>[]</code></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="mod-03.html"><a href="mod-03.html#mod-03-brackets"><i class="fa fa-check"></i><b>3.3.1</b> Basics of brackets</a></li>
<li class="chapter" data-level="3.3.2" data-path="mod-03.html"><a href="mod-03.html#extracting-and-selecting-data-with-logical-tests"><i class="fa fa-check"></i><b>3.3.2</b> Extracting and selecting data with logical tests</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="mod-03.html"><a href="mod-03.html#managing-dates-and-characters"><i class="fa fa-check"></i><b>3.4</b> Managing dates and characters</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="mod-03.html"><a href="mod-03.html#temporal-data-and-dates"><i class="fa fa-check"></i><b>3.4.1</b> Temporal data and dates</a></li>
<li class="chapter" data-level="3.4.2" data-path="mod-03.html"><a href="mod-03.html#character-data-text"><i class="fa fa-check"></i><b>3.4.2</b> Character data (text)</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="mod-03.html"><a href="mod-03.html#mod-03-dataframe"><i class="fa fa-check"></i><b>3.5</b> Data frame management</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="mod-03.html"><a href="mod-03.html#data-frame-structure"><i class="fa fa-check"></i><b>3.5.1</b> Data frame structure</a></li>
<li class="chapter" data-level="3.5.2" data-path="mod-03.html"><a href="mod-03.html#common-data-frame-operations"><i class="fa fa-check"></i><b>3.5.2</b> Common data frame operations</a></li>
<li class="chapter" data-level="3.5.3" data-path="mod-03.html"><a href="mod-03.html#other-data-frame-operations"><i class="fa fa-check"></i><b>3.5.3</b> Other data frame operations</a></li>
<li class="chapter" data-level="3.5.4" data-path="mod-03.html"><a href="mod-03.html#mod-03-reshape"><i class="fa fa-check"></i><b>3.5.4</b> Reshaping data frames</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mod-04.html"><a href="mod-04.html"><i class="fa fa-check"></i><b>4</b> Exploratory data analysis 1: Data description and summarization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="mod-04.html"><a href="mod-04.html#motivation"><i class="fa fa-check"></i><b>4.1</b> Motivation</a></li>
<li class="chapter" data-level="4.2" data-path="mod-04.html"><a href="mod-04.html#descriptive-and-summary-statistics"><i class="fa fa-check"></i><b>4.2</b> Descriptive and summary statistics</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="mod-04.html"><a href="mod-04.html#basic-summary-statistics"><i class="fa fa-check"></i><b>4.2.1</b> Basic summary statistics</a></li>
<li class="chapter" data-level="4.2.2" data-path="mod-04.html"><a href="mod-04.html#mod-04-agg"><i class="fa fa-check"></i><b>4.2.2</b> Summarizing by groups (AKA: pivot tables)</a></li>
<li class="chapter" data-level="4.2.3" data-path="mod-04.html"><a href="mod-04.html#summarizing-data-with-the-apply-family"><i class="fa fa-check"></i><b>4.2.3</b> Summarizing data with the <code>apply()</code> family</a></li>
<li class="chapter" data-level="4.2.4" data-path="mod-04.html"><a href="mod-04.html#mod-04-tab"><i class="fa fa-check"></i><b>4.2.4</b> Tabulation (frequency tables)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="mod-04.html"><a href="mod-04.html#mod-04-vis"><i class="fa fa-check"></i><b>4.3</b> Visualizing single variables</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="mod-04.html"><a href="mod-04.html#boxplots-aka-box-and-whisker-plots"><i class="fa fa-check"></i><b>4.3.1</b> Boxplots (aka: box-and-whisker plots)</a></li>
<li class="chapter" data-level="4.3.2" data-path="mod-04.html"><a href="mod-04.html#histograms"><i class="fa fa-check"></i><b>4.3.2</b> Histograms</a></li>
<li class="chapter" data-level="4.3.3" data-path="mod-04.html"><a href="mod-04.html#mod04-pdfplots"><i class="fa fa-check"></i><b>4.3.3</b> Kernel density plots</a></li>
<li class="chapter" data-level="4.3.4" data-path="mod-04.html"><a href="mod-04.html#empirical-cumulative-density-function-ecdf-plots"><i class="fa fa-check"></i><b>4.3.4</b> Empirical cumulative density function (ECDF) plots</a></li>
<li class="chapter" data-level="4.3.5" data-path="mod-04.html"><a href="mod-04.html#quantile-quantile-qq-plots"><i class="fa fa-check"></i><b>4.3.5</b> Quantile-quantile (QQ) plots</a></li>
<li class="chapter" data-level="4.3.6" data-path="mod-04.html"><a href="mod-04.html#how-should-i-plot-my-data"><i class="fa fa-check"></i><b>4.3.6</b> How should I plot my data?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mod-05.html"><a href="mod-05.html"><i class="fa fa-check"></i><b>5</b> Exploratory data analysis 2: Probability distributions for biology</a>
<ul>
<li class="chapter" data-level="5.1" data-path="mod-05.html"><a href="mod-05.html#mod-05-dists1"><i class="fa fa-check"></i><b>5.1</b> Statistical distributions</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="mod-05.html"><a href="mod-05.html#probability-distributions-in-r"><i class="fa fa-check"></i><b>5.1.1</b> Probability distributions in R</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="mod-05.html"><a href="mod-05.html#mod-05-discrete"><i class="fa fa-check"></i><b>5.2</b> Discrete distributions</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="mod-05.html"><a href="mod-05.html#bernoulli-distribution"><i class="fa fa-check"></i><b>5.2.1</b> Bernoulli distribution</a></li>
<li class="chapter" data-level="5.2.2" data-path="mod-05.html"><a href="mod-05.html#mod-05-binom"><i class="fa fa-check"></i><b>5.2.2</b> Binomial distribution</a></li>
<li class="chapter" data-level="5.2.3" data-path="mod-05.html"><a href="mod-05.html#poisson-distribution"><i class="fa fa-check"></i><b>5.2.3</b> Poisson distribution</a></li>
<li class="chapter" data-level="5.2.4" data-path="mod-05.html"><a href="mod-05.html#mod-05-negbin"><i class="fa fa-check"></i><b>5.2.4</b> Negative binomial distribution</a></li>
<li class="chapter" data-level="5.2.5" data-path="mod-05.html"><a href="mod-05.html#mod-05-geom"><i class="fa fa-check"></i><b>5.2.5</b> Geometric distribution</a></li>
<li class="chapter" data-level="5.2.6" data-path="mod-05.html"><a href="mod-05.html#beta-binomial-distribution"><i class="fa fa-check"></i><b>5.2.6</b> Beta-binomial distribution</a></li>
<li class="chapter" data-level="5.2.7" data-path="mod-05.html"><a href="mod-05.html#multinomial-distribution"><i class="fa fa-check"></i><b>5.2.7</b> Multinomial distribution</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="mod-05.html"><a href="mod-05.html#mod-05-condists"><i class="fa fa-check"></i><b>5.3</b> Continuous distributions</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="mod-05.html"><a href="mod-05.html#uniform-distribution"><i class="fa fa-check"></i><b>5.3.1</b> Uniform distribution</a></li>
<li class="chapter" data-level="5.3.2" data-path="mod-05.html"><a href="mod-05.html#mod-05-norm"><i class="fa fa-check"></i><b>5.3.2</b> Normal distribution</a></li>
<li class="chapter" data-level="5.3.3" data-path="mod-05.html"><a href="mod-05.html#lognormal-distribution"><i class="fa fa-check"></i><b>5.3.3</b> Lognormal distribution</a></li>
<li class="chapter" data-level="5.3.4" data-path="mod-05.html"><a href="mod-05.html#mod-05-gamma"><i class="fa fa-check"></i><b>5.3.4</b> Gamma distribution</a></li>
<li class="chapter" data-level="5.3.5" data-path="mod-05.html"><a href="mod-05.html#beta-distribution"><i class="fa fa-check"></i><b>5.3.5</b> Beta distribution</a></li>
<li class="chapter" data-level="5.3.6" data-path="mod-05.html"><a href="mod-05.html#dirichlet-distribution"><i class="fa fa-check"></i><b>5.3.6</b> Dirichlet distribution</a></li>
<li class="chapter" data-level="5.3.7" data-path="mod-05.html"><a href="mod-05.html#mod-05-expo"><i class="fa fa-check"></i><b>5.3.7</b> Exponential distribution</a></li>
<li class="chapter" data-level="5.3.8" data-path="mod-05.html"><a href="mod-05.html#triangular-distribution"><i class="fa fa-check"></i><b>5.3.8</b> Triangular distribution</a></li>
<li class="chapter" data-level="5.3.9" data-path="mod-05.html"><a href="mod-05.html#distributions-summary"><i class="fa fa-check"></i><b>5.3.9</b> Distributions summary</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="mod-05.html"><a href="mod-05.html#mod-05-dists2"><i class="fa fa-check"></i><b>5.4</b> Fitting and testing distributions</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="mod-05.html"><a href="mod-05.html#estimating-distributional-parameters"><i class="fa fa-check"></i><b>5.4.1</b> Estimating distributional parameters</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="mod-05.html"><a href="mod-05.html#graphical-methods-for-examining-distributions"><i class="fa fa-check"></i><b>5.5</b> Graphical methods for examining distributions</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="mod-05.html"><a href="mod-05.html#comparing-distributions-with-pdf-or-pmf-plots"><i class="fa fa-check"></i><b>5.5.1</b> Comparing distributions with PDF or PMF plots</a></li>
<li class="chapter" data-level="5.5.2" data-path="mod-05.html"><a href="mod-05.html#comparing-distributions-using-cdf-and-ecdf"><i class="fa fa-check"></i><b>5.5.2</b> Comparing distributions using CDF and ECDF</a></li>
<li class="chapter" data-level="5.5.3" data-path="mod-05.html"><a href="mod-05.html#comparing-distributions-using-qq-plots"><i class="fa fa-check"></i><b>5.5.3</b> Comparing distributions using QQ plots</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="mod-05.html"><a href="mod-05.html#formal-tests-for-distributions"><i class="fa fa-check"></i><b>5.6</b> Formal tests for distributions</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="mod-05.html"><a href="mod-05.html#tests-for-normality"><i class="fa fa-check"></i><b>5.6.1</b> Tests for normality</a></li>
<li class="chapter" data-level="5.6.2" data-path="mod-05.html"><a href="mod-05.html#kolmogorov-smirnov-tests"><i class="fa fa-check"></i><b>5.6.2</b> Kolmogorov-Smirnov tests</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="mod-05.html"><a href="mod-05.html#mod-05-trans"><i class="fa fa-check"></i><b>5.7</b> Data transformations</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="mod-05.html"><a href="mod-05.html#why-transform"><i class="fa fa-check"></i><b>5.7.1</b> Why transform?</a></li>
<li class="chapter" data-level="5.7.2" data-path="mod-05.html"><a href="mod-05.html#transforms-vs.-link-functions"><i class="fa fa-check"></i><b>5.7.2</b> Transforms vs. link functions</a></li>
<li class="chapter" data-level="5.7.3" data-path="mod-05.html"><a href="mod-05.html#common-transformations"><i class="fa fa-check"></i><b>5.7.3</b> Common transformations</a></li>
<li class="chapter" data-level="5.7.4" data-path="mod-05.html"><a href="mod-05.html#uncommon-transformations"><i class="fa fa-check"></i><b>5.7.4</b> Uncommon transformations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mod-06.html"><a href="mod-06.html"><i class="fa fa-check"></i><b>6</b> Exploratory data analysis 3: Multivariate data exploration</a>
<ul>
<li class="chapter" data-level="6.1" data-path="mod-06.html"><a href="mod-06.html#scatterplots-for-2-continuous-variables"><i class="fa fa-check"></i><b>6.1</b> Scatterplots for 2 continuous variables</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="mod-06.html"><a href="mod-06.html#r-plotting-basics"><i class="fa fa-check"></i><b>6.1.1</b> R plotting basics</a></li>
<li class="chapter" data-level="6.1.2" data-path="mod-06.html"><a href="mod-06.html#graphical-parameters-and-advanced-plots-with-par"><i class="fa fa-check"></i><b>6.1.2</b> Graphical parameters and advanced plots with <code>par()</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="mod-06.html"><a href="mod-06.html#really-advanced-plotting"><i class="fa fa-check"></i><b>6.1.3</b> Really advanced plotting</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="mod-06.html"><a href="mod-06.html#mod-06-smat"><i class="fa fa-check"></i><b>6.2</b> Scatterplot matrices for many variables</a></li>
<li class="chapter" data-level="6.3" data-path="mod-06.html"><a href="mod-06.html#lattice-plots-for-hierarchical-data"><i class="fa fa-check"></i><b>6.3</b> Lattice plots for hierarchical data</a></li>
<li class="chapter" data-level="6.4" data-path="mod-06.html"><a href="mod-06.html#continuous-variables-by-group"><i class="fa fa-check"></i><b>6.4</b> Continuous variables by group</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="mod-06.html"><a href="mod-06.html#boxplots"><i class="fa fa-check"></i><b>6.4.1</b> Boxplots</a></li>
<li class="chapter" data-level="6.4.2" data-path="mod-06.html"><a href="mod-06.html#barplots"><i class="fa fa-check"></i><b>6.4.2</b> Barplots</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="mod-06.html"><a href="mod-06.html#ordination-brief-introduction"><i class="fa fa-check"></i><b>6.5</b> Ordination (brief introduction)</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="mod-06.html"><a href="mod-06.html#principal-components-analysis-pca"><i class="fa fa-check"></i><b>6.5.1</b> Principal components analysis (PCA)</a></li>
<li class="chapter" data-level="6.5.2" data-path="mod-06.html"><a href="mod-06.html#nonmetric-multidimensional-scaling-nmds"><i class="fa fa-check"></i><b>6.5.2</b> Nonmetric multidimensional scaling (NMDS)</a></li>
<li class="chapter" data-level="6.5.3" data-path="mod-06.html"><a href="mod-06.html#plotting-ordinations"><i class="fa fa-check"></i><b>6.5.3</b> Plotting ordinations</a></li>
<li class="chapter" data-level="6.5.4" data-path="mod-06.html"><a href="mod-06.html#ordination-wrap-up-for-now"><i class="fa fa-check"></i><b>6.5.4</b> Ordination wrap-up (for now)</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="mod-06.html"><a href="mod-06.html#principles-for-good-data-graphics"><i class="fa fa-check"></i><b>6.6</b> Principles for good data graphics</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="mod-06.html"><a href="mod-06.html#maximize-the-data-to-ink-ratio"><i class="fa fa-check"></i><b>6.6.1</b> Maximize the data-to-ink ratio</a></li>
<li class="chapter" data-level="6.6.2" data-path="mod-06.html"><a href="mod-06.html#show-variability"><i class="fa fa-check"></i><b>6.6.2</b> Show variability</a></li>
<li class="chapter" data-level="6.6.3" data-path="mod-06.html"><a href="mod-06.html#use-labels-not-symbols"><i class="fa fa-check"></i><b>6.6.3</b> Use labels, not symbols</a></li>
<li class="chapter" data-level="6.6.4" data-path="mod-06.html"><a href="mod-06.html#be-consistent"><i class="fa fa-check"></i><b>6.6.4</b> Be consistent</a></li>
<li class="chapter" data-level="6.6.5" data-path="mod-06.html"><a href="mod-06.html#set-yourself-up-for-success"><i class="fa fa-check"></i><b>6.6.5</b> Set yourself up for success</a></li>
<li class="chapter" data-level="6.6.6" data-path="mod-06.html"><a href="mod-06.html#consider-legibility"><i class="fa fa-check"></i><b>6.6.6</b> Consider legibility</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="mod-07.html"><a href="mod-07.html"><i class="fa fa-check"></i><b>7</b> Common statistical problems</a>
<ul>
<li class="chapter" data-level="7.1" data-path="mod-07.html"><a href="mod-07.html#outliers-and-erroneous-values"><i class="fa fa-check"></i><b>7.1</b> Outliers and erroneous values</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="mod-07.html"><a href="mod-07.html#detecting-outliers"><i class="fa fa-check"></i><b>7.1.1</b> Detecting outliers</a></li>
<li class="chapter" data-level="7.1.2" data-path="mod-07.html"><a href="mod-07.html#dealing-with-outliers"><i class="fa fa-check"></i><b>7.1.2</b> Dealing with outliers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="mod-07.html"><a href="mod-07.html#autocorrelation"><i class="fa fa-check"></i><b>7.2</b> Autocorrelation</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="mod-07.html"><a href="mod-07.html#graphical-methods-to-identify-autocorrelation"><i class="fa fa-check"></i><b>7.2.1</b> Graphical methods to identify autocorrelation</a></li>
<li class="chapter" data-level="7.2.2" data-path="mod-07.html"><a href="mod-07.html#mantel-tests-for-autocorrelation"><i class="fa fa-check"></i><b>7.2.2</b> Mantel tests for autocorrelation</a></li>
<li class="chapter" data-level="7.2.3" data-path="mod-07.html"><a href="mod-07.html#dealing-with-autocorrelation"><i class="fa fa-check"></i><b>7.2.3</b> Dealing with autocorrelation</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="mod-07.html"><a href="mod-07.html#mod-07-multicol"><i class="fa fa-check"></i><b>7.3</b> Collinearity</a></li>
<li class="chapter" data-level="7.4" data-path="mod-07.html"><a href="mod-07.html#missing-data"><i class="fa fa-check"></i><b>7.4</b> Missing data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="mod-07.html"><a href="mod-07.html#option-1-ignore-missing-data"><i class="fa fa-check"></i><b>7.4.1</b> Option 1: Ignore missing data</a></li>
<li class="chapter" data-level="7.4.2" data-path="mod-07.html"><a href="mod-07.html#option-2-interpolate-or-impute-missing-data"><i class="fa fa-check"></i><b>7.4.2</b> Option 2: Interpolate or impute missing data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mod-08.html"><a href="mod-08.html"><i class="fa fa-check"></i><b>8</b> Planning your analysis (what test?)</a>
<ul>
<li class="chapter" data-level="8.1" data-path="mod-08.html"><a href="mod-08.html#how-to-use-this-guide"><i class="fa fa-check"></i><b>8.1</b> How to use this guide</a></li>
<li class="chapter" data-level="8.2" data-path="mod-08.html"><a href="mod-08.html#what-question-are-you-trying-to-answer"><i class="fa fa-check"></i><b>8.2</b> What question are you trying to answer?</a></li>
<li class="chapter" data-level="8.3" data-path="mod-08.html"><a href="mod-08.html#testing-for-a-difference-in-mean-or-location"><i class="fa fa-check"></i><b>8.3</b> Testing for a difference in mean or location</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="mod-08.html"><a href="mod-08.html#additional-considerations"><i class="fa fa-check"></i><b>8.3.1</b> Additional considerations</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="mod-08.html"><a href="mod-08.html#testing-for-a-continuous-relationship-between-two-or-more-variables"><i class="fa fa-check"></i><b>8.4</b> Testing for a continuous relationship between two or more variables</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="mod-08.html"><a href="mod-08.html#additional-considerations-1"><i class="fa fa-check"></i><b>8.4.1</b> Additional considerations</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="mod-08.html"><a href="mod-08.html#independence-between-categories"><i class="fa fa-check"></i><b>8.5</b> Independence between categories</a></li>
<li class="chapter" data-level="8.6" data-path="mod-08.html"><a href="mod-08.html#classifying-observations"><i class="fa fa-check"></i><b>8.6</b> Classifying observations</a></li>
<li class="chapter" data-level="8.7" data-path="mod-08.html"><a href="mod-08.html#conclusions"><i class="fa fa-check"></i><b>8.7</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mod-09.html"><a href="mod-09.html"><i class="fa fa-check"></i><b>9</b> Basic statistics with R</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mod-09.html"><a href="mod-09.html#mod-09-datasets"><i class="fa fa-check"></i><b>9.1</b> Datasets and variables</a></li>
<li class="chapter" data-level="9.2" data-path="mod-09.html"><a href="mod-09.html#mod-09-frequentist"><i class="fa fa-check"></i><b>9.2</b> Frequentist statistics</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="mod-09.html"><a href="mod-09.html#mod-09-pvalues"><i class="fa fa-check"></i><b>9.2.1</b> <em>P</em>-values and NHST</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="mod-09.html"><a href="mod-09.html#mod-09-whattest"><i class="fa fa-check"></i><b>9.3</b> What kind of test do you need?</a></li>
<li class="chapter" data-level="9.4" data-path="mod-09.html"><a href="mod-09.html#mod-09-tests-for-loc"><i class="fa fa-check"></i><b>9.4</b> Tests for differences in mean or location</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="mod-09.html"><a href="mod-09.html#tests-for-1-group"><i class="fa fa-check"></i><b>9.4.1</b> Tests for 1 group</a></li>
<li class="chapter" data-level="9.4.2" data-path="mod-09.html"><a href="mod-09.html#tests-comparing-two-groups"><i class="fa fa-check"></i><b>9.4.2</b> Tests comparing two groups</a></li>
<li class="chapter" data-level="9.4.3" data-path="mod-09.html"><a href="mod-09.html#aside-whats-with-all-these-t-tests"><i class="fa fa-check"></i><b>9.4.3</b> Aside: what’s with all these <em>t</em>-tests?</a></li>
<li class="chapter" data-level="9.4.4" data-path="mod-09.html"><a href="mod-09.html#comparing-3-or-more-groups"><i class="fa fa-check"></i><b>9.4.4</b> Comparing 3 or more groups</a></li>
<li class="chapter" data-level="9.4.5" data-path="mod-09.html"><a href="mod-09.html#polynomial-patterns-in-grouped-data"><i class="fa fa-check"></i><b>9.4.5</b> Polynomial patterns in grouped data</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="mod-09.html"><a href="mod-09.html#tests-for-patterns-in-continuous-data"><i class="fa fa-check"></i><b>9.5</b> Tests for patterns in continuous data</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="mod-09.html"><a href="mod-09.html#mod-09-correlation"><i class="fa fa-check"></i><b>9.5.1</b> Correlation</a></li>
<li class="chapter" data-level="9.5.2" data-path="mod-09.html"><a href="mod-09.html#mod-09-linear-mods"><i class="fa fa-check"></i><b>9.5.2</b> Linear models</a></li>
<li class="chapter" data-level="9.5.3" data-path="mod-09.html"><a href="mod-09.html#linear-models-wrap-up-for-now"><i class="fa fa-check"></i><b>9.5.3</b> Linear models wrap-up (for now)</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="mod-09.html"><a href="mod-09.html#mod-09-contingency"><i class="fa fa-check"></i><b>9.6</b> Tests for proportions and contingency</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="mod-09.html"><a href="mod-09.html#mod-09-ctables"><i class="fa fa-check"></i><b>9.6.1</b> Contingency tables</a></li>
<li class="chapter" data-level="9.6.2" data-path="mod-09.html"><a href="mod-09.html#tests-on-contingency-tables"><i class="fa fa-check"></i><b>9.6.2</b> Tests on contingency tables</a></li>
<li class="chapter" data-level="9.6.3" data-path="mod-09.html"><a href="mod-09.html#mod-09-oddsratios"><i class="fa fa-check"></i><b>9.6.3</b> Contingency tests and odds ratios</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="mod-09.html"><a href="mod-09.html#mod-09-classification"><i class="fa fa-check"></i><b>9.7</b> Classification</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="mod-10.html"><a href="mod-10.html"><i class="fa fa-check"></i><b>10</b> Generalized linear models (GLM)</a>
<ul>
<li class="chapter" data-level="10.1" data-path="mod-10.html"><a href="mod-10.html#mod-10-lm"><i class="fa fa-check"></i><b>10.1</b> Prelude with linear models</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="mod-10.html"><a href="mod-10.html#assumptions-of-linear-models"><i class="fa fa-check"></i><b>10.1.1</b> Assumptions of linear models</a></li>
<li class="chapter" data-level="10.1.2" data-path="mod-10.html"><a href="mod-10.html#linear-regression-in-r"><i class="fa fa-check"></i><b>10.1.2</b> Linear regression in R</a></li>
<li class="chapter" data-level="10.1.3" data-path="mod-10.html"><a href="mod-10.html#multiple-linear-regression"><i class="fa fa-check"></i><b>10.1.3</b> Multiple linear regression</a></li>
<li class="chapter" data-level="10.1.4" data-path="mod-10.html"><a href="mod-10.html#mod-10-anova"><i class="fa fa-check"></i><b>10.1.4</b> ANOVA and ANCOVA with <code>lm()</code></a></li>
<li class="chapter" data-level="10.1.5" data-path="mod-10.html"><a href="mod-10.html#variations-on-linear-models"><i class="fa fa-check"></i><b>10.1.5</b> Variations on linear models</a></li>
<li class="chapter" data-level="10.1.6" data-path="mod-10.html"><a href="mod-10.html#example-linear-regression-workflow"><i class="fa fa-check"></i><b>10.1.6</b> Example linear regression workflow</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="mod-10.html"><a href="mod-10.html#mod-10-basic"><i class="fa fa-check"></i><b>10.2</b> GLM basics</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="mod-10.html"><a href="mod-10.html#example-glms"><i class="fa fa-check"></i><b>10.2.1</b> Example GLMS</a></li>
<li class="chapter" data-level="10.2.2" data-path="mod-10.html"><a href="mod-10.html#glm-families"><i class="fa fa-check"></i><b>10.2.2</b> GLM families</a></li>
<li class="chapter" data-level="10.2.3" data-path="mod-10.html"><a href="mod-10.html#glm-link-functions"><i class="fa fa-check"></i><b>10.2.3</b> GLM link functions</a></li>
<li class="chapter" data-level="10.2.4" data-path="mod-10.html"><a href="mod-10.html#deviance-and-other-glm-diagnostics"><i class="fa fa-check"></i><b>10.2.4</b> Deviance and other GLM diagnostics</a></li>
<li class="chapter" data-level="10.2.5" data-path="mod-10.html"><a href="mod-10.html#to-pseudo-r2-or-not-to-pseudo-r2"><i class="fa fa-check"></i><b>10.2.5</b> To pseudo-<em>R</em><sup>2</sup> or not to pseudo-<em>R</em><sup>2</sup>?</a></li>
<li class="chapter" data-level="10.2.6" data-path="mod-10.html"><a href="mod-10.html#common-glms"><i class="fa fa-check"></i><b>10.2.6</b> Common GLMs</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="mod-10.html"><a href="mod-10.html#mod-10-loglin"><i class="fa fa-check"></i><b>10.3</b> Log-linear models</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="mod-10.html"><a href="mod-10.html#mod-10-loglin-examp"><i class="fa fa-check"></i><b>10.3.1</b> Example with simulated data</a></li>
<li class="chapter" data-level="10.3.2" data-path="mod-10.html"><a href="mod-10.html#example-with-real-data"><i class="fa fa-check"></i><b>10.3.2</b> Example with real data</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="mod-10.html"><a href="mod-10.html#mod-10-poisson"><i class="fa fa-check"></i><b>10.4</b> Poisson GLM for counts</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="mod-10.html"><a href="mod-10.html#example-with-simulated-data"><i class="fa fa-check"></i><b>10.4.1</b> Example with simulated data</a></li>
<li class="chapter" data-level="10.4.2" data-path="mod-10.html"><a href="mod-10.html#example-with-real-data-1"><i class="fa fa-check"></i><b>10.4.2</b> Example with real data</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="mod-10.html"><a href="mod-10.html#mod-10-quasi"><i class="fa fa-check"></i><b>10.5</b> Quasi-Poisson and negative binomial GLM</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="mod-10.html"><a href="mod-10.html#example-with-simulated-data-1"><i class="fa fa-check"></i><b>10.5.1</b> Example with simulated data</a></li>
<li class="chapter" data-level="10.5.2" data-path="mod-10.html"><a href="mod-10.html#example-with-real-data-2"><i class="fa fa-check"></i><b>10.5.2</b> Example with real data</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="mod-10.html"><a href="mod-10.html#mod-10-logistic"><i class="fa fa-check"></i><b>10.6</b> Logistic regression for binary outcomes</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="mod-10.html"><a href="mod-10.html#example-with-simulated-data-2"><i class="fa fa-check"></i><b>10.6.1</b> Example with simulated data</a></li>
<li class="chapter" data-level="10.6.2" data-path="mod-10.html"><a href="mod-10.html#example-with-real-data-3"><i class="fa fa-check"></i><b>10.6.2</b> Example with real data</a></li>
<li class="chapter" data-level="10.6.3" data-path="mod-10.html"><a href="mod-10.html#mod-10-auc"><i class="fa fa-check"></i><b>10.6.3</b> Logistic GLM diagnostics: AUC and ROC</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="mod-10.html"><a href="mod-10.html#mod-10-binom"><i class="fa fa-check"></i><b>10.7</b> Binomial GLM for proportional data</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="mod-10.html"><a href="mod-10.html#binomial-glm"><i class="fa fa-check"></i><b>10.7.1</b> Binomial GLM</a></li>
<li class="chapter" data-level="10.7.2" data-path="mod-10.html"><a href="mod-10.html#example-with-simulated-data-3"><i class="fa fa-check"></i><b>10.7.2</b> Example with simulated data</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="mod-10.html"><a href="mod-10.html#mod-10-gamma"><i class="fa fa-check"></i><b>10.8</b> Gamma models for overdispersed data</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="mod-10.html"><a href="mod-10.html#example-with-simulated-data-4"><i class="fa fa-check"></i><b>10.8.1</b> Example with simulated data</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="mod-10.html"><a href="mod-10.html#mod-10-beyond"><i class="fa fa-check"></i><b>10.9</b> Beyond GLM: Overview of GAM and GEE</a>
<ul>
<li class="chapter" data-level="10.9.1" data-path="mod-10.html"><a href="mod-10.html#mod-10-gam"><i class="fa fa-check"></i><b>10.9.1</b> Generalized additive models (GAM)</a></li>
<li class="chapter" data-level="10.9.2" data-path="mod-10.html"><a href="mod-10.html#mod-10-gee"><i class="fa fa-check"></i><b>10.9.2</b> Generalized estimating equations (GEE)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mod-11.html"><a href="mod-11.html"><i class="fa fa-check"></i><b>11</b> Nonlinear models</a>
<ul>
<li class="chapter" data-level="11.1" data-path="mod-11.html"><a href="mod-11.html#background"><i class="fa fa-check"></i><b>11.1</b> Background</a></li>
<li class="chapter" data-level="11.2" data-path="mod-11.html"><a href="mod-11.html#mod-11-intro"><i class="fa fa-check"></i><b>11.2</b> Nonlinear least squares (NLS)</a></li>
<li class="chapter" data-level="11.3" data-path="mod-11.html"><a href="mod-11.html#mod-11-micmen"><i class="fa fa-check"></i><b>11.3</b> Michaelis-Menten curves</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="mod-11.html"><a href="mod-11.html#mod-11-micmen-sim"><i class="fa fa-check"></i><b>11.3.1</b> Example with simulated data</a></li>
<li class="chapter" data-level="11.3.2" data-path="mod-11.html"><a href="mod-11.html#example-with-real-data-4"><i class="fa fa-check"></i><b>11.3.2</b> Example with real data</a></li>
<li class="chapter" data-level="11.3.3" data-path="mod-11.html"><a href="mod-11.html#alternative-strategies-for-the-analysis"><i class="fa fa-check"></i><b>11.3.3</b> Alternative strategies for the analysis</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="mod-11.html"><a href="mod-11.html#mod-11-grow"><i class="fa fa-check"></i><b>11.4</b> Biological growth curves</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="mod-11.html"><a href="mod-11.html#gompertz-and-von-bertalanffy-curves"><i class="fa fa-check"></i><b>11.4.1</b> Gompertz and von Bertalanffy curves</a></li>
<li class="chapter" data-level="11.4.2" data-path="mod-11.html"><a href="mod-11.html#example-with-real-data-5"><i class="fa fa-check"></i><b>11.4.2</b> Example with real data</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="mod-11.html"><a href="mod-11.html#dose-response-curves"><i class="fa fa-check"></i><b>11.5</b> Dose response curves</a></li>
<li class="chapter" data-level="11.6" data-path="mod-11.html"><a href="mod-11.html#alternatives-to-nls"><i class="fa fa-check"></i><b>11.6</b> Alternatives to NLS</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="mod-11.html"><a href="mod-11.html#generalized-nonlinear-models"><i class="fa fa-check"></i><b>11.6.1</b> Generalized nonlinear models</a></li>
<li class="chapter" data-level="11.6.2" data-path="mod-11.html"><a href="mod-11.html#quantile-regression"><i class="fa fa-check"></i><b>11.6.2</b> Quantile regression</a></li>
<li class="chapter" data-level="11.6.3" data-path="mod-11.html"><a href="mod-11.html#mod-11-gam"><i class="fa fa-check"></i><b>11.6.3</b> Generalized additive models (GAM)</a></li>
<li class="chapter" data-level="11.6.4" data-path="mod-11.html"><a href="mod-11.html#classification-and-regression-trees-cart"><i class="fa fa-check"></i><b>11.6.4</b> Classification and regression trees (CART)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="mod-12.html"><a href="mod-12.html"><i class="fa fa-check"></i><b>12</b> Mixed models</a>
<ul>
<li class="chapter" data-level="12.1" data-path="mod-12.html"><a href="mod-12.html#prelude-glm"><i class="fa fa-check"></i><b>12.1</b> Prelude (GLM)</a></li>
<li class="chapter" data-level="12.2" data-path="mod-12.html"><a href="mod-12.html#mod-12-lmm"><i class="fa fa-check"></i><b>12.2</b> Linear mixed models (LMM)</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="mod-12.html"><a href="mod-12.html#formal-definition-and-example"><i class="fa fa-check"></i><b>12.2.1</b> Formal definition and example</a></li>
<li class="chapter" data-level="12.2.2" data-path="mod-12.html"><a href="mod-12.html#example-with-simulated-data-5"><i class="fa fa-check"></i><b>12.2.2</b> Example with simulated data</a></li>
<li class="chapter" data-level="12.2.3" data-path="mod-12.html"><a href="mod-12.html#p-values-in-lmm"><i class="fa fa-check"></i><b>12.2.3</b> <em>P</em>-values in LMM</a></li>
<li class="chapter" data-level="12.2.4" data-path="mod-12.html"><a href="mod-12.html#specifying-random-effects"><i class="fa fa-check"></i><b>12.2.4</b> Specifying random effects</a></li>
<li class="chapter" data-level="12.2.5" data-path="mod-12.html"><a href="mod-12.html#lmm-example-with-real-data"><i class="fa fa-check"></i><b>12.2.5</b> LMM example with real data</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="mod-12.html"><a href="mod-12.html#mod-12-glmm"><i class="fa fa-check"></i><b>12.3</b> Generalized linear mixed models (GLMM)</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="mod-12.html"><a href="mod-12.html#definition-1"><i class="fa fa-check"></i><b>12.3.1</b> Definition</a></li>
<li class="chapter" data-level="12.3.2" data-path="mod-12.html"><a href="mod-12.html#glmm-on-simulated-data"><i class="fa fa-check"></i><b>12.3.2</b> GLMM on simulated data</a></li>
<li class="chapter" data-level="12.3.3" data-path="mod-12.html"><a href="mod-12.html#glmm-on-real-data"><i class="fa fa-check"></i><b>12.3.3</b> GLMM on real data</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="mod-12.html"><a href="mod-12.html#mod-12-nlme"><i class="fa fa-check"></i><b>12.4</b> Nonlinear mixed models (NLME)</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="mod-12.html"><a href="mod-12.html#definition-and-background"><i class="fa fa-check"></i><b>12.4.1</b> Definition and background</a></li>
<li class="chapter" data-level="12.4.2" data-path="mod-12.html"><a href="mod-12.html#nlme-on-simulated-data"><i class="fa fa-check"></i><b>12.4.2</b> NLME on simulated data</a></li>
<li class="chapter" data-level="12.4.3" data-path="mod-12.html"><a href="mod-12.html#nlme-on-real-data"><i class="fa fa-check"></i><b>12.4.3</b> NLME on real data</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="mod-12.html"><a href="mod-12.html#mod-12-gamm"><i class="fa fa-check"></i><b>12.5</b> (Generalized) additive mixed models (AMM/GAMM)</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="mod-12.html"><a href="mod-12.html#example-gamm-with-real-data"><i class="fa fa-check"></i><b>12.5.1</b> Example GAMM with real data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="mod-13.html"><a href="mod-13.html"><i class="fa fa-check"></i><b>13</b> Multivariate data analysis</a>
<ul>
<li class="chapter" data-level="13.1" data-path="mod-13.html"><a href="mod-13.html#multivariate-data"><i class="fa fa-check"></i><b>13.1</b> Multivariate data</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="mod-13.html"><a href="mod-13.html#univariate-vs.-multivariate-data"><i class="fa fa-check"></i><b>13.1.1</b> Univariate vs. multivariate data</a></li>
<li class="chapter" data-level="13.1.2" data-path="mod-13.html"><a href="mod-13.html#components-of-multivariate-data"><i class="fa fa-check"></i><b>13.1.2</b> Components of multivariate data</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="mod-13.html"><a href="mod-13.html#mod-13-dist"><i class="fa fa-check"></i><b>13.2</b> Distance metrics: biological (dis)similarity</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="mod-13.html"><a href="mod-13.html#euclidean-distance"><i class="fa fa-check"></i><b>13.2.1</b> Euclidean distance</a></li>
<li class="chapter" data-level="13.2.2" data-path="mod-13.html"><a href="mod-13.html#bray-curtis-and-other-distance-metrics"><i class="fa fa-check"></i><b>13.2.2</b> Bray-Curtis and other distance metrics</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="mod-13.html"><a href="mod-13.html#clustering"><i class="fa fa-check"></i><b>13.3</b> Clustering</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="mod-13.html"><a href="mod-13.html#k-means-clustering"><i class="fa fa-check"></i><b>13.3.1</b> <em>K</em>-means clustering</a></li>
<li class="chapter" data-level="13.3.2" data-path="mod-13.html"><a href="mod-13.html#hierarchical-agglomerative-clustering"><i class="fa fa-check"></i><b>13.3.2</b> Hierarchical agglomerative clustering</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="mod-13.html"><a href="mod-13.html#mod-13-sims"><i class="fa fa-check"></i><b>13.4</b> Analyzing dissimilarity</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="mod-13.html"><a href="mod-13.html#mantel-tests-distance-vs.-distance"><i class="fa fa-check"></i><b>13.4.1</b> Mantel tests: distance vs. distance</a></li>
<li class="chapter" data-level="13.4.2" data-path="mod-13.html"><a href="mod-13.html#comparing-dissimilarity-between-groups"><i class="fa fa-check"></i><b>13.4.2</b> Comparing dissimilarity between groups</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="mod-13.html"><a href="mod-13.html#mod-13-ord"><i class="fa fa-check"></i><b>13.5</b> Ordination</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="mod-13.html"><a href="mod-13.html#mod-13-pca"><i class="fa fa-check"></i><b>13.5.1</b> Principal components analysis (PCA)</a></li>
<li class="chapter" data-level="13.5.2" data-path="mod-13.html"><a href="mod-13.html#nmds-and-other-ordination-methods"><i class="fa fa-check"></i><b>13.5.2</b> NMDS and other ordination methods</a></li>
<li class="chapter" data-level="13.5.3" data-path="mod-13.html"><a href="mod-13.html#other-ordination-techniques"><i class="fa fa-check"></i><b>13.5.3</b> Other ordination techniques</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="literature-cited.html"><a href="literature-cited.html"><i class="fa fa-check"></i>Literature Cited</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Applied Biological Data Analysis: Statistics and R for Biologists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mod-03" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Module 3</span> Data manipulation with R<a href="mod-03.html#mod-03" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In <a href="mod-02.html#mod-02">Module 2</a> we introduced the basics of the R language and program environment. In this module, we’ll go a few steps further and get into the finer details of <strong>data manipulation</strong>: the practice of arranging, sorting, cleaning, and modifying data (and the objects that contain data). Data manipulation is an important R skill because real datasets usually need some fixing before they can be properly analyzed. Data manipulation is also and essential part of R programming for tasks other than data analysis. For example, <a href="https://doi.org/10.5066/P935Y7NO">simulation modeling</a> or document production (e.g., this website!).</p>
<div id="mod-03-inout" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Data import and export<a href="mod-03.html#mod-03-inout" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before you can use R to analyze your data, you need to get you data into R. Most of us store our data in an Excel spreadsheet or some kind of database. These are fine, but if you plan to have R in your workflow I strongly recommend you get in the habit of storing your data in plain text files. Plain text files store data separated (or “delimited”) by a particular character such as a comma or a tab. Unsurprisingly, these are called <strong>comma-delimited (.csv)</strong> or <strong>tab-delimited (.txt)</strong> text files. The reason for storing and importing your data this way is simple: plain text files are a stable, almost-universally supported file format that can be read and opened by many programs on any computer. Proprietary formats such as Excel spreadsheets (.xlsx or .xls) or the Mac “Numbers” program (.numbers) are not as widely supported and change more frequently than plain text formats. The fact that plain text formats are typically smaller than equivalent Excel files is a nice bonus.</p>
<p>Reading your data in from text files has another benefit: repeatability. Chances are you will need to revisit or repeat your data analysis several times. If you program the importation of data in a few lines of R code, you can just run the code. If, however, you use one of the “point-and-click” methods available in RStudio or base R you will have to repeat those steps manually. This can get very aggravating and time consuming if you have multiple datasets to import. This page is designed to demystify the process of getting data into R and to demonstrate some good practices for data storage.</p>
<p>Note that many of the code blocks below have <code># not run:</code> in them, and no output. These indicate that either single commands or the entire block was not actually evaluated when rendering the R Markdown. This was either because the code was designed to return an error (which would prevent R Markdown rendering), produce large outputs, or would clutter up the folder where I store the files for this website. These commands will work on your machine, and will demonstrate important R concepts, so try them out!</p>
<div id="importing-data-preliminaries" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Importing data: preliminaries<a href="mod-03.html#importing-data-preliminaries" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before you try to import your data into R, take a few minutes to set yourself up for success.</p>
<div id="naming-data-files" class="section level4 hasAnchor" number="3.1.1.1">
<h4><span class="header-section-number">3.1.1.1</span> Naming data files<a href="mod-03.html#naming-data-files" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Good file names are essential for a working biologist. Chances are you will work on many projects over the course of your career, each with its own collection of data files. Even if you store each project’s data in a separate folder, it is a very good idea to give data files within those folders names that are descriptive. I have worked with many people who insist on using file names like “data.xlsx” and relying on their own memory or paper notes to tell them which file is which. Consider this list of particularly egregious file names:</p>
<ul>
<li>data.txt</li>
<li>Data.txt</li>
<li>data.set.csv</li>
<li>analysis data.xlsx</li>
<li>thesis data.xlsx</li>
<li>DATA FINAL - copy.txt</li>
<li>data current.revised.2019.txt.xlsx</li>
<li>final thesis data revised revised final revised analysis.csv</li>
</ul>
<p>We are all guilty of this kind of bad naming from time to time. What do all of the above have in common? They are vague. The names contain no meaningful information about what the files actually contain. Some of them are ambiguous: different operating systems or programs might read “data.txt” and “Data.txt” as the same file, or as different files!</p>
<p>Data file names should be <strong>short</strong>, <strong>simple</strong>, and <strong>descriptive</strong>. There are no hard and fast rules for naming data files so I’m not going to prescribe any. Instead, I’ll share some examples and explain why these names are helpful. As you go along and get getter at working with data you will probably develop your own habits, and that’s ok. Just try to follow the guiding principles of short, simple, and descriptive.</p>
<p>Here are some example file names with explanations of their desirable properties:</p>
<p><strong>sturgeon_growth_data_2017-02-21.txt</strong></p>
<p>This name declares what the file contains (growth data for sturgeon), and the date it was created. Notice that the date is given as “YYYY-MM-DD”. This format is useful because it automatically sorts chronologically. This file name separates its words with underscores rather than spaces or periods. This can prevent some occasional issues with programs misreading file names (white space and periods can have specific meanings in some contexts).</p>
<p><strong>dat_combine_2020-07-13.csv</strong></p>
<p>This name signifies that the file contains a “combined” dataset, and includes the date of its creation. This would be kept in a folder with the files that were combined to make it. Within a project I usually use prefixes on file names to help identify them: “dat” for datasets with response and explanatory variables; “met” for “metadata”; “geo” or “loc” for geospatial datasets and GIS layers; and “key” for lookup tables that relate dat and met files. You might develop your own conventions for types of data that occur in your work.</p>
<p><strong>dat_vegcover_nrda_releaseversion_2021-05-03.csv</strong></p>
<p>This name is similar to the last name, but includes some additional signifiers for the project funder (NRDA) and the fact that this is the final released version.</p>
</div>
<div id="formatting-data-files" class="section level4 hasAnchor" number="3.1.1.2">
<h4><span class="header-section-number">3.1.1.2</span> Formatting data files<a href="mod-03.html#formatting-data-files" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Recently <span class="citation">Broman and Woo (<a href="#ref-broman2018">2018</a>)</span> reviewed common good practices for storing data in spreadsheets. Their article is short and easy to read, and gave a few recommendations for data formatting:</p>
<ul>
<li>Be consistent</li>
<li>Choose good names for things</li>
<li>Write dates as YYYY-MM-DD</li>
<li>No empty cells</li>
<li>Put just one thing in a cell</li>
<li>Make it a rectangle</li>
<li>Create a data dictionary</li>
<li>No calculations in the raw data files</li>
<li>Do not use font color or highlighting as data</li>
<li>Make backups</li>
<li>Use data validation to avoid errors</li>
<li>Save the data in plain text files</li>
</ul>
<p>Most people who work with data, myself included, probably agree with their recommendations. There is room for individual preferences in the exact implementation of each principle, but the general ideas are solid. You will save yourself a lot of headache if you follow their advice. I strongly suggest you read their paper and follow their advice.</p>
<div id="variable-names" class="section level5 hasAnchor" number="3.1.1.2.1">
<h5><span class="header-section-number">3.1.1.2.1</span> Variable names<a href="mod-03.html#variable-names" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Variable names, like data file names, should be brief but informative. There are few restrictions on what variable names can be in R. For simplicity, I recommend you use only <strong>lowercase letters</strong>, <strong>numbers</strong>, <strong>underscores</strong> (<code>_</code>), and <strong>periods</strong> (<code>.</code>) in variable names. Other symbols are either inconvenient to type, or can cause issues being parsed by R. Some common pifalls include:</p>
<p><strong><em>Leading numerals</em></strong> will cause an error if not enclosed in quotation marks:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="mod-03.html#cb249-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb249-2"><a href="mod-03.html#cb249-2" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;3a&quot;</span></span>
<span id="cb249-3"><a href="mod-03.html#cb249-3" tabindex="-1"></a>x<span class="sc">$</span><span class="dv">3</span>a</span>
<span id="cb249-4"><a href="mod-03.html#cb249-4" tabindex="-1"></a>x<span class="sc">$</span><span class="st">&#39;3a&#39;</span></span>
<span id="cb249-5"><a href="mod-03.html#cb249-5" tabindex="-1"></a>x[,<span class="st">&quot;3a&quot;</span>]</span></code></pre></div>
<p><strong><em>Numeral-only names</em></strong> will cause an error. They can also be misinterpreted as column numbers. Don’t give your variables numeral-only names.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="mod-03.html#cb250-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb250-2"><a href="mod-03.html#cb250-2" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;3&quot;</span></span>
<span id="cb250-3"><a href="mod-03.html#cb250-3" tabindex="-1"></a>x<span class="sc">$</span><span class="dv">3</span>     <span class="co"># error</span></span>
<span id="cb250-4"><a href="mod-03.html#cb250-4" tabindex="-1"></a>x<span class="sc">$</span><span class="st">&#39;3&#39;</span>   <span class="co"># works</span></span>
<span id="cb250-5"><a href="mod-03.html#cb250-5" tabindex="-1"></a>x[,<span class="dv">3</span>]   <span class="co"># column number 3</span></span>
<span id="cb250-6"><a href="mod-03.html#cb250-6" tabindex="-1"></a>x[,<span class="st">&quot;3&quot;</span>] <span class="co"># column named &quot;3&quot;</span></span></code></pre></div>
<p><strong><em>Spaces</em></strong> in variable names will cause errors because R interprets a space as whitespace, not part of a name. If you insist on using spaces, enclose the variable name in quotation marks every time you use it. This is one of the few places where R cares about whitespace.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="mod-03.html#cb251-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb251-2"><a href="mod-03.html#cb251-2" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;a b&quot;</span></span>
<span id="cb251-3"><a href="mod-03.html#cb251-3" tabindex="-1"></a><span class="co"># not run (error):</span></span>
<span id="cb251-4"><a href="mod-03.html#cb251-4" tabindex="-1"></a><span class="co"># x$a b</span></span>
<span id="cb251-5"><a href="mod-03.html#cb251-5" tabindex="-1"></a>x<span class="sc">$</span><span class="st">&#39;a b&#39;</span></span></code></pre></div>
<pre><code>## [1] 5.1 4.9 4.7 4.6 5.0</code></pre>
<p><strong><em>Special characters</em></strong> in variable names can cause issues with parsing. Many symbols that you might think to use, such as hyphens (aka: dashes, <code>-</code>) or slashes <code>/</code> are also R operators. Again, try to avoid these issues by using only letters, numbers, underscores, and periods.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="mod-03.html#cb253-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb253-2"><a href="mod-03.html#cb253-2" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;a/b&quot;</span></span>
<span id="cb253-3"><a href="mod-03.html#cb253-3" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb253-4"><a href="mod-03.html#cb253-4" tabindex="-1"></a><span class="co"># not run (error):</span></span>
<span id="cb253-5"><a href="mod-03.html#cb253-5" tabindex="-1"></a><span class="co">#x$a/b</span></span>
<span id="cb253-6"><a href="mod-03.html#cb253-6" tabindex="-1"></a><span class="co"># works:</span></span>
<span id="cb253-7"><a href="mod-03.html#cb253-7" tabindex="-1"></a>x<span class="sc">$</span><span class="st">&#39;a/b&#39;</span></span></code></pre></div>
<pre><code>## [1] 5.1 4.9 4.7 4.6 5.0</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="mod-03.html#cb255-1" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;surv%&quot;</span></span>
<span id="cb255-2"><a href="mod-03.html#cb255-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##   surv% Sepal.Width Petal.Length Petal.Width Species
## 1   5.1         3.5          1.4         0.2  setosa
## 2   4.9         3.0          1.4         0.2  setosa
## 3   4.7         3.2          1.3         0.2  setosa
## 4   4.6         3.1          1.5         0.2  setosa
## 5   5.0         3.6          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="mod-03.html#cb257-1" tabindex="-1"></a><span class="co"># not run (error):</span></span>
<span id="cb257-2"><a href="mod-03.html#cb257-2" tabindex="-1"></a><span class="co">#x$surv%</span></span>
<span id="cb257-3"><a href="mod-03.html#cb257-3" tabindex="-1"></a>x<span class="sc">$</span><span class="st">&#39;surv%&#39;</span></span></code></pre></div>
<pre><code>## [1] 5.1 4.9 4.7 4.6 5.0</code></pre>
<p><strong><em>Uppercase letters</em></strong> in variable names work just fine, but they can be inconvenient. Because R is case sensitive, you need to type the variable exactly the same way each time. This can be tedious if you have several variables with similar names. In my code I prefer to use only lower case letters, so I don’t ever have to remember how names are capitalized.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="mod-03.html#cb259-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb259-2"><a href="mod-03.html#cb259-2" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;sep.len&quot;</span> <span class="co"># convenient</span></span>
<span id="cb259-3"><a href="mod-03.html#cb259-3" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">&quot;SEP.LEN&quot;</span> <span class="co"># slightly inconvenient</span></span>
<span id="cb259-4"><a href="mod-03.html#cb259-4" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Sep.Len&quot;</span> <span class="co"># more inconvenient</span></span>
<span id="cb259-5"><a href="mod-03.html#cb259-5" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="st">&quot;SeP.lEn&quot;</span> <span class="co"># just don&#39;t</span></span>
<span id="cb259-6"><a href="mod-03.html#cb259-6" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##   sep.len SEP.LEN Sep.Len SeP.lEn Species
## 1     5.1     3.5     1.4     0.2  setosa
## 2     4.9     3.0     1.4     0.2  setosa
## 3     4.7     3.2     1.3     0.2  setosa
## 4     4.6     3.1     1.5     0.2  setosa
## 5     5.0     3.6     1.4     0.2  setosa</code></pre>
</div>
<div id="data-values" class="section level5 hasAnchor" number="3.1.1.2.2">
<h5><span class="header-section-number">3.1.1.2.2</span> Data values<a href="mod-03.html#data-values" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>All data in R have a type: numeric, logical, character, etc. Within a vector, matrix, or array, all values must have the same type or they will be converted to character strings. Each variable in a data frame (the most common R data structure) is essentially a vector. This means that in your input file you should try to have one and only one type of data in each column. Otherwise, R will coerce the values into character strings, which may or may not be a problem. Putting only one type of value into each column will also help get your data into “wide” or “tidy” format (<span class="citation">Wickham (<a href="#ref-wickham2014">2014</a>)</span>).</p>
<p>Entering data should also include some measure of <strong>quality assurance and quality control (QA/QC)</strong>. This basically means making sure that your data are entered correctly, and are formatted correctly. Correct entry can be accomplished by direct comparison to original datasheets or lab notebooks. Cross-checking is a valuable tool here: have two people enter the data and compare their files.</p>
<p>Data formatting requires thinking about what kinds of data are being entered. For numbers, this means entering the correct values and an appropriate number of significant digits. For text values, this may mean spell-checking or settling on a standard set of possible values. The figure below shows some problems that a QA/QC step might fix:</p>
<p><img src="03_01.jpg" width="90%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="importing-data-from-text-files-with-read.csv-and-read.table" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Importing data from text files with <code>read.csv()</code> and <code>read.table()</code><a href="mod-03.html#importing-data-from-text-files-with-read.csv-and-read.table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Plain text files are imported, or read, using functions that are named for that purpose. The function <code>read.table()</code> works on many types of text files, including tab-delimited and comma-delimited. The function <code>read.csv()</code> works on comma-delimited files only. The syntax for both is very similar.</p>
<p>Put the files <a href="https://greenquanteco.github.io/elk_data_2021-01-21.txt">elk_data_2021-01-21.txt</a> and <a href="https://greenquanteco.github.io/elk_data_2021-01-21.csv">elk_data_2021-01-21.csv</a> in your R home directory. The R home directory depends on your operating system:</p>
<ul>
<li><em>Windows users:</em> the home directory is your <strong>Documents</strong> folder. The address of this folder is <code>C:/Users/username/Documents</code>, where <code>username</code> is your Windows logon name. You can get to your Documents folder by opening Windows Explorer (Win-E) and double-clicking “Documents”.</li>
<li><em>Mac users:</em> the home directory is your <strong>home</strong> folder. The address of this folder is <code>/Users/username</code> (where <code>username</code> is your username) or <code>~/</code>. You can open your home folder by pressing CMD-SHIFT-H, or by using the Go pulldown menu from the menu bar.</li>
</ul>
<p>Import a tab-delimited file from your home directory:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="mod-03.html#cb261-1" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;elk_data_2021-01-21.txt&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>Import a comma-delimited version from your home directory. Note how similar the syntax is to the first command.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="mod-03.html#cb262-1" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;elk_data_2021-01-21.csv&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb262-2"><a href="mod-03.html#cb262-2" tabindex="-1"></a></span>
<span id="cb262-3"><a href="mod-03.html#cb262-3" tabindex="-1"></a><span class="co"># alternative, using `read.table()` with</span></span>
<span id="cb262-4"><a href="mod-03.html#cb262-4" tabindex="-1"></a><span class="co"># sep argument to specify how values are separated:</span></span>
<span id="cb262-5"><a href="mod-03.html#cb262-5" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;elk_data_2021-01-21.csv&quot;</span>, </span>
<span id="cb262-6"><a href="mod-03.html#cb262-6" tabindex="-1"></a>                  <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<p>The examples above required the name of the data file—-notice the file extensions!—-and an argument <code>header</code> which specifies that the first row of the data file contains column names. Try one of those commands without that argument and see what happens.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="mod-03.html#cb263-1" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;elk_data_2021-01-21.txt&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb263-2"><a href="mod-03.html#cb263-2" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code></pre></div>
<pre><code>##   height antler species
## 1   69.3   24.8 unknown
## 2   69.3   34.5 unknown
## 3   87.7   53.5 unknown
## 4   99.8   58.3 unknown
## 5   69.3   61.2 unknown
## 6   84.1   67.3 unknown</code></pre>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="mod-03.html#cb265-1" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;elk_data_2021-01-21.txt&quot;</span>)</span>
<span id="cb265-2"><a href="mod-03.html#cb265-2" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code></pre></div>
<pre><code>##       V1     V2      V3
## 1 height antler species
## 2   69.3   24.8 unknown
## 3   69.3   34.5 unknown
## 4   87.7   53.5 unknown
## 5   99.8   58.3 unknown
## 6   69.3   61.2 unknown</code></pre>
<p>Without the <code>header</code> argument, the column names were read as the first row of the dataset and the columns of the data frame were given generic names <code>V1</code>, <code>V2</code>, and so on. As a side effect, the values in each of the columns are all of character type instead of numbers. This is because both <code>read.table()</code> and <code>read.csv()</code> import all values as character strings by default, and convert to other types only if possible. In this case, conversion is not possible because the strings <code>height</code>, <code>antler</code>, and <code>species</code> cannot be encoded as numbers, but the numbers form the original file can be encoded as character strings. Further, the values within a single column of a data frame are a vector, and all elements of a vector must have the same type. Thus, importing without the <code>header</code> argument will likely result in a data frame full of text representations of your data.</p>
<p>Both <code>read.table()</code> and <code>read.csv()</code> will bring in data stored as a table, and produce a type of R object called a <strong>data frame</strong>. This data frame must be saved to an object to be used by R. If not saved, the data frame will be printed to the console. Compare the results of the two lines below on your machine.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="mod-03.html#cb267-1" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">&quot;elk data 2021-01-21.txt&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb267-2"><a href="mod-03.html#cb267-2" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;elk data 2021-01-21.txt&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>The first command read the file, and printed it to the console. The second command read the file and stored it in an object named <code>dat</code>. Nothing is returned to the console when this happens.</p>
<div id="important-arguments-to-read.table-and-read.csv" class="section level4 hasAnchor" number="3.1.2.1">
<h4><span class="header-section-number">3.1.2.1</span> Important arguments to <code>read.table()</code> and <code>read.csv()</code><a href="mod-03.html#important-arguments-to-read.table-and-read.csv" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="file" class="section level5 hasAnchor" number="3.1.2.1.1">
<h5><span class="header-section-number">3.1.2.1.1</span> <code>file</code><a href="mod-03.html#file" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The first argument to <code>read.table()</code> and <code>read.csv()</code> is <code>file</code>, which is the filename, including directory path, of the file to be imported. By default, R will look in your home directory for the file. If the file is stored in the home directory, then you can just supply the filename as a character string. Don’t forget the file extension! Most of the examples on this site will, for convenience, use data files stored in your home directory. In your own work you may want to use other folders.</p>
<p>If you want to import a file from another folder, you need to supply the folder name as part of the argument <code>file</code>. My preferred way to do this is by specifying the folder and file name separately, and combining them with the <code>paste()</code> command. The function <code>paste()</code> concatenates, or sticks together, character strings. Separating the folder from the file name also makes your code more portable. For example, if you needed to run your code on another machine you would only need to update the directory. An example of how this might work is shown below:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="mod-03.html#cb268-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb268-2"><a href="mod-03.html#cb268-2" tabindex="-1"></a></span>
<span id="cb268-3"><a href="mod-03.html#cb268-3" tabindex="-1"></a><span class="co"># directory that contains all data and folders</span></span>
<span id="cb268-4"><a href="mod-03.html#cb268-4" tabindex="-1"></a>top.dir <span class="ot">&lt;-</span> <span class="st">&quot;C:/_data&quot;</span></span>
<span id="cb268-5"><a href="mod-03.html#cb268-5" tabindex="-1"></a></span>
<span id="cb268-6"><a href="mod-03.html#cb268-6" tabindex="-1"></a><span class="co"># project folder</span></span>
<span id="cb268-7"><a href="mod-03.html#cb268-7" tabindex="-1"></a>proj.dir <span class="ot">&lt;-</span> <span class="fu">paste</span>(top.dir, <span class="st">&quot;ne stream/dat&quot;</span>, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb268-8"><a href="mod-03.html#cb268-8" tabindex="-1"></a></span>
<span id="cb268-9"><a href="mod-03.html#cb268-9" tabindex="-1"></a><span class="co"># folder that holds dataset</span></span>
<span id="cb268-10"><a href="mod-03.html#cb268-10" tabindex="-1"></a>data.dir <span class="ot">&lt;-</span> proj.dir</span>
<span id="cb268-11"><a href="mod-03.html#cb268-11" tabindex="-1"></a></span>
<span id="cb268-12"><a href="mod-03.html#cb268-12" tabindex="-1"></a><span class="co"># name of dataset</span></span>
<span id="cb268-13"><a href="mod-03.html#cb268-13" tabindex="-1"></a>data.name <span class="ot">&lt;-</span> <span class="st">&quot;dat_combine_2020-07-13.csv&quot;</span></span>
<span id="cb268-14"><a href="mod-03.html#cb268-14" tabindex="-1"></a></span>
<span id="cb268-15"><a href="mod-03.html#cb268-15" tabindex="-1"></a><span class="co"># import dataset</span></span>
<span id="cb268-16"><a href="mod-03.html#cb268-16" tabindex="-1"></a>in.name <span class="ot">&lt;-</span> <span class="fu">paste</span>(data.dir, data.name, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb268-17"><a href="mod-03.html#cb268-17" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(in.name, <span class="at">header=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>In the example above, moving to a new machine would only necessitate changing one line, the definition of <code>data.dir</code> (or <code>top.dir</code>, if you keep the same folder structure on multiple machines).</p>
</div>
<div id="header" class="section level5 hasAnchor" number="3.1.2.1.2">
<h5><span class="header-section-number">3.1.2.1.2</span> <code>header</code><a href="mod-03.html#header" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We’ve already seen the importance of <code>header</code>. You’ll use <code>header=TRUE</code> in almost every import command you ever run. Occasionally you’ll run into datasets that do not come with a header row. Of course, you won’t store your data that way because it complicates data management.</p>
</div>
<div id="sep" class="section level5 hasAnchor" number="3.1.2.1.3">
<h5><span class="header-section-number">3.1.2.1.3</span> <code>sep</code><a href="mod-03.html#sep" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>As seen in one of the examples above, the <code>sep</code> argument specifies what character <strong>sep</strong>arates values on each line of the data file. This argument has some useful default values. If you are using <code>read.table()</code> with a tab-delimited file, or <code>read.csv()</code> with a comma-delimited file, you don’t need to set <code>sep</code>.</p>
<p>The default in <code>read.table()</code> reads any white space as a delimiter. This is fine if you have a tab-delimited file, but if the file contains a mix of spaces and tabs you might have some problems. For example, if entries are separated by tabs, but some values contain spaces. In those cases, specify the appropriate delimiter:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="mod-03.html#cb269-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb269-2"><a href="mod-03.html#cb269-2" tabindex="-1"></a>in.name <span class="ot">&lt;-</span> <span class="st">&quot;elk_data_2021-01-21.txt&quot;</span></span>
<span id="cb269-3"><a href="mod-03.html#cb269-3" tabindex="-1"></a></span>
<span id="cb269-4"><a href="mod-03.html#cb269-4" tabindex="-1"></a><span class="co"># tab-delimited (sep=&quot;\t&quot;):</span></span>
<span id="cb269-5"><a href="mod-03.html#cb269-5" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(in.name, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)</span>
<span id="cb269-6"><a href="mod-03.html#cb269-6" tabindex="-1"></a></span>
<span id="cb269-7"><a href="mod-03.html#cb269-7" tabindex="-1"></a><span class="co"># space-delimited (sep=&quot; &quot;): </span></span>
<span id="cb269-8"><a href="mod-03.html#cb269-8" tabindex="-1"></a><span class="co">#dat &lt;- read.table(in.name, header=TRUE, sep=&quot; &quot;)</span></span></code></pre></div>
<p>The <code>sep</code> argument is usually necessary when using the “clipboard trick” (see below).</p>
</div>
<div id="row.names" class="section level5 hasAnchor" number="3.1.2.1.4">
<h5><span class="header-section-number">3.1.2.1.4</span> <code>row.names</code><a href="mod-03.html#row.names" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>When R imports a table of data, it will assign names to the rows. The default names are just the row numbers. Some data files will have their own row names. If you want to not import these names, you can set <code>row.names</code> argument to <code>FALSE</code> to get the default numbers. You can also specify names as a character vector.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="mod-03.html#cb270-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb270-2"><a href="mod-03.html#cb270-2" tabindex="-1"></a>use.rownames <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;row&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span>
<span id="cb270-3"><a href="mod-03.html#cb270-3" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(in.name, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">row.names=</span>use.rownames)</span>
<span id="cb270-4"><a href="mod-03.html#cb270-4" tabindex="-1"></a>dat</span></code></pre></div>
</div>
<div id="col.names" class="section level5 hasAnchor" number="3.1.2.1.5">
<h5><span class="header-section-number">3.1.2.1.5</span> <code>col.names</code><a href="mod-03.html#col.names" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The argument <code>col.names</code> works in a similar manner to <code>row.names</code>, but for column names. If column names are not provided with argument header, R will assign the columns <code>V</code> followed by a column number (<code>V1</code>, <code>V2</code>, etc.). If you want to provide your own names, use <code>col.names</code>. Personally, I’ve never used this argument and instead prefer to either include column names in my data files or just assign names after importing.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="mod-03.html#cb271-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb271-2"><a href="mod-03.html#cb271-2" tabindex="-1"></a>use.colnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ht&quot;</span>, <span class="st">&quot;an&quot;</span>, <span class="st">&quot;sp&quot;</span>)</span>
<span id="cb271-3"><a href="mod-03.html#cb271-3" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(in.name, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">col.names=</span>use.colnames)</span>
<span id="cb271-4"><a href="mod-03.html#cb271-4" tabindex="-1"></a>dat</span></code></pre></div>
</div>
<div id="skip" class="section level5 hasAnchor" number="3.1.2.1.6">
<h5><span class="header-section-number">3.1.2.1.6</span> <code>skip</code><a href="mod-03.html#skip" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Some data files will contain rows of text or other information before the tabular data starts. The argument <code>skip</code> allows you to skip these lines. Without <code>skip</code>, R will try to read those rows of text as if they were data and fail to import. Use the file <a href="https://greenquanteco.github.io/elk_data_2021-07-14.txt">elk_data_2021-07-14.txt</a>, which has some extra rows of text that would otherwise cause <code>read.table()</code> to fail.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="mod-03.html#cb272-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb272-2"><a href="mod-03.html#cb272-2" tabindex="-1"></a><span class="co"># alternate file with some header rows</span></span>
<span id="cb272-3"><a href="mod-03.html#cb272-3" tabindex="-1"></a>in.name <span class="ot">&lt;-</span> <span class="st">&quot;elk_data_2021-07-14.txt&quot;</span></span>
<span id="cb272-4"><a href="mod-03.html#cb272-4" tabindex="-1"></a><span class="co"># fails:</span></span>
<span id="cb272-5"><a href="mod-03.html#cb272-5" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(in.name, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb272-6"><a href="mod-03.html#cb272-6" tabindex="-1"></a><span class="co"># works:</span></span>
<span id="cb272-7"><a href="mod-03.html#cb272-7" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(in.name, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">skip=</span><span class="dv">2</span>)</span>
<span id="cb272-8"><a href="mod-03.html#cb272-8" tabindex="-1"></a>dat</span></code></pre></div>
<p>The error message when you tried to import the file without <code>skip=2</code> comes up a lot when trying to import data into R. What is happening is that R uses the number of elements in the first row to calculate the dimensions of the data frame that it makes upon import. In this case, it interpreted the 7 words in the first row of text, <code>Here is some text about the dataset</code>, as 7 column headings <code>Here</code>, <code>is</code>, <code>some</code>, <code>text</code>, <code>about</code>, <code>the</code>, and <code>dataset</code>. Then, when next line <code>that came from Gould (1974).</code> only had 5 elements (<code>that</code>, <code>came</code>, <code>from</code>, <code>Gould</code>, and <code>(1974)</code>), this caused an error.</p>
<p>Why does this issue vex so many new R users (and experienced R users)? Often we will have incomplete records in a data set, where a row is missing values in one or more columns. Sometimes blank values are not read correctly. Consider the file <a href="https://greenquanteco.github.io/elk_data_blanks_2021-07-14.txt">elk_data_blanks_2021-07-14.txt</a>, which has a blank in line 13.</p>
<p>When we try to import that file, we get a similar error:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="mod-03.html#cb273-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb273-2"><a href="mod-03.html#cb273-2" tabindex="-1"></a>in.name <span class="ot">&lt;-</span> <span class="st">&quot;elk_data_blanks_2021-07-14.txt&quot;</span></span>
<span id="cb273-3"><a href="mod-03.html#cb273-3" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(in.name, <span class="at">header=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>There are a few ways to deal with this error. The first is to go back to the original datafile and put R’s blank value, <code>NA</code>, in the blanks. You could also put in a value that is not likely to occur, such as -9999 in variables that must be positive. This would make your file more readable, but without locking you in to using R. Either solution will ensure that missing values are not interpreted as extra white space. This method can be very time consuming for very large datasets, even in Excel (or especially in Excel). The best time to fix this issue is at data entry. Recall that having no empty cells is one of the recommendations of <span class="citation">Broman and Woo (<a href="#ref-broman2018">2018</a>)</span>.</p>
<p>Another way is to save the file as a comma-delimited file, because commas are less ambiguous than white space for defining missing values. This method usually works, but might still create problems if there are multiple blank values per record or blanks at the ends of rows. The third option is to use the <code>fill</code> argument in the R import functions (see below).</p>
</div>
<div id="fill" class="section level5 hasAnchor" number="3.1.2.1.7">
<h5><span class="header-section-number">3.1.2.1.7</span> <code>fill</code><a href="mod-03.html#fill" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>As described above, missing values can cause problems when importing data into R. One way to deal with missing values that occur at the end of a line in the data file is to use the <code>fill</code> argument. Setting <code>fill=TRUE</code> will automatically pad the data frame with blanks so that every row has the same number of values.</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="mod-03.html#cb274-1" tabindex="-1"></a>in.name <span class="ot">&lt;-</span> <span class="st">&quot;elk_data_blanks_2021-07-14.txt&quot;</span></span>
<span id="cb274-2"><a href="mod-03.html#cb274-2" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(in.name, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">fill=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>As convenient as <code>fill=TRUE</code> can be, you need to be careful when using it. R may add the wrong number of values, or values of the wrong type. In the example above, the value of species in row 13 is a blank character string (<code>""</code>), not a missing value <code>NA</code>. This is an important difference because <code>""</code> and <code>NA</code> are treated very differently by many R functions. The commands below show that R interprets the padded entry <code>""</code> as a character string of length 0, not a missing value.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="mod-03.html#cb275-1" tabindex="-1"></a><span class="fu">table</span>(dat<span class="sc">$</span>species)</span></code></pre></div>
<pre><code>## 
##                   alces megaloceros     unknown 
##           1           2           1          16</code></pre>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="mod-03.html#cb277-1" tabindex="-1"></a><span class="fu">aggregate</span>(dat<span class="sc">$</span>antler, <span class="at">by=</span><span class="fu">list</span>(dat<span class="sc">$</span>species), mean)</span></code></pre></div>
<pre><code>##       Group.1        x
## 1             107.8000
## 2       alces 164.4500
## 3 megaloceros 239.1000
## 4     unknown  85.1375</code></pre>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="mod-03.html#cb279-1" tabindex="-1"></a><span class="fu">is.na</span>(dat<span class="sc">$</span>species)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div id="stringsasfactors" class="section level5 hasAnchor" number="3.1.2.1.8">
<h5><span class="header-section-number">3.1.2.1.8</span> <code>stringsAsFactors</code><a href="mod-03.html#stringsasfactors" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>A <strong>factor</strong> is a variable in a dataset that defines group membership: control vs. treated, red vs. blue, gene 1 vs. gene 2 vs. gene 3, and so on. The different groups to which an observation can belong are called the <strong>levels</strong> of the factor. This is very useful for statistical modeling, but can be a pain in the neck when trying to work with data in R. Functions <code>read.table()</code> and <code>read.csv()</code> have an argument to automatically convert character strings to factors for convenience: <code>stringsAsFactors</code>. This is a logical switch that will interpret character strings as levels of a factor (<code>stringsAsFactors=TRUE</code>) or as character strings (<code>stringsAsFactors=FALSE</code>). The default was <code>TRUE</code> until around <a href="https://blog.r-project.org/2020/02/16/stringsasfactors/">version 4.0 or so</a>, but now the default is the much more convenient <code>FALSE</code>.</p>
<p>The reason that factors can cause headaches in R is because although they look like character strings, they are really numeric codes and the text you see is just a label. If you try to use a factor as if it was a character string, you can get strange errors. My advice is to always import data with <code>stringsAsFactors=FALSE</code> and only convert to factor later if needed. Most statistical functions will convert to factor for you automatically anyway. The only time when you may want to store data as a factor is when you a very large dataset with many levels of a factor; in those situations, factors will use memory more efficiently.</p>
<p>If you get tired of typing <code>stringsAsFactors=TRUE</code> in your import commands, you can set an option at the beginning of your script that will change the default behavior of <code>read.table()</code> and <code>read.csv()</code>:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="mod-03.html#cb281-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p>Back when this option was <code>TRUE</code> by default I put this command at the start of every new R script to avoid problems with text strings being misinterpreted as factors.</p>
</div>
</div>
</div>
<div id="importing-data-from-saved-workspaces" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Importing data from saved workspaces<a href="mod-03.html#importing-data-from-saved-workspaces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="importing-r-objects-with-readrds" class="section level4 hasAnchor" number="3.1.3.1">
<h4><span class="header-section-number">3.1.3.1</span> Importing R objects with <code>readRDS()</code><a href="mod-03.html#importing-r-objects-with-readrds" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Some R objects are not easily represented by tables. For example, the outputs of statistical methods are usually <strong>lists</strong>. Such objects can be saved using function <code>saveRDS()</code> and read into R using <code>readRDS()</code>. The example below will save an R data object to file <code>rds_test.rds</code> in your R working directory.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="mod-03.html#cb282-1" tabindex="-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Petal.Width<span class="sc">~</span>Sepal.Width, <span class="at">data=</span>iris)</span>
<span id="cb282-2"><a href="mod-03.html#cb282-2" tabindex="-1"></a>mod1</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Petal.Width ~ Sepal.Width, data = iris)
## 
## Coefficients:
## (Intercept)  Sepal.Width  
##      3.1569      -0.6403</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="mod-03.html#cb284-1" tabindex="-1"></a><span class="fu">saveRDS</span>(mod1, <span class="st">&quot;rds_test.rds&quot;</span>)</span>
<span id="cb284-2"><a href="mod-03.html#cb284-2" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;rds_test.rds&quot;</span>)</span>
<span id="cb284-3"><a href="mod-03.html#cb284-3" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Petal.Width ~ Sepal.Width, data = iris)
## 
## Coefficients:
## (Intercept)  Sepal.Width  
##      3.1569      -0.6403</code></pre>
<p>There is a lazier way to accomplish this task using function <code>dput()</code>. This function saves a plain text representation of an object that can later be used to recreate the object (i.e., R code that can reproduce the object). The help file for <code>dput()</code> cautions that this is not a good method for transferring objects between R sessions and recommends using <code>saveRDS()</code> instead. That being said, I’ve used this method for years and have never had a problem. The procedure is to copy the output of <code>dput()</code> into your R script, and later assign that text to another object. Use <code>dput()</code> at your own risk.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="mod-03.html#cb286-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,]</span>
<span id="cb286-2"><a href="mod-03.html#cb286-2" tabindex="-1"></a><span class="fu">dput</span>(a)</span></code></pre></div>
<pre><code>## structure(list(Sepal.Length = c(5.1, 4.9, 4.7, 4.6, 5, 5.4), 
##     Sepal.Width = c(3.5, 3, 3.2, 3.1, 3.6, 3.9), Petal.Length = c(1.4, 
##     1.4, 1.3, 1.5, 1.4, 1.7), Petal.Width = c(0.2, 0.2, 0.2, 
##     0.2, 0.2, 0.4), Species = structure(c(1L, 1L, 1L, 1L, 1L, 
##     1L), levels = c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;), class = &quot;factor&quot;)), row.names = c(NA, 
## 6L), class = &quot;data.frame&quot;)</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="mod-03.html#cb288-1" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">dput</span>(a)</span></code></pre></div>
<pre><code>## structure(list(Sepal.Length = c(5.1, 4.9, 4.7, 4.6, 5, 5.4), 
##     Sepal.Width = c(3.5, 3, 3.2, 3.1, 3.6, 3.9), Petal.Length = c(1.4, 
##     1.4, 1.3, 1.5, 1.4, 1.7), Petal.Width = c(0.2, 0.2, 0.2, 
##     0.2, 0.2, 0.4), Species = structure(c(1L, 1L, 1L, 1L, 1L, 
##     1L), levels = c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;), class = &quot;factor&quot;)), row.names = c(NA, 
## 6L), class = &quot;data.frame&quot;)</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="mod-03.html#cb290-1" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
<div id="importing-r-workspaces-with-load" class="section level4 hasAnchor" number="3.1.3.2">
<h4><span class="header-section-number">3.1.3.2</span> Importing R workspaces with <code>load()</code><a href="mod-03.html#importing-r-workspaces-with-load" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Everything you do in R takes place within the <strong>workspace</strong>. This can be thought of as a sandbox where all of your data and functions reside. If you want to save this entire environment and continue working later you can do this by saving the workspace (see below). Workspaces can be loaded using function <code>load()</code>. The example below loads workspace <code>example.RData</code> from your home directory. Notice that this command will load every object from the saved workspace into your current workspace. This might cause problems if the saved workspace and current workspace have objects with the same names.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="mod-03.html#cb292-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb292-2"><a href="mod-03.html#cb292-2" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;example.RData&quot;</span>)</span></code></pre></div>
<p>When loading a workspace, it is sometimes more useful to import it into a new environment. This will let you import objects from that workspace without putting its objects into your current workspace. I use this method a lot for working with model outputs. The typical workflow is:</p>
<ol style="list-style-type: decimal">
<li>Run an analysis or set of simulations in multiple R instances and save the results of each in its own R workspace.</li>
<li>After simulations are complete, import the results of each simulation from its individual workspace into a new environment.</li>
<li>Copy the objects from the environment containing the loaded workspace to the main workspace.</li>
<li>Delete the environment containing the loaded workspace.</li>
<li>Repeat until all results are imported.</li>
</ol>
<p>Here is an example of importing individual objects from a workspace into a new environment, then copying that object into the current workspace:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="mod-03.html#cb293-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb293-2"><a href="mod-03.html#cb293-2" tabindex="-1"></a><span class="fu">rm</span>(a) <span class="co"># will return error if a does not already exist</span></span>
<span id="cb293-3"><a href="mod-03.html#cb293-3" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb293-4"><a href="mod-03.html#cb293-4" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;example.RData&quot;</span>, <span class="at">env=</span>temp)</span>
<span id="cb293-5"><a href="mod-03.html#cb293-5" tabindex="-1"></a>a <span class="ot">&lt;-</span> temp<span class="sc">$</span>a</span>
<span id="cb293-6"><a href="mod-03.html#cb293-6" tabindex="-1"></a><span class="fu">rm</span>(temp)</span>
<span id="cb293-7"><a href="mod-03.html#cb293-7" tabindex="-1"></a>a</span></code></pre></div>
</div>
</div>
<div id="importing-data-special-cases" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Importing data: special cases:<a href="mod-03.html#importing-data-special-cases" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="getting-data-from-the-clipboard" class="section level4 hasAnchor" number="3.1.4.1">
<h4><span class="header-section-number">3.1.4.1</span> Getting data from the clipboard<a href="mod-03.html#getting-data-from-the-clipboard" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes it can be convenient to copy and paste data directly from a spreadsheet into R. This is fine for quick or one-off data imports, but not recommended for routine use because it is tedious to reproduce and error-prone. The procedure is as follows:</p>
<ol style="list-style-type: decimal">
<li>In the R console, type this command but do NOT run it: <code>a &lt;- read.table("clipboard", header=TRUE, sep="\t")</code></li>
<li>In Excel, highlight your data and copy it to the clipboard using Ctrl-C.</li>
<li>Click in the R console to move your focus there. In R, hit the ENTER key.</li>
</ol>
<p>The command you typed in step 1 will read the table from the clipboard. Note that if you try to copy/paste the <code>read.table("clipboard",...)</code> command into the R console, you will then have that command in your clipboard and not your data.</p>
</div>
<div id="entering-data-using-scan" class="section level4 hasAnchor" number="3.1.4.2">
<h4><span class="header-section-number">3.1.4.2</span> Entering data using <code>scan()</code><a href="mod-03.html#entering-data-using-scan" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>scan()</code> function lets you enter values one-by-one, separated by pressing ENTER. You can use this just like typing values into Excel. Or, you can copy and paste a single column of values from Excel. The latter case works because R interprets the values within a column as being separated by a line return (i.e., pressing ENTER).</p>
<p>Type the name of an object to which data will be saved, the assignment operator <code>&lt;-</code>, <code>scan()</code>, then ENTER, then values (each followed by ENTER), then hit ENTER twice after the last value. This is obviously inefficient for large datasets, but it’s a nice trick to be aware of.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="mod-03.html#cb294-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">scan</span>()</span>
<span id="cb294-2"><a href="mod-03.html#cb294-2" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb294-3"><a href="mod-03.html#cb294-3" tabindex="-1"></a><span class="dv">2</span></span>
<span id="cb294-4"><a href="mod-03.html#cb294-4" tabindex="-1"></a><span class="dv">3</span></span>
<span id="cb294-5"><a href="mod-03.html#cb294-5" tabindex="-1"></a><span class="dv">4</span></span>
<span id="cb294-6"><a href="mod-03.html#cb294-6" tabindex="-1"></a><span class="dv">5</span></span>
<span id="cb294-7"><a href="mod-03.html#cb294-7" tabindex="-1"></a></span>
<span id="cb294-8"><a href="mod-03.html#cb294-8" tabindex="-1"></a>a</span></code></pre></div>
<p>To enter values from a column in Excel, highlight and copy the column. Then go to R, enter the command below, and press ENTER. Then paste your values and press ENTER again.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="mod-03.html#cb295-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb295-2"><a href="mod-03.html#cb295-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">scan</span>()</span>
<span id="cb295-3"><a href="mod-03.html#cb295-3" tabindex="-1"></a><span class="co"># paste in values</span></span>
<span id="cb295-4"><a href="mod-03.html#cb295-4" tabindex="-1"></a><span class="co"># press ENTER again</span></span>
<span id="cb295-5"><a href="mod-03.html#cb295-5" tabindex="-1"></a>a</span></code></pre></div>
</div>
<div id="mod-03-c" class="section level4 hasAnchor" number="3.1.4.3">
<h4><span class="header-section-number">3.1.4.3</span> Entering data directly using <code>c()</code><a href="mod-03.html#mod-03-c" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Function <code>c()</code> combines its arguments as a vector. As with all functions, arguments must be separated by commas. Arguments can be on the same line or on different lines.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="mod-03.html#cb296-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">9</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 9 8 7 6 5</code></pre>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="mod-03.html#cb298-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,</span>
<span id="cb298-2"><a href="mod-03.html#cb298-2" tabindex="-1"></a>      <span class="dv">3</span>,</span>
<span id="cb298-3"><a href="mod-03.html#cb298-3" tabindex="-1"></a>       <span class="dv">5</span></span>
<span id="cb298-4"><a href="mod-03.html#cb298-4" tabindex="-1"></a>       )</span>
<span id="cb298-5"><a href="mod-03.html#cb298-5" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<p>Like <code>scan()</code>, data can be entered directly into the console using <code>c()</code>. Also like <code>scan()</code>, this is comically inefficient but can be useful for small numbers of values.</p>
</div>
</div>
<div id="export-data-from-r" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> Export data from R<a href="mod-03.html#export-data-from-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="writing-out-tables-best-method" class="section level4 hasAnchor" number="3.1.5.1">
<h4><span class="header-section-number">3.1.5.1</span> Writing out tables (best method)<a href="mod-03.html#writing-out-tables-best-method" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Everything you do in R takes place within the “workspace”. You can save entire workspaces, but in most situations it is more useful to write out data or results as delimited text files. “Delimited” means that individual data within the file are separated, or delimited, by a particular symbol. The most common formats are <strong>comma-delimited files (.csv)</strong> or <strong>tab-delimited files (.txt)</strong>. Which format to use is largely a matter of personal preference. I’ve found that comma-delimited files are slightly less likely to have issues because they use a character (<code>,</code>) rather than whitespace to separate values.</p>
<p>Tab-delimited files are written out using <code>write.table()</code>. In the example below, the first argument <code>dat</code> is the object from the R workspace that you want to write out. The argument <code>sep</code> works the same way as in <code>read.table()</code>. The example below will save a file called <code>mydata.txt</code> in your home directory (R’s working directory). Option <code>sep="\t"</code> can be provided to ensure that the file is written as a tab-delimited file and not a space-delimited file.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="mod-03.html#cb300-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb300-2"><a href="mod-03.html#cb300-2" tabindex="-1"></a>dat <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,]</span>
<span id="cb300-3"><a href="mod-03.html#cb300-3" tabindex="-1"></a><span class="fu">write.table</span>(dat,<span class="st">&quot;mydata.txt&quot;</span>, <span class="at">sep=</span><span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>Comma-delimited files are written out by <code>write.csv()</code>. The syntax is similar to <code>write.table()</code>. Note that the file extension must be “.csv” instead of “.txt”. If you save a file with the wrong extension, then it may be corrupt or unusable (or, R might return an error).</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="mod-03.html#cb301-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb301-2"><a href="mod-03.html#cb301-2" tabindex="-1"></a><span class="fu">write.csv</span>(dat,<span class="st">&quot;mydata.csv&quot;</span>)</span></code></pre></div>
<p>Most of the time you will not be saving files to your home directory, but to another folder. The folder and the file name must both be specified to save somewhere else. It is usually a good idea to define the file name and file destination separately. This way if you re-use your code on another machine, or a different folder, you only need to update the folder address once.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="mod-03.html#cb302-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb302-2"><a href="mod-03.html#cb302-2" tabindex="-1"></a></span>
<span id="cb302-3"><a href="mod-03.html#cb302-3" tabindex="-1"></a><span class="co"># do this:</span></span>
<span id="cb302-4"><a href="mod-03.html#cb302-4" tabindex="-1"></a>out.dir <span class="ot">&lt;-</span> <span class="st">&quot;C:/_data&quot;</span></span>
<span id="cb302-5"><a href="mod-03.html#cb302-5" tabindex="-1"></a>out.name <span class="ot">&lt;-</span> <span class="st">&quot;mydata.csv&quot;</span></span>
<span id="cb302-6"><a href="mod-03.html#cb302-6" tabindex="-1"></a><span class="fu">write.csv</span>(dat, <span class="fu">paste</span>(out.dir, out.name, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb302-7"><a href="mod-03.html#cb302-7" tabindex="-1"></a></span>
<span id="cb302-8"><a href="mod-03.html#cb302-8" tabindex="-1"></a><span class="co"># or this:</span></span>
<span id="cb302-9"><a href="mod-03.html#cb302-9" tabindex="-1"></a>out.dir <span class="ot">&lt;-</span> <span class="st">&quot;C:/_data&quot;</span></span>
<span id="cb302-10"><a href="mod-03.html#cb302-10" tabindex="-1"></a>out.name <span class="ot">&lt;-</span> <span class="st">&quot;mydata.csv&quot;</span></span>
<span id="cb302-11"><a href="mod-03.html#cb302-11" tabindex="-1"></a>out.file <span class="ot">&lt;-</span> <span class="fu">paste</span>(out.dir, out.name, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb302-12"><a href="mod-03.html#cb302-12" tabindex="-1"></a><span class="fu">write.csv</span>(dat, out.file)</span>
<span id="cb302-13"><a href="mod-03.html#cb302-13" tabindex="-1"></a></span>
<span id="cb302-14"><a href="mod-03.html#cb302-14" tabindex="-1"></a><span class="co"># not this:</span></span>
<span id="cb302-15"><a href="mod-03.html#cb302-15" tabindex="-1"></a><span class="fu">write.csv</span>(dat, <span class="st">&quot;C:/_data/mydata.csv&quot;</span>)</span></code></pre></div>
<p>The latter example is problematic because the output file name contains both the destination folder and the filename itself. If you try to run your code on another machine, it will take longer to update the code with a new folder address. This method is also problematic because exporting multiple files will require typing the folder address multiple times. Consider this example:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="mod-03.html#cb303-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb303-2"><a href="mod-03.html#cb303-2" tabindex="-1"></a></span>
<span id="cb303-3"><a href="mod-03.html#cb303-3" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,]</span>
<span id="cb303-4"><a href="mod-03.html#cb303-4" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> iris[<span class="dv">7</span><span class="sc">:</span><span class="dv">12</span>,]</span>
<span id="cb303-5"><a href="mod-03.html#cb303-5" tabindex="-1"></a></span>
<span id="cb303-6"><a href="mod-03.html#cb303-6" tabindex="-1"></a><span class="fu">write.csv</span>(dat1, <span class="st">&quot;C:/_data/mydata1.csv&quot;</span>)</span>
<span id="cb303-7"><a href="mod-03.html#cb303-7" tabindex="-1"></a><span class="fu">write.csv</span>(dat2, <span class="st">&quot;C:/_data/mydata2.csv&quot;</span>)</span></code></pre></div>
<p>Running that code on a new machine, or modifying it for a new project in a different folder, requires changing the folder address twice. The better way is to define the folder name only once:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="mod-03.html#cb304-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb304-2"><a href="mod-03.html#cb304-2" tabindex="-1"></a></span>
<span id="cb304-3"><a href="mod-03.html#cb304-3" tabindex="-1"></a>out.dir <span class="ot">&lt;-</span> <span class="st">&quot;C:/_data&quot;</span></span>
<span id="cb304-4"><a href="mod-03.html#cb304-4" tabindex="-1"></a><span class="fu">write.csv</span>(dat1, <span class="fu">paste</span>(out.dir, <span class="st">&quot;mydata1.csv&quot;</span>, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb304-5"><a href="mod-03.html#cb304-5" tabindex="-1"></a><span class="fu">write.csv</span>(dat2, <span class="fu">paste</span>(out.dir, <span class="st">&quot;mydata2.csv&quot;</span>, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>))</span></code></pre></div>
<p>See the difference? The revised code is much more portable and reusable. This illustrates a good practice for programming in general (not just R) called “Single Point of Definition”. Defining variables or objects once and only once makes your code more robust to changes and easier to maintain or reuse. The example below shows a more compact way to export the files <code>mydata1.csv</code> and <code>mydata2.csv</code>, with even fewer points of definition for file names:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="mod-03.html#cb305-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb305-2"><a href="mod-03.html#cb305-2" tabindex="-1"></a></span>
<span id="cb305-3"><a href="mod-03.html#cb305-3" tabindex="-1"></a>out.dir <span class="ot">&lt;-</span> <span class="st">&quot;C:/_data&quot;</span></span>
<span id="cb305-4"><a href="mod-03.html#cb305-4" tabindex="-1"></a>out.names <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;mydata&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb305-5"><a href="mod-03.html#cb305-5" tabindex="-1"></a>out.files <span class="ot">&lt;-</span> <span class="fu">paste</span>(out.dir, out.names, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb305-6"><a href="mod-03.html#cb305-6" tabindex="-1"></a><span class="fu">write.csv</span>(dat1, out.files[<span class="dv">1</span>])</span>
<span id="cb305-7"><a href="mod-03.html#cb305-7" tabindex="-1"></a><span class="fu">write.csv</span>(dat2, out.files[<span class="dv">2</span>])</span></code></pre></div>
<p>One handy trick is to auto-generate an output filename that includes the current date. This can really help keep multiple versions of analyses or model runs organized. The <code>paste0()</code> command pastes its arguments together as they are, with no separator between them (equivalent to <code>paste(...,sep=""))</code>. Function <code>Sys.Date()</code> prints the current date (according to your machine) in YYYY-MM-DD format.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="mod-03.html#cb306-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb306-2"><a href="mod-03.html#cb306-2" tabindex="-1"></a></span>
<span id="cb306-3"><a href="mod-03.html#cb306-3" tabindex="-1"></a>out.dir <span class="ot">&lt;-</span> <span class="st">&quot;C:/_data&quot;</span></span>
<span id="cb306-4"><a href="mod-03.html#cb306-4" tabindex="-1"></a>out.name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;mydata&quot;</span>, <span class="st">&quot;_&quot;</span>, <span class="fu">Sys.Date</span>(), <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb306-5"><a href="mod-03.html#cb306-5" tabindex="-1"></a><span class="fu">write.csv</span>(dat, <span class="fu">paste</span>(out.dir, out.name, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>))</span></code></pre></div>
</div>
<div id="writing-out-individul-r-objects" class="section level4 hasAnchor" number="3.1.5.2">
<h4><span class="header-section-number">3.1.5.2</span> Writing out individul R objects<a href="mod-03.html#writing-out-individul-r-objects" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Some data do not fit easily into tables. Individual R objects can be saved to an “.rds” file using the function <code>saveRDS()</code>. This function saves a single object that can later be loaded into another R session with function <code>readRDS()</code>.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="mod-03.html#cb307-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb307-2"><a href="mod-03.html#cb307-2" tabindex="-1"></a></span>
<span id="cb307-3"><a href="mod-03.html#cb307-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">t.test</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))</span>
<span id="cb307-4"><a href="mod-03.html#cb307-4" tabindex="-1"></a></span>
<span id="cb307-5"><a href="mod-03.html#cb307-5" tabindex="-1"></a><span class="co"># save to working directory:</span></span>
<span id="cb307-6"><a href="mod-03.html#cb307-6" tabindex="-1"></a><span class="fu">saveRDS</span>(x, <span class="st">&quot;zebra.rds&quot;</span>)</span>
<span id="cb307-7"><a href="mod-03.html#cb307-7" tabindex="-1"></a></span>
<span id="cb307-8"><a href="mod-03.html#cb307-8" tabindex="-1"></a><span class="co"># load the file:</span></span>
<span id="cb307-9"><a href="mod-03.html#cb307-9" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;zebra.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="saving-entire-r-workspaces" class="section level4 hasAnchor" number="3.1.5.3">
<h4><span class="header-section-number">3.1.5.3</span> Saving entire R workspaces<a href="mod-03.html#saving-entire-r-workspaces" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Entire R workspaces or parts of workspaces can be saved using the function <code>save.image()</code>. The command by itself will save the entire current workspace with a generic name to the working directory. It is more useful to save the workspace under a particular name and/or only save specific objects.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="mod-03.html#cb308-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb308-2"><a href="mod-03.html#cb308-2" tabindex="-1"></a></span>
<span id="cb308-3"><a href="mod-03.html#cb308-3" tabindex="-1"></a><span class="co"># save entire workspace with generic name (avoid):</span></span>
<span id="cb308-4"><a href="mod-03.html#cb308-4" tabindex="-1"></a><span class="fu">save.image</span>()</span>
<span id="cb308-5"><a href="mod-03.html#cb308-5" tabindex="-1"></a></span>
<span id="cb308-6"><a href="mod-03.html#cb308-6" tabindex="-1"></a><span class="co"># save entire workspace with specific name (better):</span></span>
<span id="cb308-7"><a href="mod-03.html#cb308-7" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file=</span><span class="st">&quot;test1.RData&quot;</span>)</span>
<span id="cb308-8"><a href="mod-03.html#cb308-8" tabindex="-1"></a></span>
<span id="cb308-9"><a href="mod-03.html#cb308-9" tabindex="-1"></a><span class="co"># save specific objects (best):</span></span>
<span id="cb308-10"><a href="mod-03.html#cb308-10" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb308-11"><a href="mod-03.html#cb308-11" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">t.test</span>(x)</span>
<span id="cb308-12"><a href="mod-03.html#cb308-12" tabindex="-1"></a><span class="fu">save</span>(<span class="at">list=</span><span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;z&quot;</span>), <span class="at">file=</span><span class="st">&quot;testworkspace.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="writing-text-to-a-file-special-cases" class="section level4 hasAnchor" number="3.1.5.4">
<h4><span class="header-section-number">3.1.5.4</span> Writing text to a file (special cases)<a href="mod-03.html#writing-text-to-a-file-special-cases" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes you need to write out data that do not fit easily into tables. An example might be the results of a single <em>t</em>-test or ANOVA. This is also sometimes necessary when working with programs outside of R. For example, the programs OpenBUGS and JAGS require a text file that defines the model to be fit. This text file can be generated by R, which makes your workflow simpler because you don’t need to use a separate program to store the outputs.</p>
<p>The function to write such files is <code>sink()</code>. Functions <code>print()</code> and <code>cat()</code> are also useful in conjunction with <code>sink()</code>.</p>
<ul>
<li><code>sink()</code> works in pairs. The first command defines a file to put text into. The second command finishes the file and writes it.</li>
<li><code>print()</code> prints its arguments as-is. It should produce the same text as running its argument in the R console.</li>
<li><code>cat()</code> stands for “concatenate and print”. Use this to combine expressions and then print them.</li>
</ul>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="mod-03.html#cb309-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb309-2"><a href="mod-03.html#cb309-2" tabindex="-1"></a></span>
<span id="cb309-3"><a href="mod-03.html#cb309-3" tabindex="-1"></a>my.result <span class="ot">&lt;-</span> <span class="fu">t.test</span>(<span class="fu">rnorm</span>(<span class="dv">50</span>))</span>
<span id="cb309-4"><a href="mod-03.html#cb309-4" tabindex="-1"></a><span class="fu">sink</span>(<span class="st">&quot;C:/_data/myresult.txt&quot;</span>)</span>
<span id="cb309-5"><a href="mod-03.html#cb309-5" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;t-test results:&quot;</span>,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="co">#\n = new line</span></span>
<span id="cb309-6"><a href="mod-03.html#cb309-6" tabindex="-1"></a><span class="fu">print</span>(my.result)</span>
<span id="cb309-7"><a href="mod-03.html#cb309-7" tabindex="-1"></a><span class="fu">sink</span>()</span></code></pre></div>
</div>
</div>
</div>
<div id="making-values-in-r" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Making values in R<a href="mod-03.html#making-values-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The typical analytical workflow in R involves importing data from text files or other sources. Sometimes, however, it is necessary to make values within R. This can be for a variety of reasons:</p>
<ol style="list-style-type: decimal">
<li>Producing test data sets with desired distributions</li>
<li>Making sets of indices or look-up values to use in other functions</li>
<li>Modifying existing datasets</li>
<li>Running simulations</li>
<li>And many more…</li>
</ol>
<p>This section demonstrates some methods for producing values–i.e., data–within R.</p>
<div id="producing-arbitrary-values-with-c" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Producing arbitrary values with <code>c()</code><a href="mod-03.html#producing-arbitrary-values-with-c" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In a <a href="mod-03.html#mod-03-c">previous section</a> we saw how function <code>c()</code> combines its arguments as a <strong>vector</strong>. As with all functions, arguments must be separated by commas and can be on different lines. This method can be used to make vectors with any set of values.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="mod-03.html#cb310-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">9</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 9 8 7 6 5</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="mod-03.html#cb312-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,</span>
<span id="cb312-2"><a href="mod-03.html#cb312-2" tabindex="-1"></a>      <span class="dv">3</span>,</span>
<span id="cb312-3"><a href="mod-03.html#cb312-3" tabindex="-1"></a>       <span class="dv">5</span></span>
<span id="cb312-4"><a href="mod-03.html#cb312-4" tabindex="-1"></a>       )</span></code></pre></div>
<p>Like <code>scan()</code>, this is an inefficient way to make vectors but can be useful for small numbers of values. Or, for sets of values that can’t be defined algorithmically.</p>
</div>
<div id="generating-regular-values" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Generating regular values<a href="mod-03.html#generating-regular-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="consecutive-values-with" class="section level4 hasAnchor" number="3.2.2.1">
<h4><span class="header-section-number">3.2.2.1</span> Consecutive values with <code>:</code><a href="mod-03.html#consecutive-values-with" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Consecutive values can be generated using the colon operator <code>:</code>. A command like <code>X:Y</code> will generate consecutive values from <em>X</em> to <em>Y</em> in increments of 1 or -1. If <span class="math inline">\(X&lt;Y\)</span>, the increment is 1; if <span class="math inline">\(X&gt;Y\)</span>, the increment is -1. The usual use case is to make sets of consecutive integers.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="mod-03.html#cb313-1" tabindex="-1"></a><span class="co"># Simple examples:</span></span>
<span id="cb313-2"><a href="mod-03.html#cb313-2" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="mod-03.html#cb315-1" tabindex="-1"></a><span class="dv">5</span><span class="sc">:</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 5 4 3 2</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="mod-03.html#cb317-1" tabindex="-1"></a><span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1] -1  0  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="mod-03.html#cb319-1" tabindex="-1"></a><span class="dv">10</span><span class="sc">:-</span><span class="dv">1</span></span></code></pre></div>
<pre><code>##  [1] 10  9  8  7  6  5  4  3  2  1  0 -1</code></pre>
<p>Sometimes you may need to use parentheses to get the intended values because of the order in which R runs operators (aka: “operator precedence”).</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="mod-03.html#cb321-1" tabindex="-1"></a><span class="co"># effect of parentheses (operator precedence):</span></span>
<span id="cb321-2"><a href="mod-03.html#cb321-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb321-3"><a href="mod-03.html#cb321-3" tabindex="-1"></a><span class="fu">length</span>(a)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="mod-03.html#cb323-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span><span class="sc">*</span><span class="fu">length</span>(a)</span></code></pre></div>
<pre><code>## [1]  5 10</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="mod-03.html#cb325-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>(<span class="dv">2</span><span class="sc">*</span><span class="fu">length</span>(a))</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p><em>X</em> and <em>Y</em> don’t have to literally be numbers; they can be variables or R expressions that evaluate to a number. Below are some examples:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="mod-03.html#cb327-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb327-2"><a href="mod-03.html#cb327-2" tabindex="-1"></a><span class="co"># length(a) evaluates to a number (5)</span></span>
<span id="cb327-3"><a href="mod-03.html#cb327-3" tabindex="-1"></a><span class="fu">length</span>(a)<span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>## [1]  5  6  7  8  9 10</code></pre>
<p>Most people use <code>:</code> to produce sets of integers, but it can also make non-integers. The values will be separated by 1 or -1. The first value will be the value before the <code>:</code>. The last value might not be the value after the <code>:</code>. It will be the value up to or before the second number along the sequence from the first number. If the value before the <code>:</code> is an integer, then the sequence will consist of integers. Note that if you want a sequence that includes non-integers, it might be safer to use <code>seq()</code> (see below).</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="mod-03.html#cb329-1" tabindex="-1"></a><span class="fl">2.3</span><span class="sc">:</span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 2.3 3.3 4.3</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="mod-03.html#cb331-1" tabindex="-1"></a><span class="dv">5</span><span class="sc">:</span><span class="fl">2.3</span></span></code></pre></div>
<pre><code>## [1] 5 4 3</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="mod-03.html#cb333-1" tabindex="-1"></a><span class="fl">2.7</span><span class="sc">:</span><span class="fl">6.1</span></span></code></pre></div>
<pre><code>## [1] 2.7 3.7 4.7 5.7</code></pre>
</div>
<div id="regular-sequences-with-seq" class="section level4 hasAnchor" number="3.2.2.2">
<h4><span class="header-section-number">3.2.2.2</span> Regular sequences with <code>seq()</code><a href="mod-03.html#regular-sequences-with-seq" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Function <code>seq()</code> generates regular sequences of a given length (<code>length=</code>), or by an interval (<code>by=</code>). The command must be supplied with a length or an interval, but not both. If you specify a length, R will calculate the intervals for you. If you specify an interval, R will calculate the length for you. If you specify a length and an interval, R will return an error.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="mod-03.html#cb335-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">20</span>,<span class="at">by=</span><span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>##  [1]  0.0  0.5  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0
## [16]  7.5  8.0  8.5  9.0  9.5 10.0 10.5 11.0 11.5 12.0 12.5 13.0 13.5 14.0 14.5
## [31] 15.0 15.5 16.0 16.5 17.0 17.5 18.0 18.5 19.0 19.5 20.0</code></pre>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="mod-03.html#cb337-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="sc">-</span>pi,pi,<span class="at">by=</span><span class="fl">0.1</span>)</span></code></pre></div>
<pre><code>##  [1] -3.14159265 -3.04159265 -2.94159265 -2.84159265 -2.74159265 -2.64159265
##  [7] -2.54159265 -2.44159265 -2.34159265 -2.24159265 -2.14159265 -2.04159265
## [13] -1.94159265 -1.84159265 -1.74159265 -1.64159265 -1.54159265 -1.44159265
## [19] -1.34159265 -1.24159265 -1.14159265 -1.04159265 -0.94159265 -0.84159265
## [25] -0.74159265 -0.64159265 -0.54159265 -0.44159265 -0.34159265 -0.24159265
## [31] -0.14159265 -0.04159265  0.05840735  0.15840735  0.25840735  0.35840735
## [37]  0.45840735  0.55840735  0.65840735  0.75840735  0.85840735  0.95840735
## [43]  1.05840735  1.15840735  1.25840735  1.35840735  1.45840735  1.55840735
## [49]  1.65840735  1.75840735  1.85840735  1.95840735  2.05840735  2.15840735
## [55]  2.25840735  2.35840735  2.45840735  2.55840735  2.65840735  2.75840735
## [61]  2.85840735  2.95840735  3.05840735</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="mod-03.html#cb339-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>,<span class="at">length=</span><span class="dv">20</span>)</span></code></pre></div>
<pre><code>##  [1] -1.00000000 -0.89473684 -0.78947368 -0.68421053 -0.57894737 -0.47368421
##  [7] -0.36842105 -0.26315789 -0.15789474 -0.05263158  0.05263158  0.15789474
## [13]  0.26315789  0.36842105  0.47368421  0.57894737  0.68421053  0.78947368
## [19]  0.89473684  1.00000000</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="mod-03.html#cb341-1" tabindex="-1"></a><span class="co"># returns an error:</span></span>
<span id="cb341-2"><a href="mod-03.html#cb341-2" tabindex="-1"></a><span class="do">## not run:</span></span>
<span id="cb341-3"><a href="mod-03.html#cb341-3" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="at">by=</span><span class="dv">3</span>, <span class="at">length=</span><span class="dv">3</span>)</span></code></pre></div>
<p>If you want the values to go from greater to smaller, the by argument must be negative.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="mod-03.html#cb342-1" tabindex="-1"></a><span class="co"># returns an error:</span></span>
<span id="cb342-2"><a href="mod-03.html#cb342-2" tabindex="-1"></a><span class="do">## not run:</span></span>
<span id="cb342-3"><a href="mod-03.html#cb342-3" tabindex="-1"></a><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="at">by=</span><span class="dv">1</span>)</span></code></pre></div>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="mod-03.html#cb343-1" tabindex="-1"></a><span class="co"># works:</span></span>
<span id="cb343-2"><a href="mod-03.html#cb343-2" tabindex="-1"></a><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="at">by=</span><span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>##  [1]  -1  -2  -3  -4  -5  -6  -7  -8  -9 -10</code></pre>
</div>
<div id="repeated-values-with-rep" class="section level4 hasAnchor" number="3.2.2.3">
<h4><span class="header-section-number">3.2.2.3</span> Repeated values with <code>rep()</code><a href="mod-03.html#repeated-values-with-rep" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The function <code>rep()</code> creates a sequence of repeated elements. It can be used in several ways.</p>
<p>One way is to specify the number of times its first argument gets repeated. Notice that in the second command <code>rep(1:3, 5)</code>, the entire first argument <code>1 2 3</code> is repeated 5 times.</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="mod-03.html#cb345-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">2</span>, <span class="at">times=</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 2 2 2 2 2</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="mod-03.html#cb347-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times=</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
<p>Another way is to repeat each element of its input a certain number of times each:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="mod-03.html#cb349-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each=</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3</code></pre>
<p>The arguments <code>times</code> and <code>each</code> can be combined. Notice that <code>each</code> takes precedence over <code>times</code>.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="mod-03.html#cb351-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each=</span><span class="dv">4</span>, <span class="at">times=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 2 2 2 2 3 3 3 3 1 1 1 1 2 2 2 2 3 3 3 3</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="mod-03.html#cb353-1" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each=</span><span class="dv">2</span>, <span class="at">times=</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 2 2 3 3 1 1 2 2 3 3 1 1 2 2 3 3 1 1 2 2 3 3</code></pre>
</div>
<div id="the-recycling-rule" class="section level4 hasAnchor" number="3.2.2.4">
<h4><span class="header-section-number">3.2.2.4</span> The “Recycling Rule”<a href="mod-03.html#the-recycling-rule" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One quirk of R sequences and vectors is the <strong>recycling rule</strong>. Values in one vector can be “recycled” to match up with values in another vector. This rule is <strong><em>only</em></strong> invoked if the length of the longer vector is a multiple of the length of the shorter vector. Otherwise you will get an error. Consider the following example:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="mod-03.html#cb355-1" tabindex="-1"></a>my.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb355-2"><a href="mod-03.html#cb355-2" tabindex="-1"></a></span>
<span id="cb355-3"><a href="mod-03.html#cb355-3" tabindex="-1"></a><span class="co"># add a value with 3 unique values</span></span>
<span id="cb355-4"><a href="mod-03.html#cb355-4" tabindex="-1"></a>my.df<span class="sc">$</span>x3 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb355-5"><a href="mod-03.html#cb355-5" tabindex="-1"></a></span>
<span id="cb355-6"><a href="mod-03.html#cb355-6" tabindex="-1"></a><span class="co"># add a value with 4 unique values</span></span>
<span id="cb355-7"><a href="mod-03.html#cb355-7" tabindex="-1"></a>my.df<span class="sc">$</span>x4 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb355-8"><a href="mod-03.html#cb355-8" tabindex="-1"></a></span>
<span id="cb355-9"><a href="mod-03.html#cb355-9" tabindex="-1"></a><span class="co"># add a value with 2 random values:</span></span>
<span id="cb355-10"><a href="mod-03.html#cb355-10" tabindex="-1"></a>my.df<span class="sc">$</span>x2 <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">2</span>)</span>
<span id="cb355-11"><a href="mod-03.html#cb355-11" tabindex="-1"></a></span>
<span id="cb355-12"><a href="mod-03.html#cb355-12" tabindex="-1"></a>my.df</span></code></pre></div>
<pre><code>##     x x3 x4        x2
## 1   1  1  1 0.9373858
## 2   2  2  2 0.8504828
## 3   3  3  3 0.9373858
## 4   4  1  4 0.8504828
## 5   5  2  1 0.9373858
## 6   6  3  2 0.8504828
## 7   7  1  3 0.9373858
## 8   8  2  4 0.8504828
## 9   9  3  1 0.9373858
## 10 10  1  2 0.8504828
## 11 11  2  3 0.9373858
## 12 12  3  4 0.8504828</code></pre>
<p>Trying to add a variable with a number of values that is not a factor of 12–5, 7, 8, 9, 10, or 11–will usually return an error.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="mod-03.html#cb357-1" tabindex="-1"></a><span class="co"># not run:</span></span>
<span id="cb357-2"><a href="mod-03.html#cb357-2" tabindex="-1"></a>my.df<span class="sc">$</span>x7 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span></code></pre></div>
</div>
</div>
<div id="generating-random-values" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Generating random values<a href="mod-03.html#generating-random-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R can generate many types of <strong>random values</strong>. This makes sense because R was designed for statistical analysis, and randomness is a key feature of statistics. When pulling random values in R (or any other program, for that matter) it is advisable to set the <strong>random number seed</strong> so that your results are reproducible. The random number seed is needed because “random” numbers from a computer are not actually random. They are <strong>pseudo-random</strong>, which means that while the values appear random, and can pass many statistical tests for randomness, they are calculated deterministically from the state of your computer. If you are running simulations, or an analysis that involves random sampling, you need to set the random number seed. Otherwise, you might get different results every time you run your code. This can make reproducing an analysis or set of simulations all but impossible.</p>
<p>The random number seed can be set with function <code>set.seed()</code>. Setting the seed defines the initial state of R’s pseudo-random number generator.</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="mod-03.html#cb358-1" tabindex="-1"></a><span class="co"># different results each time:</span></span>
<span id="cb358-2"><a href="mod-03.html#cb358-2" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">3</span>)</span>
<span id="cb358-3"><a href="mod-03.html#cb358-3" tabindex="-1"></a><span class="do">## [1] 0.5798209 0.8214039 0.1137186</span></span>
<span id="cb358-4"><a href="mod-03.html#cb358-4" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">3</span>)</span>
<span id="cb358-5"><a href="mod-03.html#cb358-5" tabindex="-1"></a><span class="do">## [1] 0.7645078 0.6236135 0.1484466</span></span>
<span id="cb358-6"><a href="mod-03.html#cb358-6" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">3</span>)</span>
<span id="cb358-7"><a href="mod-03.html#cb358-7" tabindex="-1"></a><span class="do">## [1] 0.08026447 0.46406955 0.77936816</span></span>
<span id="cb358-8"><a href="mod-03.html#cb358-8" tabindex="-1"></a></span>
<span id="cb358-9"><a href="mod-03.html#cb358-9" tabindex="-1"></a><span class="co"># same results each time:</span></span>
<span id="cb358-10"><a href="mod-03.html#cb358-10" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb358-11"><a href="mod-03.html#cb358-11" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">3</span>)</span>
<span id="cb358-12"><a href="mod-03.html#cb358-12" tabindex="-1"></a><span class="do">## [1] 0.9148060 0.9370754 0.2861395</span></span>
<span id="cb358-13"><a href="mod-03.html#cb358-13" tabindex="-1"></a></span>
<span id="cb358-14"><a href="mod-03.html#cb358-14" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb358-15"><a href="mod-03.html#cb358-15" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">3</span>)</span>
<span id="cb358-16"><a href="mod-03.html#cb358-16" tabindex="-1"></a><span class="do">## [1] 0.9148060 0.9370754 0.2861395</span></span>
<span id="cb358-17"><a href="mod-03.html#cb358-17" tabindex="-1"></a></span>
<span id="cb358-18"><a href="mod-03.html#cb358-18" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb358-19"><a href="mod-03.html#cb358-19" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">3</span>)</span>
<span id="cb358-20"><a href="mod-03.html#cb358-20" tabindex="-1"></a><span class="do">## [1] 0.9148060 0.9370754 0.2861395</span></span></code></pre></div>
<div id="random-values-from-a-set-with-sample" class="section level4 hasAnchor" number="3.2.3.1">
<h4><span class="header-section-number">3.2.3.1</span> Random values from a set with <code>sample()</code><a href="mod-03.html#random-values-from-a-set-with-sample" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The function <code>sample()</code> pulls random values from a set of values. This can be done with or without replacement. If you try to pull too many values from a set without replacement R will return an error. The default argument for <code>replace=</code> is <code>FALSE</code>.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="mod-03.html#cb359-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">456</span>)</span>
<span id="cb359-2"><a href="mod-03.html#cb359-2" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="at">replace=</span><span class="cn">FALSE</span>) </span>
<span id="cb359-3"><a href="mod-03.html#cb359-3" tabindex="-1"></a><span class="do">## [1]  5  3  6 10  4</span></span>
<span id="cb359-4"><a href="mod-03.html#cb359-4" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb359-5"><a href="mod-03.html#cb359-5" tabindex="-1"></a><span class="do">## [1]  9 10  9 10  3</span></span></code></pre></div>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="mod-03.html#cb360-1" tabindex="-1"></a><span class="co"># returns an error</span></span>
<span id="cb360-2"><a href="mod-03.html#cb360-2" tabindex="-1"></a><span class="do">## (not run):</span></span>
<span id="cb360-3"><a href="mod-03.html#cb360-3" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">20</span>)</span></code></pre></div>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="mod-03.html#cb361-1" tabindex="-1"></a><span class="co"># works:</span></span>
<span id="cb361-2"><a href="mod-03.html#cb361-2" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">20</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb361-3"><a href="mod-03.html#cb361-3" tabindex="-1"></a><span class="do">##  [1]  7  8  5  4  9  1  6  8  5  9  2  4 10  4 10  1 10  8  9  4</span></span></code></pre></div>
<p>You can use <code>sample()</code> with values other than numbers. The function will pull values from whatever its first argument is.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="mod-03.html#cb362-1" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)</span>
<span id="cb362-2"><a href="mod-03.html#cb362-2" tabindex="-1"></a><span class="fu">sample</span>(x1, <span class="dv">10</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb362-3"><a href="mod-03.html#cb362-3" tabindex="-1"></a><span class="do">##  [1] &quot;tails&quot; &quot;heads&quot; &quot;tails&quot; &quot;tails&quot; &quot;tails&quot; &quot;heads&quot; &quot;tails&quot; &quot;heads&quot; &quot;heads&quot;</span></span>
<span id="cb362-4"><a href="mod-03.html#cb362-4" tabindex="-1"></a><span class="do">## [10] &quot;tails&quot;</span></span>
<span id="cb362-5"><a href="mod-03.html#cb362-5" tabindex="-1"></a></span>
<span id="cb362-6"><a href="mod-03.html#cb362-6" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">2.3</span>, pi, <span class="sc">-</span><span class="dv">3</span>)</span>
<span id="cb362-7"><a href="mod-03.html#cb362-7" tabindex="-1"></a><span class="fu">sample</span>(x2, <span class="dv">10</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb362-8"><a href="mod-03.html#cb362-8" tabindex="-1"></a><span class="do">##  [1]  2.300000  2.300000  2.300000  3.141593  3.141593 -3.000000 -3.000000</span></span>
<span id="cb362-9"><a href="mod-03.html#cb362-9" tabindex="-1"></a><span class="do">##  [8]  3.141593  3.141593  2.300000</span></span></code></pre></div>
<p>By default, every element in the set has an equal probability of being chosen. You can alter this with the argument <code>prob</code>. This argument must have a probability for each element of the set from which value are chosen, and those probabilities must add up to 1.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="mod-03.html#cb363-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;heads&quot;</span>, <span class="st">&quot;tails&quot;</span>)</span>
<span id="cb363-2"><a href="mod-03.html#cb363-2" tabindex="-1"></a>probs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.25</span>)</span>
<span id="cb363-3"><a href="mod-03.html#cb363-3" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">sample</span>(x, <span class="dv">100</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb363-4"><a href="mod-03.html#cb363-4" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">sample</span>(x, <span class="dv">100</span>, <span class="at">replace=</span><span class="cn">TRUE</span>, <span class="at">prob=</span>probs)</span>
<span id="cb363-5"><a href="mod-03.html#cb363-5" tabindex="-1"></a></span>
<span id="cb363-6"><a href="mod-03.html#cb363-6" tabindex="-1"></a><span class="co"># compare:</span></span>
<span id="cb363-7"><a href="mod-03.html#cb363-7" tabindex="-1"></a><span class="fu">table</span>(a)</span>
<span id="cb363-8"><a href="mod-03.html#cb363-8" tabindex="-1"></a><span class="do">## a</span></span>
<span id="cb363-9"><a href="mod-03.html#cb363-9" tabindex="-1"></a><span class="do">## heads tails </span></span>
<span id="cb363-10"><a href="mod-03.html#cb363-10" tabindex="-1"></a><span class="do">##    53    47</span></span>
<span id="cb363-11"><a href="mod-03.html#cb363-11" tabindex="-1"></a><span class="fu">table</span>(b)</span>
<span id="cb363-12"><a href="mod-03.html#cb363-12" tabindex="-1"></a><span class="do">## b</span></span>
<span id="cb363-13"><a href="mod-03.html#cb363-13" tabindex="-1"></a><span class="do">## heads tails </span></span>
<span id="cb363-14"><a href="mod-03.html#cb363-14" tabindex="-1"></a><span class="do">##    74    26</span></span></code></pre></div>
</div>
<div id="random-values-from-probability-distributions" class="section level4 hasAnchor" number="3.2.3.2">
<h4><span class="header-section-number">3.2.3.2</span> Random values from probability distributions<a href="mod-03.html#random-values-from-probability-distributions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One of the strengths of R is its ease of working with probability distributions. We will explore probability distributions more in <a href="mod-05.html#mod-05">Module 5</a>, but for now just understand that a probability distribution is a function that describes how likely different values of a random variable are. In R, random values from a probability distribution can be drawn using a function with a name like <code>r_()</code>, where <code>_</code> is the (abbreviated) name of the distribution.</p>
<p>The syntax of the random distribution functions is very consistent across distributions. The first argument is always the sample size (<code>n</code>), and the next few arguments are the distributional parameters of the distribution. These arguments can be provided with or without their names. The default order of the arguments is shown on the help page for each function (e.g., <code>?rnorm</code>). Below are some examples of random draws from different distributions, displayed as histograms.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="mod-03.html#cb364-1" tabindex="-1"></a><span class="co"># sample size</span></span>
<span id="cb364-2"><a href="mod-03.html#cb364-2" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb364-3"><a href="mod-03.html#cb364-3" tabindex="-1"></a></span>
<span id="cb364-4"><a href="mod-03.html#cb364-4" tabindex="-1"></a><span class="co"># draw random distributions</span></span>
<span id="cb364-5"><a href="mod-03.html#cb364-5" tabindex="-1"></a><span class="do">## normal with mean 0 and SD = 1</span></span>
<span id="cb364-6"><a href="mod-03.html#cb364-6" tabindex="-1"></a>a1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(N)</span>
<span id="cb364-7"><a href="mod-03.html#cb364-7" tabindex="-1"></a></span>
<span id="cb364-8"><a href="mod-03.html#cb364-8" tabindex="-1"></a><span class="do">## normal with mean 25 and SD = 100</span></span>
<span id="cb364-9"><a href="mod-03.html#cb364-9" tabindex="-1"></a>a2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(N, <span class="dv">25</span>, <span class="dv">100</span>)</span>
<span id="cb364-10"><a href="mod-03.html#cb364-10" tabindex="-1"></a></span>
<span id="cb364-11"><a href="mod-03.html#cb364-11" tabindex="-1"></a><span class="do">## uniform in [0, 1]</span></span>
<span id="cb364-12"><a href="mod-03.html#cb364-12" tabindex="-1"></a>a3 <span class="ot">&lt;-</span> <span class="fu">runif</span>(N)</span>
<span id="cb364-13"><a href="mod-03.html#cb364-13" tabindex="-1"></a></span>
<span id="cb364-14"><a href="mod-03.html#cb364-14" tabindex="-1"></a><span class="do">## uniform in [5, 25]</span></span>
<span id="cb364-15"><a href="mod-03.html#cb364-15" tabindex="-1"></a>a4 <span class="ot">&lt;-</span> <span class="fu">runif</span>(N, <span class="dv">5</span>, <span class="dv">25</span>)</span>
<span id="cb364-16"><a href="mod-03.html#cb364-16" tabindex="-1"></a></span>
<span id="cb364-17"><a href="mod-03.html#cb364-17" tabindex="-1"></a><span class="do">## Poisson with lambda = 10</span></span>
<span id="cb364-18"><a href="mod-03.html#cb364-18" tabindex="-1"></a>a5 <span class="ot">&lt;-</span> <span class="fu">rpois</span>(N, <span class="dv">10</span>)</span>
<span id="cb364-19"><a href="mod-03.html#cb364-19" tabindex="-1"></a></span>
<span id="cb364-20"><a href="mod-03.html#cb364-20" tabindex="-1"></a><span class="do">## lognormal with logmu = 1.2 and logsd = 2</span></span>
<span id="cb364-21"><a href="mod-03.html#cb364-21" tabindex="-1"></a>a6 <span class="ot">&lt;-</span> <span class="fu">rlnorm</span>(N, <span class="fl">1.2</span>, <span class="fl">0.9</span>)</span>
<span id="cb364-22"><a href="mod-03.html#cb364-22" tabindex="-1"></a></span>
<span id="cb364-23"><a href="mod-03.html#cb364-23" tabindex="-1"></a><span class="co"># produce histogram of each distribution above</span></span>
<span id="cb364-24"><a href="mod-03.html#cb364-24" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb364-25"><a href="mod-03.html#cb364-25" tabindex="-1"></a><span class="fu">hist</span>(a1)</span>
<span id="cb364-26"><a href="mod-03.html#cb364-26" tabindex="-1"></a><span class="fu">hist</span>(a2)</span>
<span id="cb364-27"><a href="mod-03.html#cb364-27" tabindex="-1"></a><span class="fu">hist</span>(a3)</span>
<span id="cb364-28"><a href="mod-03.html#cb364-28" tabindex="-1"></a><span class="fu">hist</span>(a4)</span>
<span id="cb364-29"><a href="mod-03.html#cb364-29" tabindex="-1"></a><span class="fu">hist</span>(a5)</span>
<span id="cb364-30"><a href="mod-03.html#cb364-30" tabindex="-1"></a><span class="fu">hist</span>(a6)</span></code></pre></div>
<p><img src="applied_biol_data_analysis_20220816_files/figure-html/unnamed-chunk-224-1.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="mod-03.html#cb365-1" tabindex="-1"></a><span class="co"># reset graphical parameters</span></span>
<span id="cb365-2"><a href="mod-03.html#cb365-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
</div>
</div>
</div>
<div id="selecting-data-with" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Selecting data with <code>[]</code><a href="mod-03.html#selecting-data-with" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the most common data manipulation tasks is selecting, or <strong>extracting</strong>, from your data. The most common way of selecting subsets of an object (aka: extracting) is the R <strong>bracket notation</strong>. This refers to the symbols used, <code>[]</code>. These are also sometimes called <strong>square brackets</strong>, to distinguish them from <strong>curly brackets</strong>, <code>{}</code>. The latter are more properly called <strong>braces</strong> and have a different purpose in R.</p>
<p>Brackets tell R that you want a part of an object. Which part is determined either by a name, or an <strong>index</strong> inside the brackets. Indices should usually be supplied as numbers, but other types can be used. For objects with more than 1 dimension, you need to supply as many indices, or vectors of indices, as the object has dimensions. Within brackets, vectors of indices are separated by commas.</p>
<p>Brackets can also be used to exclude certain elements by using the negative sign, but this can be tricky. We’ll explore how negative indices work below.</p>
<div id="mod-03-brackets" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Basics of brackets<a href="mod-03.html#mod-03-brackets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="selecting-from-a-vector" class="section level4 hasAnchor" number="3.3.1.1">
<h4><span class="header-section-number">3.3.1.1</span> Selecting from a vector<a href="mod-03.html#selecting-from-a-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Vectors have 1 dimension, so you must specify a single vector of indices. Notice that the brackets can be empty, in which case all elements can be returned. If the vector supplied is of length 0, then no elements will be returned. When a vector of indices with &gt; 0 elements is specified, R will return the elements of the vector in the order requested. For example, <code>a[c(1,3,5)]</code> and <code>a[c(3,5,1)]</code> will return the same values but in different orders.</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="mod-03.html#cb366-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb366-2"><a href="mod-03.html#cb366-2" tabindex="-1"></a><span class="co"># all elements returned</span></span>
<span id="cb366-3"><a href="mod-03.html#cb366-3" tabindex="-1"></a>a[]        </span>
<span id="cb366-4"><a href="mod-03.html#cb366-4" tabindex="-1"></a><span class="do">##  [1] 11 12 13 14 15 16 17 18 19 20</span></span>
<span id="cb366-5"><a href="mod-03.html#cb366-5" tabindex="-1"></a></span>
<span id="cb366-6"><a href="mod-03.html#cb366-6" tabindex="-1"></a><span class="co"># second element</span></span>
<span id="cb366-7"><a href="mod-03.html#cb366-7" tabindex="-1"></a>a[<span class="dv">2</span>]</span>
<span id="cb366-8"><a href="mod-03.html#cb366-8" tabindex="-1"></a><span class="do">## [1] 12</span></span>
<span id="cb366-9"><a href="mod-03.html#cb366-9" tabindex="-1"></a></span>
<span id="cb366-10"><a href="mod-03.html#cb366-10" tabindex="-1"></a><span class="co"># elements 3, 4, 5, 6, and 7</span></span>
<span id="cb366-11"><a href="mod-03.html#cb366-11" tabindex="-1"></a>a[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb366-12"><a href="mod-03.html#cb366-12" tabindex="-1"></a><span class="do">## [1] 13 14 15 16 17</span></span>
<span id="cb366-13"><a href="mod-03.html#cb366-13" tabindex="-1"></a></span>
<span id="cb366-14"><a href="mod-03.html#cb366-14" tabindex="-1"></a><span class="co"># error (not run)</span></span>
<span id="cb366-15"><a href="mod-03.html#cb366-15" tabindex="-1"></a><span class="co"># a[3:7,2]    </span></span>
<span id="cb366-16"><a href="mod-03.html#cb366-16" tabindex="-1"></a></span>
<span id="cb366-17"><a href="mod-03.html#cb366-17" tabindex="-1"></a><span class="co"># correct version of previous command</span></span>
<span id="cb366-18"><a href="mod-03.html#cb366-18" tabindex="-1"></a>a[<span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>,<span class="dv">2</span>)]</span>
<span id="cb366-19"><a href="mod-03.html#cb366-19" tabindex="-1"></a><span class="do">## [1] 13 14 15 16 17 12</span></span>
<span id="cb366-20"><a href="mod-03.html#cb366-20" tabindex="-1"></a></span>
<span id="cb366-21"><a href="mod-03.html#cb366-21" tabindex="-1"></a><span class="co"># notice different ordering from previous command</span></span>
<span id="cb366-22"><a href="mod-03.html#cb366-22" tabindex="-1"></a>a[<span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>)]   </span>
<span id="cb366-23"><a href="mod-03.html#cb366-23" tabindex="-1"></a><span class="do">## [1] 12 13 14 15 16 17</span></span></code></pre></div>
</div>
<div id="selecting-from-a-matrix" class="section level4 hasAnchor" number="3.3.1.2">
<h4><span class="header-section-number">3.3.1.2</span> Selecting from a matrix<a href="mod-03.html#selecting-from-a-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Matrices have 2 dimensions, so you must specify two dimension’s worth of indices. If you want all of one dimension (e.g., rows 1 to 3 and all columns), you can leave the spot for the index blank. Separate the dimensions using a comma. Positive indices select elements; negative elements remove elements.</p>
<p>I’ll reiterate this because it is a common mistake: you must specify all dimensions using a comma. Failing to do so will result in an error (bad) or unexpected results (worse).</p>
<p><strong>Remember: in R, indices start at 1. In some languages such as Python indices start at 0.</strong></p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="mod-03.html#cb367-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow=</span><span class="dv">3</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>)</span>
<span id="cb367-2"><a href="mod-03.html#cb367-2" tabindex="-1"></a></span>
<span id="cb367-3"><a href="mod-03.html#cb367-3" tabindex="-1"></a><span class="co"># value in row 1, column 2</span></span>
<span id="cb367-4"><a href="mod-03.html#cb367-4" tabindex="-1"></a>a[<span class="dv">1</span>,<span class="dv">2</span>]</span>
<span id="cb367-5"><a href="mod-03.html#cb367-5" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb367-6"><a href="mod-03.html#cb367-6" tabindex="-1"></a></span>
<span id="cb367-7"><a href="mod-03.html#cb367-7" tabindex="-1"></a><span class="co"># values in rows 1-3 and columns 1-2</span></span>
<span id="cb367-8"><a href="mod-03.html#cb367-8" tabindex="-1"></a>a[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb367-9"><a href="mod-03.html#cb367-9" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb367-10"><a href="mod-03.html#cb367-10" tabindex="-1"></a><span class="do">## [1,]    1    2</span></span>
<span id="cb367-11"><a href="mod-03.html#cb367-11" tabindex="-1"></a><span class="do">## [2,]    5    6</span></span>
<span id="cb367-12"><a href="mod-03.html#cb367-12" tabindex="-1"></a><span class="do">## [3,]    9   10</span></span>
<span id="cb367-13"><a href="mod-03.html#cb367-13" tabindex="-1"></a></span>
<span id="cb367-14"><a href="mod-03.html#cb367-14" tabindex="-1"></a><span class="co"># rows 1 and 2, all columns</span></span>
<span id="cb367-15"><a href="mod-03.html#cb367-15" tabindex="-1"></a>a[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,]</span>
<span id="cb367-16"><a href="mod-03.html#cb367-16" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3] [,4]</span></span>
<span id="cb367-17"><a href="mod-03.html#cb367-17" tabindex="-1"></a><span class="do">## [1,]    1    2    3    4</span></span>
<span id="cb367-18"><a href="mod-03.html#cb367-18" tabindex="-1"></a><span class="do">## [2,]    5    6    7    8</span></span>
<span id="cb367-19"><a href="mod-03.html#cb367-19" tabindex="-1"></a></span>
<span id="cb367-20"><a href="mod-03.html#cb367-20" tabindex="-1"></a><span class="co"># columns 1 and 2, all rows</span></span>
<span id="cb367-21"><a href="mod-03.html#cb367-21" tabindex="-1"></a>a[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb367-22"><a href="mod-03.html#cb367-22" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb367-23"><a href="mod-03.html#cb367-23" tabindex="-1"></a><span class="do">## [1,]    1    2</span></span>
<span id="cb367-24"><a href="mod-03.html#cb367-24" tabindex="-1"></a><span class="do">## [2,]    5    6</span></span>
<span id="cb367-25"><a href="mod-03.html#cb367-25" tabindex="-1"></a><span class="do">## [3,]    9   10</span></span></code></pre></div>
<p>Negative indices remove elements, or return all positive indices.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="mod-03.html#cb368-1" tabindex="-1"></a><span class="co"># rows except for row 1</span></span>
<span id="cb368-2"><a href="mod-03.html#cb368-2" tabindex="-1"></a>a[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb368-3"><a href="mod-03.html#cb368-3" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3] [,4]</span></span>
<span id="cb368-4"><a href="mod-03.html#cb368-4" tabindex="-1"></a><span class="do">## [1,]    5    6    7    8</span></span>
<span id="cb368-5"><a href="mod-03.html#cb368-5" tabindex="-1"></a><span class="do">## [2,]    9   10   11   12</span></span></code></pre></div>
<p>Removing multiple elements with <code>-</code> can be a bit tricky. All elements of the vector of things to remove must be negative. In the first example below, R returns an error because you request elements -1, 0, 1, and 2. Element -1 does not exist, and you don’t want elements 1 and 2!</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="mod-03.html#cb369-1" tabindex="-1"></a><span class="co"># rows except for row 1 and 2</span></span>
<span id="cb369-2"><a href="mod-03.html#cb369-2" tabindex="-1"></a><span class="do">## returns error (not run)</span></span>
<span id="cb369-3"><a href="mod-03.html#cb369-3" tabindex="-1"></a>a[<span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,]</span></code></pre></div>
<p>There are several correct ways to get rows other than 1 and 2. Notice that all of them result in indices with a 1-, a -2, and no positive values. The first option is probably the best for most situations.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="mod-03.html#cb370-1" tabindex="-1"></a>a[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),]</span>
<span id="cb370-2"><a href="mod-03.html#cb370-2" tabindex="-1"></a><span class="do">## [1]  9 10 11 12</span></span>
<span id="cb370-3"><a href="mod-03.html#cb370-3" tabindex="-1"></a>a[<span class="sc">-</span><span class="dv">1</span><span class="sc">*</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,]</span>
<span id="cb370-4"><a href="mod-03.html#cb370-4" tabindex="-1"></a><span class="do">## [1]  9 10 11 12</span></span>
<span id="cb370-5"><a href="mod-03.html#cb370-5" tabindex="-1"></a>a[<span class="sc">-</span><span class="dv">2</span><span class="sc">:</span><span class="dv">0</span>,]</span>
<span id="cb370-6"><a href="mod-03.html#cb370-6" tabindex="-1"></a><span class="do">## [1]  9 10 11 12</span></span></code></pre></div>
<p>Notice that all three of these lines return a vector, not a matrix. This is because a single row or column of a matrix simplifies to a vector. If you want to keep your result in matrix format, you can specify this using the argument <code>drop=FALSE</code> after the last dimension and a comma:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="mod-03.html#cb371-1" tabindex="-1"></a>a[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),,drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb371-2"><a href="mod-03.html#cb371-2" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3] [,4]</span></span>
<span id="cb371-3"><a href="mod-03.html#cb371-3" tabindex="-1"></a><span class="do">## [1,]    9   10   11   12</span></span></code></pre></div>
</div>
<div id="selecting-from-a-data-frame" class="section level4 hasAnchor" number="3.3.1.3">
<h4><span class="header-section-number">3.3.1.3</span> Selecting from a data frame<a href="mod-03.html#selecting-from-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Selecting from a data frame using brackets is largely the same as selecting from a matrix. Just keep in mind that the result might come back as a vector (if you select rows in a single column) or a data frame (any other situation).</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="mod-03.html#cb372-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb372-2"><a href="mod-03.html#cb372-2" tabindex="-1"></a></span>
<span id="cb372-3"><a href="mod-03.html#cb372-3" tabindex="-1"></a><span class="co"># returns a vector</span></span>
<span id="cb372-4"><a href="mod-03.html#cb372-4" tabindex="-1"></a>a[,<span class="dv">1</span>]</span>
<span id="cb372-5"><a href="mod-03.html#cb372-5" tabindex="-1"></a><span class="do">## [1] 5.1 4.9 4.7 4.6 5.0</span></span>
<span id="cb372-6"><a href="mod-03.html#cb372-6" tabindex="-1"></a></span>
<span id="cb372-7"><a href="mod-03.html#cb372-7" tabindex="-1"></a><span class="co"># returns a data frame</span></span>
<span id="cb372-8"><a href="mod-03.html#cb372-8" tabindex="-1"></a>a[<span class="dv">1</span>,]</span>
<span id="cb372-9"><a href="mod-03.html#cb372-9" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb372-10"><a href="mod-03.html#cb372-10" tabindex="-1"></a><span class="do">## 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb372-11"><a href="mod-03.html#cb372-11" tabindex="-1"></a></span>
<span id="cb372-12"><a href="mod-03.html#cb372-12" tabindex="-1"></a><span class="co"># returns a data frame</span></span>
<span id="cb372-13"><a href="mod-03.html#cb372-13" tabindex="-1"></a>a[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,]</span>
<span id="cb372-14"><a href="mod-03.html#cb372-14" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb372-15"><a href="mod-03.html#cb372-15" tabindex="-1"></a><span class="do">## 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb372-16"><a href="mod-03.html#cb372-16" tabindex="-1"></a><span class="do">## 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb372-17"><a href="mod-03.html#cb372-17" tabindex="-1"></a><span class="do">## 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb372-18"><a href="mod-03.html#cb372-18" tabindex="-1"></a></span>
<span id="cb372-19"><a href="mod-03.html#cb372-19" tabindex="-1"></a><span class="co"># returns a data frame</span></span>
<span id="cb372-20"><a href="mod-03.html#cb372-20" tabindex="-1"></a>a[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb372-21"><a href="mod-03.html#cb372-21" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width Petal.Length</span></span>
<span id="cb372-22"><a href="mod-03.html#cb372-22" tabindex="-1"></a><span class="do">## 1          5.1         3.5          1.4</span></span>
<span id="cb372-23"><a href="mod-03.html#cb372-23" tabindex="-1"></a><span class="do">## 2          4.9         3.0          1.4</span></span>
<span id="cb372-24"><a href="mod-03.html#cb372-24" tabindex="-1"></a><span class="do">## 3          4.7         3.2          1.3</span></span></code></pre></div>
</div>
<div id="selecting-from-arrays" class="section level4 hasAnchor" number="3.3.1.4">
<h4><span class="header-section-number">3.3.1.4</span> Selecting from arrays<a href="mod-03.html#selecting-from-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Selecting from an array is a lot like selecting from a matrix, only with one more dimension. Consider an array with 3 dimensions: rows, columns, and “layers”<a href="#fn38" class="footnote-ref" id="fnref38"><sup>38</sup></a>.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="mod-03.html#cb373-1" tabindex="-1"></a>ar <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb373-2"><a href="mod-03.html#cb373-2" tabindex="-1"></a>ar</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]    1    5
## [2,]    2    6
## [3,]    3    7
## [4,]    4    8
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    9   13
## [2,]   10   14
## [3,]   11   15
## [4,]   12   16
## 
## , , 3
## 
##      [,1] [,2]
## [1,]   17   21
## [2,]   18   22
## [3,]   19   23
## [4,]   20   24</code></pre>
<p>Each element in any dimension matrix (2 dimensional array):</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="mod-03.html#cb375-1" tabindex="-1"></a>ar[<span class="dv">1</span>,,]</span>
<span id="cb375-2"><a href="mod-03.html#cb375-2" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb375-3"><a href="mod-03.html#cb375-3" tabindex="-1"></a><span class="do">## [1,]    1    9   17</span></span>
<span id="cb375-4"><a href="mod-03.html#cb375-4" tabindex="-1"></a><span class="do">## [2,]    5   13   21</span></span>
<span id="cb375-5"><a href="mod-03.html#cb375-5" tabindex="-1"></a>ar[,<span class="dv">2</span>,]</span>
<span id="cb375-6"><a href="mod-03.html#cb375-6" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb375-7"><a href="mod-03.html#cb375-7" tabindex="-1"></a><span class="do">## [1,]    5   13   21</span></span>
<span id="cb375-8"><a href="mod-03.html#cb375-8" tabindex="-1"></a><span class="do">## [2,]    6   14   22</span></span>
<span id="cb375-9"><a href="mod-03.html#cb375-9" tabindex="-1"></a><span class="do">## [3,]    7   15   23</span></span>
<span id="cb375-10"><a href="mod-03.html#cb375-10" tabindex="-1"></a><span class="do">## [4,]    8   16   24</span></span>
<span id="cb375-11"><a href="mod-03.html#cb375-11" tabindex="-1"></a>ar[,,<span class="dv">3</span>]</span>
<span id="cb375-12"><a href="mod-03.html#cb375-12" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb375-13"><a href="mod-03.html#cb375-13" tabindex="-1"></a><span class="do">## [1,]   17   21</span></span>
<span id="cb375-14"><a href="mod-03.html#cb375-14" tabindex="-1"></a><span class="do">## [2,]   18   22</span></span>
<span id="cb375-15"><a href="mod-03.html#cb375-15" tabindex="-1"></a><span class="do">## [3,]   19   23</span></span>
<span id="cb375-16"><a href="mod-03.html#cb375-16" tabindex="-1"></a><span class="do">## [4,]   20   24</span></span></code></pre></div>
<p>The images below show what happened. For <code>ar[1,,]</code>, the values in the first row (dimension 1), all columns (dimension 2), and all layers (dimension 3) were selected. Dimension 2 in the input <code>ar</code> became dimension 1 in the output, and dimension 3 in <code>ar</code> became dimension 2 in the output.</p>
<p><img src="03_02.jpg" width="90%" style="display: block; margin: auto;" /></p>
<p>For <code>ar[,2,]</code>, the values in the second column (dimension 2), all rows (dimension 1), and all layers (dimension 3) were selected. Dimension 2 in the input <code>ar</code> became dimension 1 in the output, and dimension 3 in <code>ar</code> became dimension 2 in the output.</p>
<p><img src="03_03.jpg" width="90%" style="display: block; margin: auto;" /></p>
<p>For <code>ar[,,3]</code>, the values in the all rows (dimension 1), all columns (dimension 2), and layer 3 (dimension 3) were selected. Dimension 2 in the input <code>ar</code> became dimension 1 in the output, and dimension 3 in <code>ar</code> became dimension 2 in the output.</p>
<p><img src="03_04.jpg" width="90%" style="display: block; margin: auto;" /></p>
<p>Selecting by <span class="math inline">\(\ge\)</span> 1 dimension can be tricky. Consider this example:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="mod-03.html#cb376-1" tabindex="-1"></a>ar[<span class="dv">1</span>,,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb376-2"><a href="mod-03.html#cb376-2" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb376-3"><a href="mod-03.html#cb376-3" tabindex="-1"></a><span class="do">## [1,]    1    9</span></span>
<span id="cb376-4"><a href="mod-03.html#cb376-4" tabindex="-1"></a><span class="do">## [2,]    5   13</span></span></code></pre></div>
<p>Here we selected the first row (dimension 1), all columns (dimension 2), and layers 1 and 2 (dimension 3).</p>
<p><img src="03_05.jpg" width="90%" style="display: block; margin: auto;" /></p>
<p>And if you want a headache, consider this example:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="mod-03.html#cb377-1" tabindex="-1"></a>ar[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,,<span class="dv">2</span><span class="sc">:</span><span class="dv">1</span>]</span>
<span id="cb377-2"><a href="mod-03.html#cb377-2" tabindex="-1"></a><span class="do">## , , 1</span></span>
<span id="cb377-3"><a href="mod-03.html#cb377-3" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb377-4"><a href="mod-03.html#cb377-4" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb377-5"><a href="mod-03.html#cb377-5" tabindex="-1"></a><span class="do">## [1,]    9   13</span></span>
<span id="cb377-6"><a href="mod-03.html#cb377-6" tabindex="-1"></a><span class="do">## [2,]   10   14</span></span>
<span id="cb377-7"><a href="mod-03.html#cb377-7" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb377-8"><a href="mod-03.html#cb377-8" tabindex="-1"></a><span class="do">## , , 2</span></span>
<span id="cb377-9"><a href="mod-03.html#cb377-9" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb377-10"><a href="mod-03.html#cb377-10" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb377-11"><a href="mod-03.html#cb377-11" tabindex="-1"></a><span class="do">## [1,]    1    5</span></span>
<span id="cb377-12"><a href="mod-03.html#cb377-12" tabindex="-1"></a><span class="do">## [2,]    2    6</span></span></code></pre></div>
<p><img src="03_06.jpg" width="90%" style="display: block; margin: auto;" /></p>
<p>I can’t think of a reason why you would need to do something like the last example, but it’s nice to know that you could.</p>
</div>
<div id="selecting-from-lists" class="section level4 hasAnchor" number="3.3.1.5">
<h4><span class="header-section-number">3.3.1.5</span> Selecting from lists<a href="mod-03.html#selecting-from-lists" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>One of the most important kinds of R object is the <strong>list</strong>. A list can be thought of like a series of containers or buckets. Each bucket can contain completely unrelated things, or even other series of buckets. Each bucket is called an <strong>element</strong> of the list. Because of this flexibility, lists are extremely versatile and useful in R programming. Many function outputs are really lists (e.g., the outputs of <code>lm()</code> or <code>t.test()</code>).</p>
<p>Single elements of a list can be accessed with <strong>double brackets</strong> <code>[[]]</code>. Elements can be selected by name or by index. Elements that have a name can be selected by name using the <code>$</code> symbol instead of by double brackets.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="mod-03.html#cb378-1" tabindex="-1"></a><span class="co"># make a list &quot;a&quot;</span></span>
<span id="cb378-2"><a href="mod-03.html#cb378-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb378-3"><a href="mod-03.html#cb378-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;zebra&quot;</span></span>
<span id="cb378-4"><a href="mod-03.html#cb378-4" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow=</span><span class="dv">3</span>)</span>
<span id="cb378-5"><a href="mod-03.html#cb378-5" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">e1=</span>x, <span class="at">e2=</span>y, <span class="at">e3=</span>z)</span>
<span id="cb378-6"><a href="mod-03.html#cb378-6" tabindex="-1"></a></span>
<span id="cb378-7"><a href="mod-03.html#cb378-7" tabindex="-1"></a>a[[<span class="dv">1</span>]]</span>
<span id="cb378-8"><a href="mod-03.html#cb378-8" tabindex="-1"></a><span class="do">##  [1] 0.81537826 0.85151339 0.94974433 0.24860408 0.20883937 0.23072284</span></span>
<span id="cb378-9"><a href="mod-03.html#cb378-9" tabindex="-1"></a><span class="do">##  [7] 0.80287954 0.06142657 0.65110133 0.21388695</span></span>
<span id="cb378-10"><a href="mod-03.html#cb378-10" tabindex="-1"></a>a[[<span class="dv">2</span>]]</span>
<span id="cb378-11"><a href="mod-03.html#cb378-11" tabindex="-1"></a><span class="do">## [1] &quot;zebra&quot;</span></span>
<span id="cb378-12"><a href="mod-03.html#cb378-12" tabindex="-1"></a>a[[<span class="st">&quot;e1&quot;</span>]]</span>
<span id="cb378-13"><a href="mod-03.html#cb378-13" tabindex="-1"></a><span class="do">##  [1] 0.81537826 0.85151339 0.94974433 0.24860408 0.20883937 0.23072284</span></span>
<span id="cb378-14"><a href="mod-03.html#cb378-14" tabindex="-1"></a><span class="do">##  [7] 0.80287954 0.06142657 0.65110133 0.21388695</span></span>
<span id="cb378-15"><a href="mod-03.html#cb378-15" tabindex="-1"></a>a<span class="sc">$</span>e1</span>
<span id="cb378-16"><a href="mod-03.html#cb378-16" tabindex="-1"></a><span class="do">##  [1] 0.81537826 0.85151339 0.94974433 0.24860408 0.20883937 0.23072284</span></span>
<span id="cb378-17"><a href="mod-03.html#cb378-17" tabindex="-1"></a><span class="do">##  [7] 0.80287954 0.06142657 0.65110133 0.21388695</span></span></code></pre></div>
<p>Multiple elements of a list can be selected using <strong>single brackets</strong>. Doing so will return a new list containing the requested elements, <strong>not</strong> the requested elements themselves. This can be a little confusing. Compare the following two commands and notice that the first returns the 10 random numbers in the first element of <code>a</code>, while the second returns a list with 1 element, and that element is the numbers 1 through 10.</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="mod-03.html#cb379-1" tabindex="-1"></a>a[[<span class="dv">1</span>]]</span>
<span id="cb379-2"><a href="mod-03.html#cb379-2" tabindex="-1"></a><span class="do">##  [1] 0.81537826 0.85151339 0.94974433 0.24860408 0.20883937 0.23072284</span></span>
<span id="cb379-3"><a href="mod-03.html#cb379-3" tabindex="-1"></a><span class="do">##  [7] 0.80287954 0.06142657 0.65110133 0.21388695</span></span>
<span id="cb379-4"><a href="mod-03.html#cb379-4" tabindex="-1"></a>a[<span class="dv">1</span>]</span>
<span id="cb379-5"><a href="mod-03.html#cb379-5" tabindex="-1"></a><span class="do">## $e1</span></span>
<span id="cb379-6"><a href="mod-03.html#cb379-6" tabindex="-1"></a><span class="do">##  [1] 0.81537826 0.85151339 0.94974433 0.24860408 0.20883937 0.23072284</span></span>
<span id="cb379-7"><a href="mod-03.html#cb379-7" tabindex="-1"></a><span class="do">##  [7] 0.80287954 0.06142657 0.65110133 0.21388695</span></span></code></pre></div>
<p>Next, observe what happens when we select more than one element of the list <code>a</code>. The output is a list.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="mod-03.html#cb380-1" tabindex="-1"></a>a[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb380-2"><a href="mod-03.html#cb380-2" tabindex="-1"></a><span class="do">## $e1</span></span>
<span id="cb380-3"><a href="mod-03.html#cb380-3" tabindex="-1"></a><span class="do">##  [1] 0.81537826 0.85151339 0.94974433 0.24860408 0.20883937 0.23072284</span></span>
<span id="cb380-4"><a href="mod-03.html#cb380-4" tabindex="-1"></a><span class="do">##  [7] 0.80287954 0.06142657 0.65110133 0.21388695</span></span>
<span id="cb380-5"><a href="mod-03.html#cb380-5" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb380-6"><a href="mod-03.html#cb380-6" tabindex="-1"></a><span class="do">## $e2</span></span>
<span id="cb380-7"><a href="mod-03.html#cb380-7" tabindex="-1"></a><span class="do">## [1] &quot;zebra&quot;</span></span>
<span id="cb380-8"><a href="mod-03.html#cb380-8" tabindex="-1"></a><span class="fu">class</span>(a[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span>
<span id="cb380-9"><a href="mod-03.html#cb380-9" tabindex="-1"></a><span class="do">## [1] &quot;list&quot;</span></span></code></pre></div>
<p>The reason for this syntax is that the single brackets notation allows you to extract multiple elements of the list at once to quickly make a new list.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="mod-03.html#cb381-1" tabindex="-1"></a>a2 <span class="ot">&lt;-</span> a[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb381-2"><a href="mod-03.html#cb381-2" tabindex="-1"></a>a2</span>
<span id="cb381-3"><a href="mod-03.html#cb381-3" tabindex="-1"></a><span class="do">## $e1</span></span>
<span id="cb381-4"><a href="mod-03.html#cb381-4" tabindex="-1"></a><span class="do">##  [1] 0.81537826 0.85151339 0.94974433 0.24860408 0.20883937 0.23072284</span></span>
<span id="cb381-5"><a href="mod-03.html#cb381-5" tabindex="-1"></a><span class="do">##  [7] 0.80287954 0.06142657 0.65110133 0.21388695</span></span>
<span id="cb381-6"><a href="mod-03.html#cb381-6" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb381-7"><a href="mod-03.html#cb381-7" tabindex="-1"></a><span class="do">## $e2</span></span>
<span id="cb381-8"><a href="mod-03.html#cb381-8" tabindex="-1"></a><span class="do">## [1] &quot;zebra&quot;</span></span></code></pre></div>
</div>
</div>
<div id="extracting-and-selecting-data-with-logical-tests" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Extracting and selecting data with logical tests<a href="mod-03.html#extracting-and-selecting-data-with-logical-tests" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Selecting data from a data frame is one of the most common data manipulations. R offers several ways to accomplish this. One of the most fundamental is the function <code>which()</code>, returns the indices in a vector where a logical condition is <code>TRUE</code>. This means that you can select any piece of a dataset that can be identified logically. Consider the example below, which extracts the rows of the <code>iris</code> dataset where the variable <code>Species</code> matches the character string <code>"setosa"</code>.</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="mod-03.html#cb382-1" tabindex="-1"></a><span class="co"># not run (long output); try it on your machine!</span></span>
<span id="cb382-2"><a href="mod-03.html#cb382-2" tabindex="-1"></a>iris[<span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>),]</span></code></pre></div>
<p>In most situations, <code>which()</code> can be omitted because it is implicit in the command. However, not using it can sometimes produce strange results. Because of this, I always use <code>which()</code> in my code. Including <code>which()</code> can also make your code a little clearer to someone who is not familiar with R. For example, the two commands below are exactly equivalent:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="mod-03.html#cb383-1" tabindex="-1"></a><span class="co"># not run (long output); try it on your machine!</span></span>
<span id="cb383-2"><a href="mod-03.html#cb383-2" tabindex="-1"></a>iris[<span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>),]</span>
<span id="cb383-3"><a href="mod-03.html#cb383-3" tabindex="-1"></a>iris[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>,]</span></code></pre></div>
<p>What <code>which()</code> is really doing in the commands above is returning a vector of numbers. That vector is then used by the containing brackets <code>[]</code> to determine which pieces of the data frame to pull. The numbers returned by <code>which()</code> are the indices at which a logical vector is TRUE. Compare the results of the two commands below, which were used in the commands above to select from <code>iris</code>:</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="mod-03.html#cb384-1" tabindex="-1"></a><span class="co"># logical vector:</span></span>
<span id="cb384-2"><a href="mod-03.html#cb384-2" tabindex="-1"></a>iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span></span>
<span id="cb384-3"><a href="mod-03.html#cb384-3" tabindex="-1"></a><span class="do">##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</span></span>
<span id="cb384-4"><a href="mod-03.html#cb384-4" tabindex="-1"></a><span class="do">##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</span></span>
<span id="cb384-5"><a href="mod-03.html#cb384-5" tabindex="-1"></a><span class="do">##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</span></span>
<span id="cb384-6"><a href="mod-03.html#cb384-6" tabindex="-1"></a><span class="do">##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</span></span>
<span id="cb384-7"><a href="mod-03.html#cb384-7" tabindex="-1"></a><span class="do">##  [49]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-8"><a href="mod-03.html#cb384-8" tabindex="-1"></a><span class="do">##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-9"><a href="mod-03.html#cb384-9" tabindex="-1"></a><span class="do">##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-10"><a href="mod-03.html#cb384-10" tabindex="-1"></a><span class="do">##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-11"><a href="mod-03.html#cb384-11" tabindex="-1"></a><span class="do">##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-12"><a href="mod-03.html#cb384-12" tabindex="-1"></a><span class="do">## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-13"><a href="mod-03.html#cb384-13" tabindex="-1"></a><span class="do">## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-14"><a href="mod-03.html#cb384-14" tabindex="-1"></a><span class="do">## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-15"><a href="mod-03.html#cb384-15" tabindex="-1"></a><span class="do">## [145] FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb384-16"><a href="mod-03.html#cb384-16" tabindex="-1"></a></span>
<span id="cb384-17"><a href="mod-03.html#cb384-17" tabindex="-1"></a><span class="co"># which identifies which elements of vector are TRUE:</span></span>
<span id="cb384-18"><a href="mod-03.html#cb384-18" tabindex="-1"></a><span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>)</span>
<span id="cb384-19"><a href="mod-03.html#cb384-19" tabindex="-1"></a><span class="do">##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</span></span>
<span id="cb384-20"><a href="mod-03.html#cb384-20" tabindex="-1"></a><span class="do">## [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50</span></span></code></pre></div>
<p>Multiple conditions can be used to select data using the <code>&amp;</code> (and) and <code>|</code> (or) operators.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="mod-03.html#cb385-1" tabindex="-1"></a><span class="co"># not run (long output):</span></span>
<span id="cb385-2"><a href="mod-03.html#cb385-2" tabindex="-1"></a>iris[<span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span> <span class="sc">&amp;</span> iris<span class="sc">$</span>Petal.Length <span class="sc">&lt;=</span> <span class="dv">4</span>),]</span>
<span id="cb385-3"><a href="mod-03.html#cb385-3" tabindex="-1"></a>iris[<span class="fu">which</span>(iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span> <span class="sc">|</span> iris<span class="sc">$</span>Petal.Length <span class="sc">&lt;=</span> <span class="fl">1.6</span>),]</span></code></pre></div>
<p>The examples above could also be accomplished in several lines; in fact, splitting the selection criteria up can make for cleaner code. The commands below also show how splitting the selection commands up can help you abide by the “single point of definition” principle.</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="mod-03.html#cb386-1" tabindex="-1"></a><span class="co"># not run (long output):</span></span>
<span id="cb386-2"><a href="mod-03.html#cb386-2" tabindex="-1"></a>flag1 <span class="ot">&lt;-</span> iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span></span>
<span id="cb386-3"><a href="mod-03.html#cb386-3" tabindex="-1"></a>flag2 <span class="ot">&lt;-</span> iris<span class="sc">$</span>Petal.Length <span class="sc">&lt;=</span> <span class="dv">4</span></span>
<span id="cb386-4"><a href="mod-03.html#cb386-4" tabindex="-1"></a>iris[flag1 <span class="sc">&amp;</span> flag2,]</span>
<span id="cb386-5"><a href="mod-03.html#cb386-5" tabindex="-1"></a>iris[flag1 <span class="sc">|</span> flag2,]</span></code></pre></div>
<p>More than 2 conditions can be combined just as easily:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="mod-03.html#cb387-1" tabindex="-1"></a>flag1 <span class="ot">&lt;-</span> iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span></span>
<span id="cb387-2"><a href="mod-03.html#cb387-2" tabindex="-1"></a>flag2 <span class="ot">&lt;-</span> iris<span class="sc">$</span>Petal.Length <span class="sc">&lt;=</span> <span class="dv">4</span></span>
<span id="cb387-3"><a href="mod-03.html#cb387-3" tabindex="-1"></a>flag3 <span class="ot">&lt;-</span> iris<span class="sc">$</span>Petal.Length <span class="sc">&gt;</span> <span class="fl">0.5</span></span>
<span id="cb387-4"><a href="mod-03.html#cb387-4" tabindex="-1"></a>iris[flag1 <span class="sc">&amp;</span> flag2 <span class="sc">&amp;</span> flag3,]</span>
<span id="cb387-5"><a href="mod-03.html#cb387-5" tabindex="-1"></a><span class="do">##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species</span></span>
<span id="cb387-6"><a href="mod-03.html#cb387-6" tabindex="-1"></a><span class="do">## 54          5.5         2.3          4.0         1.3 versicolor</span></span>
<span id="cb387-7"><a href="mod-03.html#cb387-7" tabindex="-1"></a><span class="do">## 58          4.9         2.4          3.3         1.0 versicolor</span></span>
<span id="cb387-8"><a href="mod-03.html#cb387-8" tabindex="-1"></a><span class="do">## 60          5.2         2.7          3.9         1.4 versicolor</span></span>
<span id="cb387-9"><a href="mod-03.html#cb387-9" tabindex="-1"></a><span class="do">## 61          5.0         2.0          3.5         1.0 versicolor</span></span>
<span id="cb387-10"><a href="mod-03.html#cb387-10" tabindex="-1"></a><span class="do">## 63          6.0         2.2          4.0         1.0 versicolor</span></span>
<span id="cb387-11"><a href="mod-03.html#cb387-11" tabindex="-1"></a><span class="do">## 65          5.6         2.9          3.6         1.3 versicolor</span></span>
<span id="cb387-12"><a href="mod-03.html#cb387-12" tabindex="-1"></a><span class="do">## 70          5.6         2.5          3.9         1.1 versicolor</span></span>
<span id="cb387-13"><a href="mod-03.html#cb387-13" tabindex="-1"></a><span class="do">## 72          6.1         2.8          4.0         1.3 versicolor</span></span>
<span id="cb387-14"><a href="mod-03.html#cb387-14" tabindex="-1"></a><span class="do">## 80          5.7         2.6          3.5         1.0 versicolor</span></span>
<span id="cb387-15"><a href="mod-03.html#cb387-15" tabindex="-1"></a><span class="do">## 81          5.5         2.4          3.8         1.1 versicolor</span></span>
<span id="cb387-16"><a href="mod-03.html#cb387-16" tabindex="-1"></a><span class="do">## 82          5.5         2.4          3.7         1.0 versicolor</span></span>
<span id="cb387-17"><a href="mod-03.html#cb387-17" tabindex="-1"></a><span class="do">## 83          5.8         2.7          3.9         1.2 versicolor</span></span>
<span id="cb387-18"><a href="mod-03.html#cb387-18" tabindex="-1"></a><span class="do">## 90          5.5         2.5          4.0         1.3 versicolor</span></span>
<span id="cb387-19"><a href="mod-03.html#cb387-19" tabindex="-1"></a><span class="do">## 93          5.8         2.6          4.0         1.2 versicolor</span></span>
<span id="cb387-20"><a href="mod-03.html#cb387-20" tabindex="-1"></a><span class="do">## 94          5.0         2.3          3.3         1.0 versicolor</span></span>
<span id="cb387-21"><a href="mod-03.html#cb387-21" tabindex="-1"></a><span class="do">## 99          5.1         2.5          3.0         1.1 versicolor</span></span></code></pre></div>
<p>Selections can return 0 matches. This usually manifests as a data frame or matrix with 0 rows.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="mod-03.html#cb388-1" tabindex="-1"></a>flag1 <span class="ot">&lt;-</span> iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span></span>
<span id="cb388-2"><a href="mod-03.html#cb388-2" tabindex="-1"></a>flag2 <span class="ot">&lt;-</span> iris<span class="sc">$</span>Petal.Length <span class="sc">&lt;=</span> <span class="dv">1</span></span>
<span id="cb388-3"><a href="mod-03.html#cb388-3" tabindex="-1"></a>iris[flag1 <span class="sc">&amp;</span> flag2,]</span>
<span id="cb388-4"><a href="mod-03.html#cb388-4" tabindex="-1"></a><span class="do">## [1] Sepal.Length Sepal.Width  Petal.Length Petal.Width  Species     </span></span>
<span id="cb388-5"><a href="mod-03.html#cb388-5" tabindex="-1"></a><span class="do">## &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre></div>
<p>A related function is the binary operator<a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a> <code>%in%</code>. For a command like <code>A &amp;in% B</code>, R returns a vector of logical values for each element in A, indicating whether those values occur in B.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="mod-03.html#cb389-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>)</span>
<span id="cb389-2"><a href="mod-03.html#cb389-2" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>)</span>
<span id="cb389-3"><a href="mod-03.html#cb389-3" tabindex="-1"></a>A <span class="sc">%in%</span> B</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="mod-03.html#cb391-1" tabindex="-1"></a>B <span class="sc">%in%</span> A</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE</code></pre>
<p>One example of how this might be useful is if you want to select observations from a dataset containing one of several values. The example below illustrates this with <code>iris</code>:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="mod-03.html#cb393-1" tabindex="-1"></a><span class="co"># not run (long output):</span></span>
<span id="cb393-2"><a href="mod-03.html#cb393-2" tabindex="-1"></a>iris[iris<span class="sc">$</span>Species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;setosa&quot;</span>, <span class="st">&quot;versicolor&quot;</span>),]</span></code></pre></div>
<p>We’ll go over some more complicated selection methods in a future section, but what you’ve seen so far can be very powerful.</p>
</div>
</div>
<div id="managing-dates-and-characters" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Managing dates and characters<a href="mod-03.html#managing-dates-and-characters" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Most of the data we deal with in R are numbers, but textual and temporal data are important two. Working with dates, times, and character strings can be significantly more complicated than working with numbers…so, I’ve put together an entire page on it. I am the first to admit that the approaches demonstrated here are a little “old-school” compared to some of the newer packages. In particular, many people prefer the tidyverse package <code>lubridate</code> <span class="citation">(<a href="#ref-grolemund2011">Grolemund and Wickham 2011</a>)</span> for temporal data. Much of this guide is based on <span class="citation">Spector (<a href="#ref-spector2008">2008</a>)</span>.</p>
<div id="temporal-data-and-dates" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Temporal data and dates<a href="mod-03.html#temporal-data-and-dates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Temporal data can be read and interpreted by R in many formats. The general rule is to use the simplest way that you can, because the date and time classes can be very complicated. For example, don’t store date and time if you only need date. This doesn’t mean to discard potentially useful data; just to be judicious in what you import to and try to manipulate in R.</p>
<p>It should be noted that the easiest way to deal with dates and times is “don’t”. In many situations it’s actually not necessary to use temporal data classes. For example, if a field study was conducted in two years, and there is no temporal component to the question, it might be sufficient to just call the years <code>year1</code> and <code>year2</code> in the dataset. Or, if an elapsed time is used as a variable, it might make more sense to store the elapsed time (e.g., 10 minutes, 11.2 minutes, etc.) rather than use full date/time codes for each observation time.</p>
<div id="dates-without-times" class="section level4 hasAnchor" number="3.4.1.1">
<h4><span class="header-section-number">3.4.1.1</span> Dates without times<a href="mod-03.html#dates-without-times" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The easiest way to handle dates is to use the base function <code>as.Date()</code>. This function converts character strings to the R date format. This implies that you will have a much easier time if you send dates to R in YYYY-MM-DD format. You can do this in Excel by setting a custom number format. Once in R, use <code>as.Date()</code> to convert your properly-formatted text strings into date objects. Once converted, R can do simple arithmetic such as finding intervals between dates.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="mod-03.html#cb394-1" tabindex="-1"></a><span class="co"># enter dates as text strings</span></span>
<span id="cb394-2"><a href="mod-03.html#cb394-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2021-07-23&quot;</span>, <span class="st">&quot;2021-08-01&quot;</span>, <span class="st">&quot;2021-09-03&quot;</span>)</span>
<span id="cb394-3"><a href="mod-03.html#cb394-3" tabindex="-1"></a></span>
<span id="cb394-4"><a href="mod-03.html#cb394-4" tabindex="-1"></a><span class="co"># convert to date</span></span>
<span id="cb394-5"><a href="mod-03.html#cb394-5" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(a)</span>
<span id="cb394-6"><a href="mod-03.html#cb394-6" tabindex="-1"></a></span>
<span id="cb394-7"><a href="mod-03.html#cb394-7" tabindex="-1"></a><span class="co"># check classes</span></span>
<span id="cb394-8"><a href="mod-03.html#cb394-8" tabindex="-1"></a><span class="fu">class</span>(a)</span>
<span id="cb394-9"><a href="mod-03.html#cb394-9" tabindex="-1"></a><span class="do">## [1] &quot;character&quot;</span></span>
<span id="cb394-10"><a href="mod-03.html#cb394-10" tabindex="-1"></a><span class="fu">class</span>(b)</span>
<span id="cb394-11"><a href="mod-03.html#cb394-11" tabindex="-1"></a><span class="do">## [1] &quot;Date&quot;</span></span>
<span id="cb394-12"><a href="mod-03.html#cb394-12" tabindex="-1"></a></span>
<span id="cb394-13"><a href="mod-03.html#cb394-13" tabindex="-1"></a><span class="co"># can do math with dates!</span></span>
<span id="cb394-14"><a href="mod-03.html#cb394-14" tabindex="-1"></a>b[<span class="dv">2</span>] <span class="sc">-</span> b[<span class="dv">1</span>]</span>
<span id="cb394-15"><a href="mod-03.html#cb394-15" tabindex="-1"></a><span class="do">## Time difference of 9 days</span></span></code></pre></div>
<p>The examples above use the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 date format</a>, Year-Month-Day (or YYYY-MM-DD). This format has the advantage that sorting it alphanumerically is the same as sorting it chronologically. Each element has a fixed number of digits to avoid issues like January and October (months 1 and 10) being sorted next to each other.</p>
<p>I suggest that you get in the habit of storing dates this way. This format is the default date format in R (and many other programs), such that R can read dates in this format without additional arguments. If you insist on storing dates in other formats, you can still read those dates into R. You just need to tell <code>as.Date()</code> the format that the date is in. The syntax for formatting dates and times is handled by the function <code>strptime()</code> (see <code>?strptime</code> for more examples). Something common to all of the formats below is that each element has a <em>fixed number of digits</em>, 4 for year and 2 for month or day. This is to avoid ambiguity: does “7/2/2019” “July second, 2019”, or “February 7, 2019”?. This also avoids issues arising from treating numbers as character strings. For example, January and October (months 1 and 10) might be sorted next to each other unless represented by “01” and “10” instead of “1” and “10”.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="mod-03.html#cb395-1" tabindex="-1"></a><span class="co"># YYYYMMDD</span></span>
<span id="cb395-2"><a href="mod-03.html#cb395-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">&quot;20210721&quot;</span></span>
<span id="cb395-3"><a href="mod-03.html#cb395-3" tabindex="-1"></a><span class="fu">as.Date</span>(a, <span class="st">&quot;%Y%m%d&quot;</span>)</span>
<span id="cb395-4"><a href="mod-03.html#cb395-4" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-21&quot;</span></span>
<span id="cb395-5"><a href="mod-03.html#cb395-5" tabindex="-1"></a></span>
<span id="cb395-6"><a href="mod-03.html#cb395-6" tabindex="-1"></a><span class="co"># MMDDYYYY</span></span>
<span id="cb395-7"><a href="mod-03.html#cb395-7" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">&quot;07212021&quot;</span></span>
<span id="cb395-8"><a href="mod-03.html#cb395-8" tabindex="-1"></a><span class="fu">as.Date</span>(a, <span class="st">&quot;%m%d%Y&quot;</span>)</span>
<span id="cb395-9"><a href="mod-03.html#cb395-9" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-21&quot;</span></span>
<span id="cb395-10"><a href="mod-03.html#cb395-10" tabindex="-1"></a></span>
<span id="cb395-11"><a href="mod-03.html#cb395-11" tabindex="-1"></a><span class="co"># MM/DD/YYYY</span></span>
<span id="cb395-12"><a href="mod-03.html#cb395-12" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">&quot;07/21/2021&quot;</span></span>
<span id="cb395-13"><a href="mod-03.html#cb395-13" tabindex="-1"></a><span class="fu">as.Date</span>(a, <span class="st">&quot;%m/%d/%Y&quot;</span>)</span>
<span id="cb395-14"><a href="mod-03.html#cb395-14" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-21&quot;</span></span>
<span id="cb395-15"><a href="mod-03.html#cb395-15" tabindex="-1"></a></span>
<span id="cb395-16"><a href="mod-03.html#cb395-16" tabindex="-1"></a><span class="co"># DD-MM-YYYY</span></span>
<span id="cb395-17"><a href="mod-03.html#cb395-17" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">&quot;21-07-2021&quot;</span></span>
<span id="cb395-18"><a href="mod-03.html#cb395-18" tabindex="-1"></a><span class="fu">as.Date</span>(a, <span class="st">&quot;%d-%m-%Y&quot;</span>)</span>
<span id="cb395-19"><a href="mod-03.html#cb395-19" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-21&quot;</span></span></code></pre></div>
<p>An even simpler option for dates, if all dates are within the same year, is to use Julian dates (i.e., day-of-year). If you want to read Julian dates into R as dates, you can also use <code>as.Date()</code>. Notice in the example below that the Julian dates must be supplied as <em>character strings with 3 digits</em>, not as numerals. Notice also that R assigns the current year (2021) to the dates unless you specifically tell it to do something else.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="mod-03.html#cb396-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">c</span>(<span class="dv">204</span>, <span class="dv">213</span>, <span class="dv">246</span>))</span>
<span id="cb396-2"><a href="mod-03.html#cb396-2" tabindex="-1"></a><span class="fu">as.Date</span>(a, <span class="st">&quot;%j&quot;</span>)</span>
<span id="cb396-3"><a href="mod-03.html#cb396-3" tabindex="-1"></a><span class="do">## [1] &quot;2024-07-22&quot; &quot;2024-07-31&quot; &quot;2024-09-02&quot;</span></span>
<span id="cb396-4"><a href="mod-03.html#cb396-4" tabindex="-1"></a></span>
<span id="cb396-5"><a href="mod-03.html#cb396-5" tabindex="-1"></a><span class="do">## not run:</span></span>
<span id="cb396-6"><a href="mod-03.html#cb396-6" tabindex="-1"></a><span class="do">## causes error because nchar(&quot;15&quot;) &lt; 3:</span></span>
<span id="cb396-7"><a href="mod-03.html#cb396-7" tabindex="-1"></a><span class="co">#a &lt;- c(15, 204, 213, 246)</span></span>
<span id="cb396-8"><a href="mod-03.html#cb396-8" tabindex="-1"></a><span class="co">#as.Date(a, &quot;%j&quot;)</span></span>
<span id="cb396-9"><a href="mod-03.html#cb396-9" tabindex="-1"></a></span>
<span id="cb396-10"><a href="mod-03.html#cb396-10" tabindex="-1"></a><span class="co"># convert all numbers to 3 digit</span></span>
<span id="cb396-11"><a href="mod-03.html#cb396-11" tabindex="-1"></a><span class="co"># character strings first with formatC():</span></span>
<span id="cb396-12"><a href="mod-03.html#cb396-12" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">204</span>, <span class="dv">213</span>, <span class="dv">246</span>)</span>
<span id="cb396-13"><a href="mod-03.html#cb396-13" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">formatC</span>(a, <span class="at">width=</span><span class="dv">3</span>, <span class="at">flag=</span><span class="st">&quot;0&quot;</span>)</span>
<span id="cb396-14"><a href="mod-03.html#cb396-14" tabindex="-1"></a><span class="fu">as.Date</span>(x, <span class="st">&quot;%j&quot;</span>)</span>
<span id="cb396-15"><a href="mod-03.html#cb396-15" tabindex="-1"></a><span class="do">## [1] &quot;2024-01-15&quot; &quot;2024-07-22&quot; &quot;2024-07-31&quot; &quot;2024-09-02&quot;</span></span></code></pre></div>
<p>Dates can be reformatted using the function <code>format()</code>. Notice that the output is a character string, not a date. The syntax for the conversion comes from <code>strptime()</code>, just as with <code>as.Date()</code> above. If you need to use a formatted date (character string) as a date (R class) you need to convert it with <code>as.Date()</code>.</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="mod-03.html#cb397-1" tabindex="-1"></a><span class="co"># make some dates as character strings and convert to date</span></span>
<span id="cb397-2"><a href="mod-03.html#cb397-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2021-07-23&quot;</span>, <span class="st">&quot;2021-08-01&quot;</span>, <span class="st">&quot;2021-09-03&quot;</span>)</span>
<span id="cb397-3"><a href="mod-03.html#cb397-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(a)</span>
<span id="cb397-4"><a href="mod-03.html#cb397-4" tabindex="-1"></a></span>
<span id="cb397-5"><a href="mod-03.html#cb397-5" tabindex="-1"></a><span class="co"># Julian day (day of year), as character</span></span>
<span id="cb397-6"><a href="mod-03.html#cb397-6" tabindex="-1"></a><span class="fu">format</span>(x, <span class="st">&quot;%j&quot;</span>)</span>
<span id="cb397-7"><a href="mod-03.html#cb397-7" tabindex="-1"></a><span class="do">## [1] &quot;204&quot; &quot;213&quot; &quot;246&quot;</span></span>
<span id="cb397-8"><a href="mod-03.html#cb397-8" tabindex="-1"></a><span class="co"># as number</span></span>
<span id="cb397-9"><a href="mod-03.html#cb397-9" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">format</span>(x, <span class="st">&quot;%j&quot;</span>))</span>
<span id="cb397-10"><a href="mod-03.html#cb397-10" tabindex="-1"></a><span class="do">## [1] 204 213 246</span></span>
<span id="cb397-11"><a href="mod-03.html#cb397-11" tabindex="-1"></a></span>
<span id="cb397-12"><a href="mod-03.html#cb397-12" tabindex="-1"></a><span class="co"># ISO format</span></span>
<span id="cb397-13"><a href="mod-03.html#cb397-13" tabindex="-1"></a><span class="fu">format</span>(x, <span class="st">&quot;%Y-%m-%d&quot;</span>)</span>
<span id="cb397-14"><a href="mod-03.html#cb397-14" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-23&quot; &quot;2021-08-01&quot; &quot;2021-09-03&quot;</span></span>
<span id="cb397-15"><a href="mod-03.html#cb397-15" tabindex="-1"></a></span>
<span id="cb397-16"><a href="mod-03.html#cb397-16" tabindex="-1"></a><span class="co"># use month abbreviations, separate by slashes</span></span>
<span id="cb397-17"><a href="mod-03.html#cb397-17" tabindex="-1"></a><span class="fu">format</span>(x, <span class="st">&quot;%b/%d/%y&quot;</span>)</span>
<span id="cb397-18"><a href="mod-03.html#cb397-18" tabindex="-1"></a><span class="do">## [1] &quot;Jul/23/21&quot; &quot;Aug/01/21&quot; &quot;Sep/03/21&quot;</span></span></code></pre></div>
</div>
<div id="dates-with-times-and-time-zones" class="section level4 hasAnchor" number="3.4.1.2">
<h4><span class="header-section-number">3.4.1.2</span> Dates with times (and time zones)<a href="mod-03.html#dates-with-times-and-time-zones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><a href="https://en.wikipedia.org/wiki/Here_be_dragons">Here be dragons</a>.</p>
<p>Things get more complicated when time is included with a date, but the basic procedures are the same as date-only data. By default, R assumes that times are in the time zone of the current user. So, if you are collaborating with someone in a different time zone, you need to account for time zone in your code. Another default behavior is that R will assume that times without dates are on the current day.</p>
<p>The main function for working with dates <em>and</em> times is <code>strptime()</code>. This function takes in a character vector and a format argument, which tells R how the character vector is formatted. It returns objects of class <code>POSIXlt</code> and <code>POSIXt</code>, which contain date and time information in a standardized way.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="mod-03.html#cb398-1" tabindex="-1"></a><span class="co"># create some times as character strings</span></span>
<span id="cb398-2"><a href="mod-03.html#cb398-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;01:15:03&quot;</span>, <span class="st">&quot;14:28:21&quot;</span>)</span>
<span id="cb398-3"><a href="mod-03.html#cb398-3" tabindex="-1"></a></span>
<span id="cb398-4"><a href="mod-03.html#cb398-4" tabindex="-1"></a><span class="co"># time with seconds</span></span>
<span id="cb398-5"><a href="mod-03.html#cb398-5" tabindex="-1"></a><span class="fu">strptime</span>(a, <span class="at">format=</span><span class="st">&quot;%H:%M:%S&quot;</span>)</span>
<span id="cb398-6"><a href="mod-03.html#cb398-6" tabindex="-1"></a><span class="do">## [1] &quot;2024-08-22 01:15:03 EDT&quot; &quot;2024-08-22 14:28:21 EDT&quot;</span></span>
<span id="cb398-7"><a href="mod-03.html#cb398-7" tabindex="-1"></a></span>
<span id="cb398-8"><a href="mod-03.html#cb398-8" tabindex="-1"></a><span class="co"># time with seconds dropped</span></span>
<span id="cb398-9"><a href="mod-03.html#cb398-9" tabindex="-1"></a><span class="fu">strptime</span>(a, <span class="at">format=</span><span class="st">&quot;%H:%M&quot;</span>)    <span class="co"># seconds dropped</span></span>
<span id="cb398-10"><a href="mod-03.html#cb398-10" tabindex="-1"></a><span class="do">## [1] &quot;2024-08-22 01:15:00 EDT&quot; &quot;2024-08-22 14:28:00 EDT&quot;</span></span></code></pre></div>
<p>Notice that the current date was included in the result of <code>strptime()</code> (at least, the date when I rendered this page with R Markdown).</p>
<p>Time zones should be specified when working with data that contain dates and times. Remember that R will assume the time is in the current user’s time zone. This almost always means the time zone used by the operating system in which R is running. If you did something silly like record data in one time zone and analyze it in another, you have to be careful. For example, I once ran a field study in Indiana where data were recorded in Eastern time. But, the office where I analyzed the data was in Missouri (Central time). R kept converting the time-stamped data to Central time, which interfered with the analysis until I learned how to work with time zones in R. To make things worse, data were recorded in the summer (Eastern daylight time) but analyzed in both early fall (Central daylight time) and late fall (Central standard time).</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="mod-03.html#cb399-1" tabindex="-1"></a><span class="co"># make some date-times and convert to date-time class</span></span>
<span id="cb399-2"><a href="mod-03.html#cb399-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2021-07-23 13:21&quot;</span>, <span class="st">&quot;2021-08-01 09:15&quot;</span>)</span>
<span id="cb399-3"><a href="mod-03.html#cb399-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">strptime</span>(a, <span class="st">&quot;%Y-%m-%d %H:%M&quot;</span>)</span>
<span id="cb399-4"><a href="mod-03.html#cb399-4" tabindex="-1"></a>x</span>
<span id="cb399-5"><a href="mod-03.html#cb399-5" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-23 13:21:00 EDT&quot; &quot;2021-08-01 09:15:00 EDT&quot;</span></span>
<span id="cb399-6"><a href="mod-03.html#cb399-6" tabindex="-1"></a></span>
<span id="cb399-7"><a href="mod-03.html#cb399-7" tabindex="-1"></a><span class="co"># times without dates will be assigned current date:</span></span>
<span id="cb399-8"><a href="mod-03.html#cb399-8" tabindex="-1"></a>a2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;13:21&quot;</span>, <span class="st">&quot;09:15&quot;</span>)</span>
<span id="cb399-9"><a href="mod-03.html#cb399-9" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">strptime</span>(a2, <span class="st">&quot;%H:%M&quot;</span>)</span>
<span id="cb399-10"><a href="mod-03.html#cb399-10" tabindex="-1"></a>x2</span>
<span id="cb399-11"><a href="mod-03.html#cb399-11" tabindex="-1"></a><span class="do">## [1] &quot;2024-08-22 13:21:00 EDT&quot; &quot;2024-08-22 09:15:00 EDT&quot;</span></span></code></pre></div>
<p>Time zone names are not always portable across systems. R has a list of built-in time zones that it can handle, and these should work, but be careful and <strong><em>always</em></strong> validate any code that depends on time zones. The list of time zones R can use can be printed to the console with the command <code>OlsonNames()</code>.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="mod-03.html#cb400-1" tabindex="-1"></a><span class="co"># US Central Daylight Time (5 hours behind UTC)</span></span>
<span id="cb400-2"><a href="mod-03.html#cb400-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2021-07-23 13:21&quot;</span>, <span class="st">&quot;2021-08-01 09:15&quot;</span>)</span>
<span id="cb400-3"><a href="mod-03.html#cb400-3" tabindex="-1"></a></span>
<span id="cb400-4"><a href="mod-03.html#cb400-4" tabindex="-1"></a><span class="co"># strptime() will assign whatever time zone you enter:</span></span>
<span id="cb400-5"><a href="mod-03.html#cb400-5" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">strptime</span>(a, <span class="st">&quot;%Y-%m-%d %H:%M&quot;</span>, <span class="at">tz=</span><span class="st">&quot;US/Eastern&quot;</span>)</span>
<span id="cb400-6"><a href="mod-03.html#cb400-6" tabindex="-1"></a>b</span>
<span id="cb400-7"><a href="mod-03.html#cb400-7" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-23 13:21:00 EDT&quot; &quot;2021-08-01 09:15:00 EDT&quot;</span></span>
<span id="cb400-8"><a href="mod-03.html#cb400-8" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">strptime</span>(a, <span class="st">&quot;%Y-%m-%d %H:%M&quot;</span>, <span class="at">tz=</span><span class="st">&quot;US/Central&quot;</span>)</span>
<span id="cb400-9"><a href="mod-03.html#cb400-9" tabindex="-1"></a>b</span>
<span id="cb400-10"><a href="mod-03.html#cb400-10" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-23 13:21:00 CDT&quot; &quot;2021-08-01 09:15:00 CDT&quot;</span></span></code></pre></div>
<p>Internally, dates and times are stored as the number of seconds elapsed since midnight (00:00 hours) on 1 January 1970, in UTC. You can see these values with <code>as.numeric()</code>. The time zone of a value affects what is printed to the console. That time zone is stored by R as an <strong>attribute</strong> of the value. Attributes are a kind of metadata associated with some R data types that can be accessed with <code>attributes()</code>.</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="mod-03.html#cb401-1" tabindex="-1"></a><span class="fu">attributes</span>(b)<span class="sc">$</span>tzone</span></code></pre></div>
<pre><code>## [1] &quot;US/Central&quot; &quot;CST&quot;        &quot;CDT&quot;</code></pre>
<p>To change the time zone associated with value, simply set the attribute to the desired time zone. This is basically telling R the time zone that a date and time refer to. Note that will change the actual value of a date/time. It does NOT translate times in one time zone to another.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="mod-03.html#cb403-1" tabindex="-1"></a><span class="fu">as.numeric</span>(b)</span>
<span id="cb403-2"><a href="mod-03.html#cb403-2" tabindex="-1"></a><span class="do">## [1] 1627064460 1627827300</span></span>
<span id="cb403-3"><a href="mod-03.html#cb403-3" tabindex="-1"></a><span class="fu">attr</span>(b, <span class="st">&quot;tzone&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;America/Los_Angeles&quot;</span></span>
<span id="cb403-4"><a href="mod-03.html#cb403-4" tabindex="-1"></a></span>
<span id="cb403-5"><a href="mod-03.html#cb403-5" tabindex="-1"></a><span class="co"># different by 7200 seconds (2 hours)</span></span>
<span id="cb403-6"><a href="mod-03.html#cb403-6" tabindex="-1"></a><span class="fu">as.numeric</span>(b)</span>
<span id="cb403-7"><a href="mod-03.html#cb403-7" tabindex="-1"></a><span class="do">## [1] 1627071660 1627834500</span></span></code></pre></div>
<p>To convert one time zone to another, the values must first be converted to the <code>POSIXct</code> class.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="mod-03.html#cb404-1" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">strptime</span>(a, <span class="st">&quot;%Y-%m-%d %H:%M&quot;</span>, <span class="at">tz=</span><span class="st">&quot;US/Central&quot;</span>)</span>
<span id="cb404-2"><a href="mod-03.html#cb404-2" tabindex="-1"></a>b2 <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(b)</span>
<span id="cb404-3"><a href="mod-03.html#cb404-3" tabindex="-1"></a></span>
<span id="cb404-4"><a href="mod-03.html#cb404-4" tabindex="-1"></a><span class="co"># check time zone</span></span>
<span id="cb404-5"><a href="mod-03.html#cb404-5" tabindex="-1"></a><span class="fu">attributes</span>(b2)<span class="sc">$</span>tzone</span>
<span id="cb404-6"><a href="mod-03.html#cb404-6" tabindex="-1"></a><span class="do">## [1] &quot;US/Central&quot;</span></span>
<span id="cb404-7"><a href="mod-03.html#cb404-7" tabindex="-1"></a></span>
<span id="cb404-8"><a href="mod-03.html#cb404-8" tabindex="-1"></a><span class="co"># check actual time (seconds since epoch)</span></span>
<span id="cb404-9"><a href="mod-03.html#cb404-9" tabindex="-1"></a><span class="fu">as.numeric</span>(b2)</span>
<span id="cb404-10"><a href="mod-03.html#cb404-10" tabindex="-1"></a><span class="do">## [1] 1627064460 1627827300</span></span>
<span id="cb404-11"><a href="mod-03.html#cb404-11" tabindex="-1"></a></span>
<span id="cb404-12"><a href="mod-03.html#cb404-12" tabindex="-1"></a><span class="co"># change time zone of POSIXct object</span></span>
<span id="cb404-13"><a href="mod-03.html#cb404-13" tabindex="-1"></a><span class="fu">attr</span>(b2, <span class="st">&quot;tzone&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;Europe/London&quot;</span></span>
<span id="cb404-14"><a href="mod-03.html#cb404-14" tabindex="-1"></a></span>
<span id="cb404-15"><a href="mod-03.html#cb404-15" tabindex="-1"></a><span class="co"># actual time same as before:</span></span>
<span id="cb404-16"><a href="mod-03.html#cb404-16" tabindex="-1"></a><span class="fu">as.numeric</span>(b2)</span>
<span id="cb404-17"><a href="mod-03.html#cb404-17" tabindex="-1"></a><span class="do">## [1] 1627064460 1627827300</span></span></code></pre></div>
</div>
<div id="working-with-dates-and-times" class="section level4 hasAnchor" number="3.4.1.3">
<h4><span class="header-section-number">3.4.1.3</span> Working with dates and times<a href="mod-03.html#working-with-dates-and-times" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Why should we go through all of this trouble to format dates and times as dates and times? The answer is that R can perform many useful calculations with dates and times. One of these is time intervals by using subtraction or the function <code>difftime()</code>. Subtracting two date/times will return an answer but perhaps not in the units you want; use <code>difftime()</code> if you want to specify the units.</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="mod-03.html#cb405-1" tabindex="-1"></a><span class="co"># how many days, hours, and minutes until Dr. Green can retire?</span></span>
<span id="cb405-2"><a href="mod-03.html#cb405-2" tabindex="-1"></a></span>
<span id="cb405-3"><a href="mod-03.html#cb405-3" tabindex="-1"></a><span class="do">## current time:</span></span>
<span id="cb405-4"><a href="mod-03.html#cb405-4" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb405-5"><a href="mod-03.html#cb405-5" tabindex="-1"></a></span>
<span id="cb405-6"><a href="mod-03.html#cb405-6" tabindex="-1"></a><span class="do">## retirement date per USG:</span></span>
<span id="cb405-7"><a href="mod-03.html#cb405-7" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="st">&quot;2048-07-01 00:00&quot;</span></span>
<span id="cb405-8"><a href="mod-03.html#cb405-8" tabindex="-1"></a></span>
<span id="cb405-9"><a href="mod-03.html#cb405-9" tabindex="-1"></a><span class="do">## convert to POSIXlt</span></span>
<span id="cb405-10"><a href="mod-03.html#cb405-10" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">strptime</span>(a, <span class="st">&quot;%Y-%m-%d %H:%M&quot;</span>)</span>
<span id="cb405-11"><a href="mod-03.html#cb405-11" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">strptime</span>(b, <span class="st">&quot;%Y-%m-%d %H:%M&quot;</span>)</span>
<span id="cb405-12"><a href="mod-03.html#cb405-12" tabindex="-1"></a></span>
<span id="cb405-13"><a href="mod-03.html#cb405-13" tabindex="-1"></a><span class="do">## calculate time in different units:</span></span>
<span id="cb405-14"><a href="mod-03.html#cb405-14" tabindex="-1"></a><span class="fu">difftime</span>(y,x, <span class="at">units=</span><span class="st">&quot;days&quot;</span>)</span>
<span id="cb405-15"><a href="mod-03.html#cb405-15" tabindex="-1"></a><span class="do">## Time difference of 8713.31 days</span></span>
<span id="cb405-16"><a href="mod-03.html#cb405-16" tabindex="-1"></a><span class="fu">difftime</span>(y,x, <span class="at">units=</span><span class="st">&quot;hours&quot;</span>)</span>
<span id="cb405-17"><a href="mod-03.html#cb405-17" tabindex="-1"></a><span class="do">## Time difference of 209119.4 hours</span></span>
<span id="cb405-18"><a href="mod-03.html#cb405-18" tabindex="-1"></a><span class="fu">difftime</span>(y,x, <span class="at">units=</span><span class="st">&quot;mins&quot;</span>)</span>
<span id="cb405-19"><a href="mod-03.html#cb405-19" tabindex="-1"></a><span class="do">## Time difference of 12547166 mins</span></span>
<span id="cb405-20"><a href="mod-03.html#cb405-20" tabindex="-1"></a>y<span class="sc">-</span>x</span>
<span id="cb405-21"><a href="mod-03.html#cb405-21" tabindex="-1"></a><span class="do">## Time difference of 8713.31 days</span></span></code></pre></div>
<p>Another application: what is the time difference between Chicago and Honolulu?</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="mod-03.html#cb406-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2021-07-23 13:21&quot;</span>)</span>
<span id="cb406-2"><a href="mod-03.html#cb406-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">strptime</span>(a, <span class="st">&quot;%Y-%m-%d %H:%M&quot;</span>, <span class="at">tz=</span><span class="st">&quot;US/Central&quot;</span>)</span>
<span id="cb406-3"><a href="mod-03.html#cb406-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">strptime</span>(a, <span class="st">&quot;%Y-%m-%d %H:%M&quot;</span>, <span class="at">tz=</span><span class="st">&quot;US/Hawaii&quot;</span>)</span>
<span id="cb406-4"><a href="mod-03.html#cb406-4" tabindex="-1"></a><span class="fu">difftime</span>(x,y)</span></code></pre></div>
<pre><code>## Time difference of -5 hours</code></pre>
<p>Oddly, <code>difftime()</code> cannot return years. This is probably because there are <a href="https://en.wikipedia.org/wiki/Year">different types of years</a> (sidereal, tropical, anomalistic, lunar, etc.). You can convert a time difference in days to one in years by dividing by the number of days in the kind of year you want. The example below converts to does this and changes the “units” attribute of the difftime output to match.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="mod-03.html#cb408-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">difftime</span>(y,x, <span class="at">units=</span><span class="st">&quot;days&quot;</span>)</span>
<span id="cb408-2"><a href="mod-03.html#cb408-2" tabindex="-1"></a></span>
<span id="cb408-3"><a href="mod-03.html#cb408-3" tabindex="-1"></a><span class="co"># julian year</span></span>
<span id="cb408-4"><a href="mod-03.html#cb408-4" tabindex="-1"></a>d <span class="ot">&lt;-</span> d<span class="sc">/</span><span class="fl">365.25</span></span>
<span id="cb408-5"><a href="mod-03.html#cb408-5" tabindex="-1"></a><span class="fu">attr</span>(d, <span class="st">&quot;units&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;years&quot;</span></span>
<span id="cb408-6"><a href="mod-03.html#cb408-6" tabindex="-1"></a>d</span>
<span id="cb408-7"><a href="mod-03.html#cb408-7" tabindex="-1"></a><span class="do">## Time difference of 0.0005703856 years</span></span></code></pre></div>
<p>The Julian year is useful because it is defined in terms of an SI units as 31557600 seconds, or 365.25 days<a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a>. Most of the alternative years at the link above vary by less than a few minutes.</p>
<p>R can also generate regular sequences of dates and times just like it can numeric values. See <code>?seq.date</code> for details and syntax.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="mod-03.html#cb409-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;2021-07-23&quot;</span>)</span>
<span id="cb409-2"><a href="mod-03.html#cb409-2" tabindex="-1"></a><span class="fu">seq</span>(a, <span class="at">by=</span><span class="st">&quot;day&quot;</span>, <span class="at">length=</span><span class="dv">10</span>)</span>
<span id="cb409-3"><a href="mod-03.html#cb409-3" tabindex="-1"></a><span class="do">##  [1] &quot;2021-07-23&quot; &quot;2021-07-24&quot; &quot;2021-07-25&quot; &quot;2021-07-26&quot; &quot;2021-07-27&quot;</span></span>
<span id="cb409-4"><a href="mod-03.html#cb409-4" tabindex="-1"></a><span class="do">##  [6] &quot;2021-07-28&quot; &quot;2021-07-29&quot; &quot;2021-07-30&quot; &quot;2021-07-31&quot; &quot;2021-08-01&quot;</span></span>
<span id="cb409-5"><a href="mod-03.html#cb409-5" tabindex="-1"></a><span class="fu">seq</span>(a, <span class="at">by=</span><span class="st">&quot;days&quot;</span>, <span class="at">length=</span><span class="dv">6</span>)</span>
<span id="cb409-6"><a href="mod-03.html#cb409-6" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-23&quot; &quot;2021-07-24&quot; &quot;2021-07-25&quot; &quot;2021-07-26&quot; &quot;2021-07-27&quot;</span></span>
<span id="cb409-7"><a href="mod-03.html#cb409-7" tabindex="-1"></a><span class="do">## [6] &quot;2021-07-28&quot;</span></span>
<span id="cb409-8"><a href="mod-03.html#cb409-8" tabindex="-1"></a><span class="fu">seq</span>(a, <span class="at">by=</span><span class="st">&quot;week&quot;</span>, <span class="at">length=</span><span class="dv">10</span>)</span>
<span id="cb409-9"><a href="mod-03.html#cb409-9" tabindex="-1"></a><span class="do">##  [1] &quot;2021-07-23&quot; &quot;2021-07-30&quot; &quot;2021-08-06&quot; &quot;2021-08-13&quot; &quot;2021-08-20&quot;</span></span>
<span id="cb409-10"><a href="mod-03.html#cb409-10" tabindex="-1"></a><span class="do">##  [6] &quot;2021-08-27&quot; &quot;2021-09-03&quot; &quot;2021-09-10&quot; &quot;2021-09-17&quot; &quot;2021-09-24&quot;</span></span>
<span id="cb409-11"><a href="mod-03.html#cb409-11" tabindex="-1"></a><span class="fu">seq</span>(a, <span class="at">by=</span><span class="st">&quot;6 weeks&quot;</span>, <span class="at">length=</span><span class="dv">10</span>)</span>
<span id="cb409-12"><a href="mod-03.html#cb409-12" tabindex="-1"></a><span class="do">##  [1] &quot;2021-07-23&quot; &quot;2021-09-03&quot; &quot;2021-10-15&quot; &quot;2021-11-26&quot; &quot;2022-01-07&quot;</span></span>
<span id="cb409-13"><a href="mod-03.html#cb409-13" tabindex="-1"></a><span class="do">##  [6] &quot;2022-02-18&quot; &quot;2022-04-01&quot; &quot;2022-05-13&quot; &quot;2022-06-24&quot; &quot;2022-08-05&quot;</span></span>
<span id="cb409-14"><a href="mod-03.html#cb409-14" tabindex="-1"></a><span class="fu">seq</span>(a, <span class="at">by=</span><span class="st">&quot;-4 weeks&quot;</span>, <span class="at">length=</span><span class="dv">5</span>)</span>
<span id="cb409-15"><a href="mod-03.html#cb409-15" tabindex="-1"></a><span class="do">## [1] &quot;2021-07-23&quot; &quot;2021-06-25&quot; &quot;2021-05-28&quot; &quot;2021-04-30&quot; &quot;2021-04-02&quot;</span></span></code></pre></div>
</div>
</div>
<div id="character-data-text" class="section level3 hasAnchor" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Character data (text)<a href="mod-03.html#character-data-text" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Recall from earlier that “character” is just another <strong>type</strong> of data in R–the type that contains text. This means that text values can be stored and manipulated in many of the same ways as numeric data. The vectorized functions in R can make managing your text-based data very fast and efficient.</p>
<p>A value containing text, or stored as text, is called a <strong>character string</strong>. Character strings can be stored in many R objects. A set of character strings is called a <strong>character vector</strong>.</p>
<div id="combining-character-strings" class="section level4 hasAnchor" number="3.4.2.1">
<h4><span class="header-section-number">3.4.2.1</span> Combining character strings<a href="mod-03.html#combining-character-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Character strings can be combined together into larger character strings using the function <code>paste()</code>. Notice that this is not the same as making a vector containing several character strings. That operation is done with <code>c()</code>.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="mod-03.html#cb410-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb410-2"><a href="mod-03.html#cb410-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb410-3"><a href="mod-03.html#cb410-3" tabindex="-1"></a>x</span>
<span id="cb410-4"><a href="mod-03.html#cb410-4" tabindex="-1"></a><span class="do">## [1] &quot;a b c&quot;</span></span>
<span id="cb410-5"><a href="mod-03.html#cb410-5" tabindex="-1"></a>y</span>
<span id="cb410-6"><a href="mod-03.html#cb410-6" tabindex="-1"></a><span class="do">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></span>
<span id="cb410-7"><a href="mod-03.html#cb410-7" tabindex="-1"></a><span class="fu">length</span>(x)</span>
<span id="cb410-8"><a href="mod-03.html#cb410-8" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb410-9"><a href="mod-03.html#cb410-9" tabindex="-1"></a><span class="fu">length</span>(y)</span>
<span id="cb410-10"><a href="mod-03.html#cb410-10" tabindex="-1"></a><span class="do">## [1] 3</span></span></code></pre></div>
<p>The function <code>paste()</code>, and its cousin <code>paste0()</code>, combine their arguments together and output a character string. The inputs do not have to be character strings, but the outputs will be. The difference between <code>paste()</code> and <code>paste0()</code> is that <code>paste0()</code> does not put any characters between its inputs, while <code>paste()</code> can place any valid character between its inputs. The default separator is a space.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="mod-03.html#cb411-1" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;zebra&quot;</span>, <span class="dv">3</span>)</span>
<span id="cb411-2"><a href="mod-03.html#cb411-2" tabindex="-1"></a><span class="do">## [1] &quot;azebra3&quot;</span></span>
<span id="cb411-3"><a href="mod-03.html#cb411-3" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;zebra&quot;</span>, <span class="dv">3</span>)</span>
<span id="cb411-4"><a href="mod-03.html#cb411-4" tabindex="-1"></a><span class="do">## [1] &quot;a zebra 3&quot;</span></span>
<span id="cb411-5"><a href="mod-03.html#cb411-5" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;zebra&quot;</span>, <span class="dv">3</span>, <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span>
<span id="cb411-6"><a href="mod-03.html#cb411-6" tabindex="-1"></a><span class="do">## [1] &quot;a_zebra_3&quot;</span></span>
<span id="cb411-7"><a href="mod-03.html#cb411-7" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;zebra&quot;</span>, <span class="dv">3</span>, <span class="at">sep=</span><span class="st">&quot;.&quot;</span>)</span>
<span id="cb411-8"><a href="mod-03.html#cb411-8" tabindex="-1"></a><span class="do">## [1] &quot;a.zebra.3&quot;</span></span>
<span id="cb411-9"><a href="mod-03.html#cb411-9" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;zebra&quot;</span>, <span class="dv">3</span>, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb411-10"><a href="mod-03.html#cb411-10" tabindex="-1"></a><span class="do">## [1] &quot;a/zebra/3&quot;</span></span>
<span id="cb411-11"><a href="mod-03.html#cb411-11" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;zebra&quot;</span>, <span class="dv">3</span>, <span class="at">sep=</span><span class="st">&quot;giraffe&quot;</span>)</span>
<span id="cb411-12"><a href="mod-03.html#cb411-12" tabindex="-1"></a><span class="do">## [1] &quot;agiraffezebragiraffe3&quot;</span></span></code></pre></div>
<p>One of my favorite uses for the paste functions is to automatically generate folder names and output file names. The example below adds the current date (<code>Sys.Date()</code>) into a file name.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="mod-03.html#cb412-1" tabindex="-1"></a><span class="co"># not run</span></span>
<span id="cb412-2"><a href="mod-03.html#cb412-2" tabindex="-1"></a>top.dir <span class="ot">&lt;-</span> <span class="st">&quot;C:/_data&quot;</span></span>
<span id="cb412-3"><a href="mod-03.html#cb412-3" tabindex="-1"></a>out.dir <span class="ot">&lt;-</span> <span class="fu">paste</span>(top.dir, <span class="st">&quot;test&quot;</span>, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb412-4"><a href="mod-03.html#cb412-4" tabindex="-1"></a>out.name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;output_&quot;</span>, <span class="fu">Sys.Date</span>(), <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb412-5"><a href="mod-03.html#cb412-5" tabindex="-1"></a><span class="fu">write.csv</span>(iris, <span class="fu">paste</span>(geo.dir, out.name, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>))</span></code></pre></div>
<p>When the inputs to a <code>paste()</code> function are contained in a single vector, then the desired separator must be supplied using the argument <code>collapse</code> instead of <code>sep</code>.</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="mod-03.html#cb413-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb413-2"><a href="mod-03.html#cb413-2" tabindex="-1"></a><span class="fu">paste</span>(a, <span class="at">collapse=</span><span class="st">&quot;-&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a-b-c&quot;</code></pre>
</div>
<div id="printing-character-strings" class="section level4 hasAnchor" number="3.4.2.2">
<h4><span class="header-section-number">3.4.2.2</span> Printing character strings<a href="mod-03.html#printing-character-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>cat()</code> function can not only put strings together, but also print them to the R console. This is useful if you want to generate messages from inside functions or loops. When <code>cat()</code> receives inputs that are not character strings, it evaluates them and converts them to character strings. The examples below show how inputs can be evaluated and printed. It also illustrates the use of <code>\n</code> and <code>\t</code> to insert new lines and tabs, respectively. Finally, the command flush.console() ensures that the console is updated with the most recent outputs.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="mod-03.html#cb415-1" tabindex="-1"></a><span class="co"># using cat() in a function:</span></span>
<span id="cb415-2"><a href="mod-03.html#cb415-2" tabindex="-1"></a>my.fun <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb415-3"><a href="mod-03.html#cb415-3" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;You entered&quot;</span>, x, <span class="st">&quot;!&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb415-4"><a href="mod-03.html#cb415-4" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="st">&quot;1 more is&quot;</span>, x<span class="sc">+</span><span class="dv">1</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb415-5"><a href="mod-03.html#cb415-5" tabindex="-1"></a>}</span>
<span id="cb415-6"><a href="mod-03.html#cb415-6" tabindex="-1"></a><span class="fu">my.fun</span>(<span class="dv">7</span>)</span></code></pre></div>
<pre><code>## You entered 7 ! 
##   1 more is 8</code></pre>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="mod-03.html#cb417-1" tabindex="-1"></a><span class="fu">my.fun</span>(<span class="dv">42</span>)</span></code></pre></div>
<pre><code>## You entered 42 ! 
##   1 more is 43</code></pre>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="mod-03.html#cb419-1" tabindex="-1"></a><span class="co"># using cat() in a loop:</span></span>
<span id="cb419-2"><a href="mod-03.html#cb419-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb419-3"><a href="mod-03.html#cb419-3" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;starting iteration&quot;</span>, i, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb419-4"><a href="mod-03.html#cb419-4" tabindex="-1"></a>    <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){</span>
<span id="cb419-5"><a href="mod-03.html#cb419-5" tabindex="-1"></a>        <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="st">&quot;iteration&quot;</span>, i, <span class="st">&quot;part&quot;</span>, j, <span class="st">&quot;complete!&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb419-6"><a href="mod-03.html#cb419-6" tabindex="-1"></a>        <span class="fu">flush.console</span>()</span>
<span id="cb419-7"><a href="mod-03.html#cb419-7" tabindex="-1"></a>    }</span>
<span id="cb419-8"><a href="mod-03.html#cb419-8" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;iteration&quot;</span>, i, <span class="st">&quot;complete!&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb419-9"><a href="mod-03.html#cb419-9" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## starting iteration 1 
##   iteration 1 part 1 complete! 
##   iteration 1 part 2 complete! 
##   iteration 1 part 3 complete! 
## iteration 1 complete! 
## starting iteration 2 
##   iteration 2 part 1 complete! 
##   iteration 2 part 2 complete! 
##   iteration 2 part 3 complete! 
## iteration 2 complete! 
## starting iteration 3 
##   iteration 3 part 1 complete! 
##   iteration 3 part 2 complete! 
##   iteration 3 part 3 complete! 
## iteration 3 complete! 
## starting iteration 4 
##   iteration 4 part 1 complete! 
##   iteration 4 part 2 complete! 
##   iteration 4 part 3 complete! 
## iteration 4 complete! 
## starting iteration 5 
##   iteration 5 part 1 complete! 
##   iteration 5 part 2 complete! 
##   iteration 5 part 3 complete! 
## iteration 5 complete!</code></pre>
<p>The other printing function, <code>sink()</code>, is specifically for printing outputs into text files. Refer back to the <a href="mod-03.html#mod-03-inout">section on data import/export</a> for an example.</p>
</div>
<div id="matching-character-strings" class="section level4 hasAnchor" number="3.4.2.3">
<h4><span class="header-section-number">3.4.2.3</span> Matching character strings<a href="mod-03.html#matching-character-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Like numeric data, character strings can be matched exactly with the comparison operator <code>==</code>.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="mod-03.html#cb421-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;zebra&quot;</span>, <span class="st">&quot;hippo&quot;</span>)</span>
<span id="cb421-2"><a href="mod-03.html#cb421-2" tabindex="-1"></a>x <span class="sc">==</span> <span class="st">&quot;zebra&quot;</span></span></code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="mod-03.html#cb423-1" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">==</span> <span class="st">&quot;zebra&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="mod-03.html#cb425-1" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">!=</span> <span class="st">&quot;zebra&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="mod-03.html#cb427-1" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">==</span> <span class="st">&quot;zebra&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="mod-03.html#cb429-1" tabindex="-1"></a><span class="fu">all</span>(x <span class="sc">==</span> <span class="st">&quot;zebra&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Notice that this kind of matching is case-sensitive. If you need to match regardless of case, you can either force all of the comparands to be the same case, or use regular expressions (see <a href="mod-03.html#mod03-regex">next section</a>).</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="mod-03.html#cb431-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;zebra&quot;</span>, <span class="st">&quot;hippo&quot;</span>)</span>
<span id="cb431-2"><a href="mod-03.html#cb431-2" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">==</span> <span class="st">&quot;Zebra&quot;</span>)</span>
<span id="cb431-3"><a href="mod-03.html#cb431-3" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb431-4"><a href="mod-03.html#cb431-4" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">==</span> <span class="fu">tolower</span>(<span class="st">&quot;zebra&quot;</span>))</span>
<span id="cb431-5"><a href="mod-03.html#cb431-5" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<p>R is smart enough to sort text alphabetically, and to make comparisons based on alphabetical sorting.</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="mod-03.html#cb432-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;zebra&quot;</span>, <span class="st">&quot;hippo&quot;</span>, <span class="st">&quot;lion&quot;</span>)</span>
<span id="cb432-2"><a href="mod-03.html#cb432-2" tabindex="-1"></a><span class="fu">sort</span>(x)</span>
<span id="cb432-3"><a href="mod-03.html#cb432-3" tabindex="-1"></a><span class="do">## [1] &quot;hippo&quot; &quot;lion&quot;  &quot;zebra&quot;</span></span>
<span id="cb432-4"><a href="mod-03.html#cb432-4" tabindex="-1"></a><span class="st">&quot;zebra&quot;</span> <span class="sc">&gt;</span> <span class="st">&quot;hippo&quot;</span></span>
<span id="cb432-5"><a href="mod-03.html#cb432-5" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb432-6"><a href="mod-03.html#cb432-6" tabindex="-1"></a><span class="st">&quot;lion&quot;</span> <span class="sc">&gt;</span> <span class="st">&quot;zebra&quot;</span></span>
<span id="cb432-7"><a href="mod-03.html#cb432-7" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb432-8"><a href="mod-03.html#cb432-8" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">&gt;</span> <span class="st">&quot;jaguar&quot;</span>)</span>
<span id="cb432-9"><a href="mod-03.html#cb432-9" tabindex="-1"></a><span class="do">## [1] 1 3</span></span></code></pre></div>
</div>
<div id="mod03-regex" class="section level4 hasAnchor" number="3.4.2.4">
<h4><span class="header-section-number">3.4.2.4</span> Searching with <code>grep()</code> and <code>grepl()</code><a href="mod-03.html#mod03-regex" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Regular expressions</strong>, or <strong>regex</strong>, are a <a href="https://en.wikipedia.org/wiki/Regular_expression">syntax for searching text strings</a>. Learning how to use regular expressions is easily a semester-long course on its own. Here we’ll just explore a few common use cases. The R functions that deal with regular expressions are <code>grep()</code> and its cousins. The most commonly used versions are <code>grep()</code> and <code>grepl()</code>.</p>
<ul>
<li><code>grep()</code> returns the indices in the input vector that match the pattern. The length of the output will be the number of matches.</li>
<li><code>grepl()</code> returns a logical value (TRUE or FALSE) telling whether each element in the input vector matches the pattern. The length of the output will be same as the length of the input.</li>
</ul>
<p>This means that <code>grepl()</code> is analogous to using <code>==</code> to test for equality, while <code>grep()</code> is analogous to using <code>which()</code>. Compare the results of the two commands on the simple vector <code>x</code> below. It’s not hard to imagine how powerful these functions can be.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="mod-03.html#cb433-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;zebra&quot;</span>, <span class="st">&quot;hippo&quot;</span>, <span class="st">&quot;lion&quot;</span>, <span class="st">&quot;tiger&quot;</span>)</span>
<span id="cb433-2"><a href="mod-03.html#cb433-2" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;e&quot;</span>, x)</span>
<span id="cb433-3"><a href="mod-03.html#cb433-3" tabindex="-1"></a><span class="do">## [1] 1 4</span></span>
<span id="cb433-4"><a href="mod-03.html#cb433-4" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;e&quot;</span>, x)</span>
<span id="cb433-5"><a href="mod-03.html#cb433-5" tabindex="-1"></a><span class="do">## [1]  TRUE FALSE FALSE  TRUE</span></span></code></pre></div>
<p>Some of the arguments to <code>grep()</code> can save you some time. Setting <code>value=TRUE</code> will return the values where the input matches the pattern.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="mod-03.html#cb434-1" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;e&quot;</span>, x, <span class="at">value=</span><span class="cn">TRUE</span>)</span>
<span id="cb434-2"><a href="mod-03.html#cb434-2" tabindex="-1"></a><span class="do">## [1] &quot;zebra&quot; &quot;tiger&quot;</span></span>
<span id="cb434-3"><a href="mod-03.html#cb434-3" tabindex="-1"></a></span>
<span id="cb434-4"><a href="mod-03.html#cb434-4" tabindex="-1"></a><span class="co"># equivalent to:</span></span>
<span id="cb434-5"><a href="mod-03.html#cb434-5" tabindex="-1"></a>x[<span class="fu">grep</span>(<span class="st">&quot;e&quot;</span>, x)]</span>
<span id="cb434-6"><a href="mod-03.html#cb434-6" tabindex="-1"></a><span class="do">## [1] &quot;zebra&quot; &quot;tiger&quot;</span></span></code></pre></div>
<p>Setting <code>invert=TRUE</code> will find elements of the input that do NOT match the pattern.</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="mod-03.html#cb435-1" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;e&quot;</span>, x)</span>
<span id="cb435-2"><a href="mod-03.html#cb435-2" tabindex="-1"></a><span class="do">## [1] 1 4</span></span>
<span id="cb435-3"><a href="mod-03.html#cb435-3" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;e&quot;</span>, x, <span class="at">invert=</span><span class="cn">TRUE</span>)</span>
<span id="cb435-4"><a href="mod-03.html#cb435-4" tabindex="-1"></a><span class="do">## [1] 2 3</span></span></code></pre></div>
<p>By default, <code>grep()</code> is case-sensitive. This can be overridden with the option <code>ignore.case</code>.</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="mod-03.html#cb436-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;zebra&quot;</span>, <span class="st">&quot;hippo&quot;</span>, <span class="st">&quot;lion&quot;</span>, <span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;Tiger&quot;</span>)</span>
<span id="cb436-2"><a href="mod-03.html#cb436-2" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;tiger&quot;</span>, x)</span>
<span id="cb436-3"><a href="mod-03.html#cb436-3" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb436-4"><a href="mod-03.html#cb436-4" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Tiger&quot;</span>, x)</span>
<span id="cb436-5"><a href="mod-03.html#cb436-5" tabindex="-1"></a><span class="do">## [1] 5</span></span>
<span id="cb436-6"><a href="mod-03.html#cb436-6" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;tiger&quot;</span>, x, <span class="at">ignore.case=</span><span class="cn">TRUE</span>)</span>
<span id="cb436-7"><a href="mod-03.html#cb436-7" tabindex="-1"></a><span class="do">## [1] 4 5</span></span>
<span id="cb436-8"><a href="mod-03.html#cb436-8" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;TIGER&quot;</span>, x, <span class="at">ignore.case=</span><span class="cn">TRUE</span>)</span>
<span id="cb436-9"><a href="mod-03.html#cb436-9" tabindex="-1"></a><span class="do">## [1] 4 5</span></span></code></pre></div>
<p>We will see some uses of <code>grep()</code> and its cousins in the examples later.</p>
</div>
<div id="replacing-parts-of-character-strings" class="section level4 hasAnchor" number="3.4.2.5">
<h4><span class="header-section-number">3.4.2.5</span> Replacing parts of character strings<a href="mod-03.html#replacing-parts-of-character-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Text within character strings can be replaced or modified in several ways. If you are comfortable with regular expressions (see previous section) then you can use function <code>gsub()</code>. The syntax for <code>gsub()</code> is similar to that of <code>grep()</code>, with an additional input for the replacement string. Note that <code>gsub()</code> will replace every occurrence of the pattern, whether or not an occurrence is a whole word or not. The related function <code>sub()</code> works like <code>gsub()</code>, but only replaces the first occurrence of the pattern.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="mod-03.html#cb437-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;zebra&quot;</span>, <span class="st">&quot;hippo&quot;</span>, <span class="st">&quot;lion&quot;</span>, <span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;Tiger&quot;</span>)</span>
<span id="cb437-2"><a href="mod-03.html#cb437-2" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;giraffe&quot;</span>, x)</span>
<span id="cb437-3"><a href="mod-03.html#cb437-3" tabindex="-1"></a><span class="do">## [1] &quot;zebra&quot;   &quot;hippo&quot;   &quot;lion&quot;    &quot;giraffe&quot; &quot;Tiger&quot;</span></span>
<span id="cb437-4"><a href="mod-03.html#cb437-4" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;giraffe&quot;</span>, x, <span class="at">ignore.case=</span><span class="cn">TRUE</span>)</span>
<span id="cb437-5"><a href="mod-03.html#cb437-5" tabindex="-1"></a><span class="do">## [1] &quot;zebra&quot;   &quot;hippo&quot;   &quot;lion&quot;    &quot;giraffe&quot; &quot;giraffe&quot;</span></span>
<span id="cb437-6"><a href="mod-03.html#cb437-6" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;z&quot;</span>, <span class="st">&quot;Z&quot;</span>, x)</span>
<span id="cb437-7"><a href="mod-03.html#cb437-7" tabindex="-1"></a><span class="do">## [1] &quot;Zebra&quot; &quot;hippo&quot; &quot;lion&quot;  &quot;tiger&quot; &quot;Tiger&quot;</span></span>
<span id="cb437-8"><a href="mod-03.html#cb437-8" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;giraffe&quot;</span>, x, <span class="at">ignore.case=</span><span class="cn">TRUE</span>)</span>
<span id="cb437-9"><a href="mod-03.html#cb437-9" tabindex="-1"></a><span class="do">## [1] &quot;zebra&quot;   &quot;hippo&quot;   &quot;lion&quot;    &quot;giraffe&quot; &quot;giraffe&quot;</span></span></code></pre></div>
</div>
<div id="extracting-from-and-splitting-character-strings" class="section level4 hasAnchor" number="3.4.2.6">
<h4><span class="header-section-number">3.4.2.6</span> Extracting from and splitting character strings<a href="mod-03.html#extracting-from-and-splitting-character-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Character strings can be split up using the function <code>strsplit()</code> (short for “string split”). This function can use regular expressions like <code>grep()</code> or <code>gsub()</code> can. It works by breaking a character string apart at a given text string. Unfortunately, its output can be a little confusing if you’re not used to working with R objects:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="mod-03.html#cb438-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Peromyscus_leucopus&quot;</span>,</span>
<span id="cb438-2"><a href="mod-03.html#cb438-2" tabindex="-1"></a>       <span class="st">&quot;Sigmodon_hispidus&quot;</span>,</span>
<span id="cb438-3"><a href="mod-03.html#cb438-3" tabindex="-1"></a>       <span class="st">&quot;Microtus_pennsylvanicus&quot;</span>)</span>
<span id="cb438-4"><a href="mod-03.html#cb438-4" tabindex="-1"></a><span class="fu">strsplit</span>(x, <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Peromyscus&quot; &quot;leucopus&quot;  
## 
## [[2]]
## [1] &quot;Sigmodon&quot; &quot;hispidus&quot;
## 
## [[3]]
## [1] &quot;Microtus&quot;       &quot;pennsylvanicus&quot;</code></pre>
<p>Function <code>strsplit()</code> returns a list with one element for each element in the input vector. Each element of that list is a character vector, consisting of the pieces of that element of the input vector split by the splitting string. So, if you want only one part of each element of the input vector, you need to extract them from the output list. In this example, we can get the generic epithets by pulling the first element of each list element. The function <code>sapply()</code> applies a function to each element of a list and returns a result with the simplest possible structure (<code>sapply</code> is short for “apply and simplify”). The two commands below are equivalent, but the first is much simpler and should be the method you use.</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="mod-03.html#cb440-1" tabindex="-1"></a><span class="fu">sapply</span>(<span class="fu">strsplit</span>(x, <span class="st">&quot;_&quot;</span>), <span class="st">&quot;[&quot;</span>, <span class="dv">1</span>)</span>
<span id="cb440-2"><a href="mod-03.html#cb440-2" tabindex="-1"></a><span class="do">## [1] &quot;Peromyscus&quot; &quot;Sigmodon&quot;   &quot;Microtus&quot;</span></span>
<span id="cb440-3"><a href="mod-03.html#cb440-3" tabindex="-1"></a></span>
<span id="cb440-4"><a href="mod-03.html#cb440-4" tabindex="-1"></a><span class="co"># equivalent, not as easy:</span></span>
<span id="cb440-5"><a href="mod-03.html#cb440-5" tabindex="-1"></a><span class="fu">do.call</span>(c, <span class="fu">lapply</span>(<span class="fu">strsplit</span>(x, <span class="st">&quot;_&quot;</span>), <span class="st">&quot;[&quot;</span>, <span class="dv">1</span>))</span>
<span id="cb440-6"><a href="mod-03.html#cb440-6" tabindex="-1"></a><span class="do">## [1] &quot;Peromyscus&quot; &quot;Sigmodon&quot;   &quot;Microtus&quot;</span></span></code></pre></div>
<p>The “<code>sapply</code>-<code>strsplit</code>” method is useful for breaking apart strings whose parts carry information. One common use case is breaking up dates into year, month, and day. Note that there are more elegant ways to do this using the R date classes, but treating dates as text strings can be convenient because the date and time classes are such a pain in the neck. When using this method, you will need to keep track of when date components are stored as text and when they are stored as numbers.</p>
<p>The code block below shows how to break apart dates using <code>strsplit()</code> and <code>sapply()</code>.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="mod-03.html#cb441-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2019-08-03&quot;</span>, <span class="st">&quot;2020-08-15&quot;</span>, <span class="st">&quot;2021-08-07&quot;</span>)</span>
<span id="cb441-2"><a href="mod-03.html#cb441-2" tabindex="-1"></a>ssx <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(x, <span class="st">&quot;-&quot;</span>)</span>
<span id="cb441-3"><a href="mod-03.html#cb441-3" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">year=</span><span class="fu">sapply</span>(ssx, <span class="st">&quot;[&quot;</span>, <span class="dv">1</span>),</span>
<span id="cb441-4"><a href="mod-03.html#cb441-4" tabindex="-1"></a>                <span class="at">mon=</span><span class="fu">sapply</span>(ssx, <span class="st">&quot;[&quot;</span>, <span class="dv">2</span>),</span>
<span id="cb441-5"><a href="mod-03.html#cb441-5" tabindex="-1"></a>                <span class="at">day=</span><span class="fu">sapply</span>(ssx, <span class="st">&quot;[&quot;</span>, <span class="dv">3</span>))</span>
<span id="cb441-6"><a href="mod-03.html#cb441-6" tabindex="-1"></a></span>
<span id="cb441-7"><a href="mod-03.html#cb441-7" tabindex="-1"></a><span class="fu">class</span>(a<span class="sc">$</span>year) <span class="co"># character, not a number!</span></span>
<span id="cb441-8"><a href="mod-03.html#cb441-8" tabindex="-1"></a><span class="do">## [1] &quot;character&quot;</span></span>
<span id="cb441-9"><a href="mod-03.html#cb441-9" tabindex="-1"></a><span class="fu">class</span>(a<span class="sc">$</span>mon) <span class="co"># character, not a number!</span></span>
<span id="cb441-10"><a href="mod-03.html#cb441-10" tabindex="-1"></a><span class="do">## [1] &quot;character&quot;</span></span>
<span id="cb441-11"><a href="mod-03.html#cb441-11" tabindex="-1"></a><span class="fu">class</span>(a<span class="sc">$</span>day) <span class="co"># character, not a number!</span></span>
<span id="cb441-12"><a href="mod-03.html#cb441-12" tabindex="-1"></a><span class="do">## [1] &quot;character&quot;</span></span>
<span id="cb441-13"><a href="mod-03.html#cb441-13" tabindex="-1"></a></span>
<span id="cb441-14"><a href="mod-03.html#cb441-14" tabindex="-1"></a>a<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(a<span class="sc">$</span>year)</span>
<span id="cb441-15"><a href="mod-03.html#cb441-15" tabindex="-1"></a>a<span class="sc">$</span>mon <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(a<span class="sc">$</span>mon)</span>
<span id="cb441-16"><a href="mod-03.html#cb441-16" tabindex="-1"></a>a<span class="sc">$</span>day <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(a<span class="sc">$</span>day)</span>
<span id="cb441-17"><a href="mod-03.html#cb441-17" tabindex="-1"></a></span>
<span id="cb441-18"><a href="mod-03.html#cb441-18" tabindex="-1"></a><span class="fu">class</span>(a<span class="sc">$</span>year) <span class="co"># numbers!</span></span>
<span id="cb441-19"><a href="mod-03.html#cb441-19" tabindex="-1"></a><span class="do">## [1] &quot;numeric&quot;</span></span>
<span id="cb441-20"><a href="mod-03.html#cb441-20" tabindex="-1"></a><span class="fu">class</span>(a<span class="sc">$</span>mon)  <span class="co"># numbers!</span></span>
<span id="cb441-21"><a href="mod-03.html#cb441-21" tabindex="-1"></a><span class="do">## [1] &quot;numeric&quot;</span></span>
<span id="cb441-22"><a href="mod-03.html#cb441-22" tabindex="-1"></a><span class="fu">class</span>(a<span class="sc">$</span>day)  <span class="co"># numbers!</span></span>
<span id="cb441-23"><a href="mod-03.html#cb441-23" tabindex="-1"></a><span class="do">## [1] &quot;numeric&quot;</span></span></code></pre></div>
</div>
<div id="matching-text-strings" class="section level4 hasAnchor" number="3.4.2.7">
<h4><span class="header-section-number">3.4.2.7</span> Matching text strings<a href="mod-03.html#matching-text-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As biologists we often keep our data in several separate spreadsheets or tables. These tables are interrelated by a set of “key” variables. If that sounds like a sketchy, haphazard way to build a database, that’s because it is. Databases are outside the scope of this course, but we will learn how to relate tables using R. If you’ve ever used the VLOOKUP function in Excel, then you know exactly what problem <code>match()</code> is designed to solve.</p>
<p>The function <code>match()</code> finds the indices of the matches of its first argument in its second. In other words, it searches for the values in one vector in a second vector, then returns the positions of the matches from the second vector. A simple example is below:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="mod-03.html#cb442-1" tabindex="-1"></a>vec1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gene1&quot;</span>, <span class="st">&quot;gene2&quot;</span>, <span class="st">&quot;gene3&quot;</span>, <span class="st">&quot;gene4&quot;</span>)</span>
<span id="cb442-2"><a href="mod-03.html#cb442-2" tabindex="-1"></a>vec2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gene1&quot;</span>, <span class="st">&quot;gene2&quot;</span>, <span class="st">&quot;gene1&quot;</span>, <span class="st">&quot;gene2&quot;</span>, </span>
<span id="cb442-3"><a href="mod-03.html#cb442-3" tabindex="-1"></a>          <span class="st">&quot;gene5&quot;</span>, <span class="st">&quot;gene3&quot;</span>, <span class="st">&quot;gene3&quot;</span>, <span class="st">&quot;gene4&quot;</span>)</span>
<span id="cb442-4"><a href="mod-03.html#cb442-4" tabindex="-1"></a>vec3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gene1&quot;</span>, <span class="st">&quot;gene2&quot;</span>, <span class="st">&quot;gene1&quot;</span>, <span class="st">&quot;gene2&quot;</span>, </span>
<span id="cb442-5"><a href="mod-03.html#cb442-5" tabindex="-1"></a>          <span class="st">&quot;gene4&quot;</span>, <span class="st">&quot;gene3&quot;</span>, <span class="st">&quot;gene3&quot;</span>, <span class="st">&quot;gene4&quot;</span>)</span>
<span id="cb442-6"><a href="mod-03.html#cb442-6" tabindex="-1"></a></span>
<span id="cb442-7"><a href="mod-03.html#cb442-7" tabindex="-1"></a><span class="fu">match</span>(vec1, vec2)</span>
<span id="cb442-8"><a href="mod-03.html#cb442-8" tabindex="-1"></a><span class="do">## [1] 1 2 6 8</span></span>
<span id="cb442-9"><a href="mod-03.html#cb442-9" tabindex="-1"></a><span class="fu">match</span>(vec2, vec1)</span>
<span id="cb442-10"><a href="mod-03.html#cb442-10" tabindex="-1"></a><span class="do">## [1]  1  2  1  2 NA  3  3  4</span></span>
<span id="cb442-11"><a href="mod-03.html#cb442-11" tabindex="-1"></a><span class="fu">match</span>(vec3, vec1)</span>
<span id="cb442-12"><a href="mod-03.html#cb442-12" tabindex="-1"></a><span class="do">## [1] 1 2 1 2 4 3 3 4</span></span></code></pre></div>
<p>The first example shows what <code>match()</code> is doing. For element in the first vector, <code>match()</code> returns the first position where that value occurs in the second vector. The second example shows what happens when trying to match a value that is not in the second vector: R returns <code>NA</code>. The third example shows how <code>match()</code> can be used to relate tables. The longer vector <code>vec3</code> is matched to the shorter vector <code>vec1</code>, which contains each unique value only once. If <code>vec1</code> was a variable in a data frame that contained other variables associated with genes, then the result of <code>match(vec3, vec1)</code> would return the rows in <code>vec1</code>’s data frame associated with each row of <code>vec3</code>’s data frame.</p>
<p>The code below demonstrates how <code>match()</code> might be used in practice. This example uses three tables from a real dataset. The three tables contain data and metadata for samples taken from stream across Georgia. The commands use <code>match()</code> to assign site numbers, dates, and geographic coordinates to observations using different key variables. We’ll revisit these data again in the <a href="mod-03.html#mod-03-dataframe">next section</a> where we see how to merge datasets.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="mod-03.html#cb443-1" tabindex="-1"></a><span class="co"># not run (see next section)</span></span>
<span id="cb443-2"><a href="mod-03.html#cb443-2" tabindex="-1"></a></span>
<span id="cb443-3"><a href="mod-03.html#cb443-3" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span>
<span id="cb443-4"><a href="mod-03.html#cb443-4" tabindex="-1"></a>name1 <span class="ot">&lt;-</span> <span class="st">&quot;dat_samples_2021-08-04.csv&quot;</span></span>
<span id="cb443-5"><a href="mod-03.html#cb443-5" tabindex="-1"></a>name2 <span class="ot">&lt;-</span> <span class="st">&quot;dat_stream_indices_2021-08-04.csv&quot;</span></span>
<span id="cb443-6"><a href="mod-03.html#cb443-6" tabindex="-1"></a>name3 <span class="ot">&lt;-</span> <span class="st">&quot;loc_meta_vaa_2020-11-18.csv&quot;</span></span>
<span id="cb443-7"><a href="mod-03.html#cb443-7" tabindex="-1"></a></span>
<span id="cb443-8"><a href="mod-03.html#cb443-8" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(name1, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb443-9"><a href="mod-03.html#cb443-9" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(name2, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb443-10"><a href="mod-03.html#cb443-10" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(name3, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb443-11"><a href="mod-03.html#cb443-11" tabindex="-1"></a></span>
<span id="cb443-12"><a href="mod-03.html#cb443-12" tabindex="-1"></a><span class="co"># x2 contains the response variable</span></span>
<span id="cb443-13"><a href="mod-03.html#cb443-13" tabindex="-1"></a>dat <span class="ot">&lt;-</span> x2</span>
<span id="cb443-14"><a href="mod-03.html#cb443-14" tabindex="-1"></a><span class="co"># add site name, year, and date from x1</span></span>
<span id="cb443-15"><a href="mod-03.html#cb443-15" tabindex="-1"></a>matchx <span class="ot">&lt;-</span> <span class="fu">match</span>(dat<span class="sc">$</span>uocc, x1<span class="sc">$</span>uocc)</span>
<span id="cb443-16"><a href="mod-03.html#cb443-16" tabindex="-1"></a>dat<span class="sc">$</span>site <span class="ot">&lt;-</span> x1<span class="sc">$</span>loc[matchx]</span>
<span id="cb443-17"><a href="mod-03.html#cb443-17" tabindex="-1"></a>dat<span class="sc">$</span>year <span class="ot">&lt;-</span> x1<span class="sc">$</span>year[matchx]</span>
<span id="cb443-18"><a href="mod-03.html#cb443-18" tabindex="-1"></a>dat<span class="sc">$</span>doy  <span class="ot">&lt;-</span> x1<span class="sc">$</span>doy[matchx]</span>
<span id="cb443-19"><a href="mod-03.html#cb443-19" tabindex="-1"></a></span>
<span id="cb443-20"><a href="mod-03.html#cb443-20" tabindex="-1"></a><span class="co"># equivalent to:</span></span>
<span id="cb443-21"><a href="mod-03.html#cb443-21" tabindex="-1"></a><span class="co">#dat$site &lt;- x1$loc[match(dat$uocc, x1$uocc)]</span></span>
<span id="cb443-22"><a href="mod-03.html#cb443-22" tabindex="-1"></a><span class="co">#dat$year &lt;- x1$year[match(dat$uocc, x1$uocc)]</span></span>
<span id="cb443-23"><a href="mod-03.html#cb443-23" tabindex="-1"></a><span class="co">#dat$doy  &lt;- x1$doy[match(dat$uocc, x1$uocc)]</span></span>
<span id="cb443-24"><a href="mod-03.html#cb443-24" tabindex="-1"></a></span>
<span id="cb443-25"><a href="mod-03.html#cb443-25" tabindex="-1"></a><span class="co"># grab latitude and longitude from x3</span></span>
<span id="cb443-26"><a href="mod-03.html#cb443-26" tabindex="-1"></a>matchx <span class="ot">&lt;-</span> <span class="fu">match</span>(dat<span class="sc">$</span>site, x3<span class="sc">$</span>loc)</span>
<span id="cb443-27"><a href="mod-03.html#cb443-27" tabindex="-1"></a>dat<span class="sc">$</span>lat <span class="ot">&lt;-</span> x3<span class="sc">$</span>lat[matchx]</span>
<span id="cb443-28"><a href="mod-03.html#cb443-28" tabindex="-1"></a>dat<span class="sc">$</span>long <span class="ot">&lt;-</span> x3<span class="sc">$</span>long[matchx]</span></code></pre></div>
</div>
<div id="standardizing-numbers-as-text" class="section level4 hasAnchor" number="3.4.2.8">
<h4><span class="header-section-number">3.4.2.8</span> Standardizing numbers as text<a href="mod-03.html#standardizing-numbers-as-text" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The function <code>formatC()</code> formats numbers in a manner similar to the language C. This is useful for naming objects or parts of objects with numeric names that have a fixed width or format. The most common use case is converting numbers like “1, 12, 112” to strings like “001, 012, 112”. The example below uses <code>formatC()</code> in combination with <code>paste()</code> to generate some file names.</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="mod-03.html#cb444-1" tabindex="-1"></a>file.nums <span class="ot">&lt;-</span> <span class="fu">formatC</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">width=</span><span class="dv">3</span>, <span class="at">flag=</span><span class="st">&quot;0&quot;</span>)</span>
<span id="cb444-2"><a href="mod-03.html#cb444-2" tabindex="-1"></a>file.names <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;file&quot;</span>, file.nums, <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span>
<span id="cb444-3"><a href="mod-03.html#cb444-3" tabindex="-1"></a>file.names</span></code></pre></div>
<pre><code>## [1] &quot;file_001&quot; &quot;file_002&quot; &quot;file_003&quot; &quot;file_004&quot;</code></pre>
<p>This is useful for generating text strings that need to be sorted. In the example above, the files “file_001.txt”, “file_002.txt”, “file_003.txt”, and “file_004.txt” would be in the order you expect, and a file like “file_010.txt” would come <em>after</em> “file009.txt”. If the leading zeros had not been added, then the order would be “file_1.txt”, “file_10.txt”, “file_2.txt”, “file_3.txt”, etc. (notice that 10 was between 1 and 2).</p>
</div>
</div>
</div>
<div id="mod-03-dataframe" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Data frame management<a href="mod-03.html#mod-03-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Most of the time when you work with data in R, those data will be stored in <strong>data frames</strong>. A data frame looks like a matrix, but functions in many ways spreadsheet. Internally, a data frame is really a list, but for most day-to-day use you can think of a data frame as a table.</p>
<p><strong><em>Being able to manage data frames is an important part of working with R</em></strong>. This page demonstrates some of the most common data frame operations.</p>
<div id="data-frame-structure" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Data frame structure<a href="mod-03.html#data-frame-structure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data frames and matrices look very similar, but their internal structures are very different. This has huge implications for how you work with and manipulate data frames and matrices. The figure below shows some of the most important differences.</p>
<p><img src="03_07.jpg" width="90%" style="display: block; margin: auto;" /></p>
<p>All pieces of a matrix are accessed using <a href="mod-03.html#mod-03-brackets">bracket notation</a> (<code>[]</code>). Pieces of a data frame can also be accessed using brackets, but the dollar sign <code>$</code> is usually used to access columns.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="mod-03.html#cb446-1" tabindex="-1"></a><span class="co"># single variables (columns): $</span></span>
<span id="cb446-2"><a href="mod-03.html#cb446-2" tabindex="-1"></a>iris<span class="sc">$</span>Petal.Length</span>
<span id="cb446-3"><a href="mod-03.html#cb446-3" tabindex="-1"></a><span class="do">##   [1] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 1.5 1.6 1.4 1.1 1.2 1.5 1.3 1.4</span></span>
<span id="cb446-4"><a href="mod-03.html#cb446-4" tabindex="-1"></a><span class="do">##  [19] 1.7 1.5 1.7 1.5 1.0 1.7 1.9 1.6 1.6 1.5 1.4 1.6 1.6 1.5 1.5 1.4 1.5 1.2</span></span>
<span id="cb446-5"><a href="mod-03.html#cb446-5" tabindex="-1"></a><span class="do">##  [37] 1.3 1.4 1.3 1.5 1.3 1.3 1.3 1.6 1.9 1.4 1.6 1.4 1.5 1.4 4.7 4.5 4.9 4.0</span></span>
<span id="cb446-6"><a href="mod-03.html#cb446-6" tabindex="-1"></a><span class="do">##  [55] 4.6 4.5 4.7 3.3 4.6 3.9 3.5 4.2 4.0 4.7 3.6 4.4 4.5 4.1 4.5 3.9 4.8 4.0</span></span>
<span id="cb446-7"><a href="mod-03.html#cb446-7" tabindex="-1"></a><span class="do">##  [73] 4.9 4.7 4.3 4.4 4.8 5.0 4.5 3.5 3.8 3.7 3.9 5.1 4.5 4.5 4.7 4.4 4.1 4.0</span></span>
<span id="cb446-8"><a href="mod-03.html#cb446-8" tabindex="-1"></a><span class="do">##  [91] 4.4 4.6 4.0 3.3 4.2 4.2 4.2 4.3 3.0 4.1 6.0 5.1 5.9 5.6 5.8 6.6 4.5 6.3</span></span>
<span id="cb446-9"><a href="mod-03.html#cb446-9" tabindex="-1"></a><span class="do">## [109] 5.8 6.1 5.1 5.3 5.5 5.0 5.1 5.3 5.5 6.7 6.9 5.0 5.7 4.9 6.7 4.9 5.7 6.0</span></span>
<span id="cb446-10"><a href="mod-03.html#cb446-10" tabindex="-1"></a><span class="do">## [127] 4.8 4.9 5.6 5.8 6.1 6.4 5.6 5.1 5.6 6.1 5.6 5.5 4.8 5.4 5.6 5.1 5.1 5.9</span></span>
<span id="cb446-11"><a href="mod-03.html#cb446-11" tabindex="-1"></a><span class="do">## [145] 5.7 5.2 5.0 5.2 5.4 5.1</span></span>
<span id="cb446-12"><a href="mod-03.html#cb446-12" tabindex="-1"></a></span>
<span id="cb446-13"><a href="mod-03.html#cb446-13" tabindex="-1"></a><span class="co"># multiple variables: brackets []</span></span>
<span id="cb446-14"><a href="mod-03.html#cb446-14" tabindex="-1"></a><span class="do">## head() shows only first few rows (output very long)</span></span>
<span id="cb446-15"><a href="mod-03.html#cb446-15" tabindex="-1"></a>a <span class="ot">&lt;-</span> iris[,<span class="fu">c</span>(<span class="st">&quot;Petal.Length&quot;</span>, <span class="st">&quot;Sepal.Length&quot;</span>)]</span>
<span id="cb446-16"><a href="mod-03.html#cb446-16" tabindex="-1"></a><span class="fu">head</span>(a)</span>
<span id="cb446-17"><a href="mod-03.html#cb446-17" tabindex="-1"></a><span class="do">##   Petal.Length Sepal.Length</span></span>
<span id="cb446-18"><a href="mod-03.html#cb446-18" tabindex="-1"></a><span class="do">## 1          1.4          5.1</span></span>
<span id="cb446-19"><a href="mod-03.html#cb446-19" tabindex="-1"></a><span class="do">## 2          1.4          4.9</span></span>
<span id="cb446-20"><a href="mod-03.html#cb446-20" tabindex="-1"></a><span class="do">## 3          1.3          4.7</span></span>
<span id="cb446-21"><a href="mod-03.html#cb446-21" tabindex="-1"></a><span class="do">## 4          1.5          4.6</span></span>
<span id="cb446-22"><a href="mod-03.html#cb446-22" tabindex="-1"></a><span class="do">## 5          1.4          5.0</span></span>
<span id="cb446-23"><a href="mod-03.html#cb446-23" tabindex="-1"></a><span class="do">## 6          1.7          5.4</span></span>
<span id="cb446-24"><a href="mod-03.html#cb446-24" tabindex="-1"></a></span>
<span id="cb446-25"><a href="mod-03.html#cb446-25" tabindex="-1"></a><span class="co"># rows: brackets []</span></span>
<span id="cb446-26"><a href="mod-03.html#cb446-26" tabindex="-1"></a><span class="co"># remember the comma!</span></span>
<span id="cb446-27"><a href="mod-03.html#cb446-27" tabindex="-1"></a>iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,]</span>
<span id="cb446-28"><a href="mod-03.html#cb446-28" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb446-29"><a href="mod-03.html#cb446-29" tabindex="-1"></a><span class="do">## 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb446-30"><a href="mod-03.html#cb446-30" tabindex="-1"></a><span class="do">## 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb446-31"><a href="mod-03.html#cb446-31" tabindex="-1"></a><span class="do">## 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb446-32"><a href="mod-03.html#cb446-32" tabindex="-1"></a><span class="do">## 4          4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb446-33"><a href="mod-03.html#cb446-33" tabindex="-1"></a>iris[<span class="dv">1</span>,]</span>
<span id="cb446-34"><a href="mod-03.html#cb446-34" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb446-35"><a href="mod-03.html#cb446-35" tabindex="-1"></a><span class="do">## 1          5.1         3.5          1.4         0.2  setosa</span></span></code></pre></div>
<p>Notice that the syntax for accessing a data frame with <code>[]</code> is the same as for accessing a matrix.</p>
<p>When a data frame is printed to the console, this is only a representation of the data frame’s true form: a <strong>list</strong>. This is why single columns are accessible by a <code>$</code>: this is the symbol for accessing an element of a list. The list nature of a data frame is also why <strong>rows</strong> of a dataset are actually data frames themselves and not vectors.</p>
</div>
<div id="common-data-frame-operations" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Common data frame operations<a href="mod-03.html#common-data-frame-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="adding-and-deleting-variables" class="section level4 hasAnchor" number="3.5.2.1">
<h4><span class="header-section-number">3.5.2.1</span> Adding and deleting variables<a href="mod-03.html#adding-and-deleting-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>New variables can be added to a data frame by <strong>assignment</strong> (<code>&lt;-</code>). Assigning values to a variable in a data frame will create that variable if it doesn’t already exist–and overwrite values if the variable is already in the data frame.</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="mod-03.html#cb447-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,] <span class="co"># spare copy for demonstration</span></span>
<span id="cb447-2"><a href="mod-03.html#cb447-2" tabindex="-1"></a>x<span class="sc">$</span>Petal.Area <span class="ot">&lt;-</span> <span class="fu">apply</span>(x[,<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>], <span class="dv">1</span>, prod)</span>
<span id="cb447-3"><a href="mod-03.html#cb447-3" tabindex="-1"></a></span>
<span id="cb447-4"><a href="mod-03.html#cb447-4" tabindex="-1"></a><span class="co"># shows new variable:</span></span>
<span id="cb447-5"><a href="mod-03.html#cb447-5" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Petal.Area
## 1          5.1         3.5          1.4         0.2  setosa       0.28
## 2          4.9         3.0          1.4         0.2  setosa       0.28
## 3          4.7         3.2          1.3         0.2  setosa       0.26
## 4          4.6         3.1          1.5         0.2  setosa       0.30
## 5          5.0         3.6          1.4         0.2  setosa       0.28</code></pre>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="mod-03.html#cb449-1" tabindex="-1"></a><span class="co"># shows variable overwritten:</span></span>
<span id="cb449-2"><a href="mod-03.html#cb449-2" tabindex="-1"></a>x<span class="sc">$</span>Petal.Area <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb449-3"><a href="mod-03.html#cb449-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Petal.Area
## 1          5.1         3.5          1.4         0.2  setosa          3
## 2          4.9         3.0          1.4         0.2  setosa          3
## 3          4.7         3.2          1.3         0.2  setosa          3
## 4          4.6         3.1          1.5         0.2  setosa          3
## 5          5.0         3.6          1.4         0.2  setosa          3</code></pre>
<p>Variables can also be added using function <code>cbind()</code>. This name is short for “column bind”<a href="#fn41" class="footnote-ref" id="fnref41"><sup>41</sup></a>. To use <code>cbind()</code>, the input data frames must have the same number of rows. Note that <code>cbind()</code> sticks the data frames together as they are. If the records in the inputs need to be matched up and are not already in the same order, then either the data frames need to be aligned, merged with function <code>merge()</code>, or the variables need to be added using <code>match()</code> and a key variable.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="mod-03.html#cb451-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb451-2"><a href="mod-03.html#cb451-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb451-3"><a href="mod-03.html#cb451-3" tabindex="-1"></a><span class="fu">cbind</span>(x,y)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="mod-03.html#cb453-1" tabindex="-1"></a><span class="co"># shows that cbind() uses inputs as-is</span></span>
<span id="cb453-2"><a href="mod-03.html#cb453-2" tabindex="-1"></a><span class="fu">cbind</span>(x, y[<span class="dv">5</span><span class="sc">:</span><span class="dv">1</span>,])</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.5         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.4         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa</code></pre>
<p>Variables can be deleted by setting them to <code>NULL</code> (notice all caps) or by making a new version of the data frame without the variable. If I am only removing a few variables, I prefer setting them individually to NULL. This makes it less likely that I will accidentally remove the wrong columns.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="mod-03.html#cb455-1" tabindex="-1"></a>x<span class="sc">$</span>Petal.Area <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb455-2"><a href="mod-03.html#cb455-2" tabindex="-1"></a>x</span>
<span id="cb455-3"><a href="mod-03.html#cb455-3" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width</span></span>
<span id="cb455-4"><a href="mod-03.html#cb455-4" tabindex="-1"></a><span class="do">## 1          5.1         3.5</span></span>
<span id="cb455-5"><a href="mod-03.html#cb455-5" tabindex="-1"></a><span class="do">## 2          4.9         3.0</span></span>
<span id="cb455-6"><a href="mod-03.html#cb455-6" tabindex="-1"></a><span class="do">## 3          4.7         3.2</span></span>
<span id="cb455-7"><a href="mod-03.html#cb455-7" tabindex="-1"></a><span class="do">## 4          4.6         3.1</span></span>
<span id="cb455-8"><a href="mod-03.html#cb455-8" tabindex="-1"></a><span class="do">## 5          5.0         3.6</span></span>
<span id="cb455-9"><a href="mod-03.html#cb455-9" tabindex="-1"></a></span>
<span id="cb455-10"><a href="mod-03.html#cb455-10" tabindex="-1"></a><span class="co"># delete 1 variable</span></span>
<span id="cb455-11"><a href="mod-03.html#cb455-11" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[,<span class="fu">which</span>(<span class="fu">names</span>(x) <span class="sc">!=</span> <span class="st">&quot;Petal.Area&quot;</span>)]</span>
<span id="cb455-12"><a href="mod-03.html#cb455-12" tabindex="-1"></a>x</span>
<span id="cb455-13"><a href="mod-03.html#cb455-13" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width</span></span>
<span id="cb455-14"><a href="mod-03.html#cb455-14" tabindex="-1"></a><span class="do">## 1          5.1         3.5</span></span>
<span id="cb455-15"><a href="mod-03.html#cb455-15" tabindex="-1"></a><span class="do">## 2          4.9         3.0</span></span>
<span id="cb455-16"><a href="mod-03.html#cb455-16" tabindex="-1"></a><span class="do">## 3          4.7         3.2</span></span>
<span id="cb455-17"><a href="mod-03.html#cb455-17" tabindex="-1"></a><span class="do">## 4          4.6         3.1</span></span>
<span id="cb455-18"><a href="mod-03.html#cb455-18" tabindex="-1"></a><span class="do">## 5          5.0         3.6</span></span>
<span id="cb455-19"><a href="mod-03.html#cb455-19" tabindex="-1"></a></span>
<span id="cb455-20"><a href="mod-03.html#cb455-20" tabindex="-1"></a><span class="co"># delete &gt;1 variable</span></span>
<span id="cb455-21"><a href="mod-03.html#cb455-21" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[,<span class="fu">which</span>(<span class="sc">!</span><span class="fu">names</span>(x) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Petal.Area&quot;</span>, <span class="st">&quot;Petal.Length&quot;</span>))]</span>
<span id="cb455-22"><a href="mod-03.html#cb455-22" tabindex="-1"></a>x</span>
<span id="cb455-23"><a href="mod-03.html#cb455-23" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width</span></span>
<span id="cb455-24"><a href="mod-03.html#cb455-24" tabindex="-1"></a><span class="do">## 1          5.1         3.5</span></span>
<span id="cb455-25"><a href="mod-03.html#cb455-25" tabindex="-1"></a><span class="do">## 2          4.9         3.0</span></span>
<span id="cb455-26"><a href="mod-03.html#cb455-26" tabindex="-1"></a><span class="do">## 3          4.7         3.2</span></span>
<span id="cb455-27"><a href="mod-03.html#cb455-27" tabindex="-1"></a><span class="do">## 4          4.6         3.1</span></span>
<span id="cb455-28"><a href="mod-03.html#cb455-28" tabindex="-1"></a><span class="do">## 5          5.0         3.6</span></span></code></pre></div>
</div>
<div id="modifying-variables" class="section level4 hasAnchor" number="3.5.2.2">
<h4><span class="header-section-number">3.5.2.2</span> Modifying variables<a href="mod-03.html#modifying-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Variables can be modified by assigning them their new values. Note that this overwrites the previous values. If you think you might want the old values for some reason, save the modified values in a new variable instead.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="mod-03.html#cb456-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,] <span class="co"># spare copy for demonstration</span></span>
<span id="cb456-2"><a href="mod-03.html#cb456-2" tabindex="-1"></a>x<span class="sc">$</span>Petal.Length <span class="ot">&lt;-</span> <span class="fu">log</span>(x<span class="sc">$</span>Petal.Length)</span>
<span id="cb456-3"><a href="mod-03.html#cb456-3" tabindex="-1"></a></span>
<span id="cb456-4"><a href="mod-03.html#cb456-4" tabindex="-1"></a><span class="co"># better: keep modified values in new variable</span></span>
<span id="cb456-5"><a href="mod-03.html#cb456-5" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,] <span class="co"># spare copy for demonstration</span></span>
<span id="cb456-6"><a href="mod-03.html#cb456-6" tabindex="-1"></a>x<span class="sc">$</span>log.petlen <span class="ot">&lt;-</span> <span class="fu">log</span>(x<span class="sc">$</span>Petal.Length)</span></code></pre></div>
</div>
<div id="changing-values-in-a-variable-using-a-rule" class="section level4 hasAnchor" number="3.5.2.3">
<h4><span class="header-section-number">3.5.2.3</span> Changing values in a variable using a rule<a href="mod-03.html#changing-values-in-a-variable-using-a-rule" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>By combining the methods for <a href="mod-03.html#mod-03-brackets">data selection</a> and assignment, values in a variable can be replaced according to their values.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="mod-03.html#cb457-1" tabindex="-1"></a><span class="co"># not run (long output), but try it on your machine!</span></span>
<span id="cb457-2"><a href="mod-03.html#cb457-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris</span>
<span id="cb457-3"><a href="mod-03.html#cb457-3" tabindex="-1"></a></span>
<span id="cb457-4"><a href="mod-03.html#cb457-4" tabindex="-1"></a><span class="co"># select and replace by one condition:</span></span>
<span id="cb457-5"><a href="mod-03.html#cb457-5" tabindex="-1"></a>flag <span class="ot">&lt;-</span> <span class="fu">which</span>(x<span class="sc">$</span>Sepal.Length <span class="sc">&gt;=</span> <span class="dv">6</span>)</span>
<span id="cb457-6"><a href="mod-03.html#cb457-6" tabindex="-1"></a>x<span class="sc">$</span>Sepal.Length[flag] <span class="ot">&lt;-</span> <span class="fl">5.99</span></span>
<span id="cb457-7"><a href="mod-03.html#cb457-7" tabindex="-1"></a>x</span>
<span id="cb457-8"><a href="mod-03.html#cb457-8" tabindex="-1"></a></span>
<span id="cb457-9"><a href="mod-03.html#cb457-9" tabindex="-1"></a><span class="co"># select and replace by 2 conditions:</span></span>
<span id="cb457-10"><a href="mod-03.html#cb457-10" tabindex="-1"></a>flag1 <span class="ot">&lt;-</span> <span class="fu">which</span>(x<span class="sc">$</span>Petal.Length <span class="sc">&gt;=</span> <span class="dv">3</span>)</span>
<span id="cb457-11"><a href="mod-03.html#cb457-11" tabindex="-1"></a>flag2 <span class="ot">&lt;-</span> <span class="fu">which</span>(x<span class="sc">$</span>Petal.Length <span class="sc">&lt;=</span> <span class="dv">5</span>)</span>
<span id="cb457-12"><a href="mod-03.html#cb457-12" tabindex="-1"></a>x<span class="sc">$</span>Petal.Length[<span class="fu">intersect</span>(flag1, flag2)] <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb457-13"><a href="mod-03.html#cb457-13" tabindex="-1"></a>x</span></code></pre></div>
</div>
<div id="renaming-variables" class="section level4 hasAnchor" number="3.5.2.4">
<h4><span class="header-section-number">3.5.2.4</span> Renaming variables<a href="mod-03.html#renaming-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Renaming variables in Excel is easy: just enter the new name into the cell at the top of a column. Things are a little more complicated in R but not much.</p>
<p>One way is to use the <strong>data frame editor</strong>. Use the <code>edit()</code> function to open the data editor, a spreadsheet-like interface for working with data frames. Then click on the column name and enter the new name (and then press ENTER). You can also edit individual values this way, but I don’t recommend this method for routine use because there is no record in your script of what was done.</p>
<p><img src="03_08.jpg" width="90%" style="display: block; margin: auto;" /></p>
<p>The better way is to rename the variable in code. There are a few ways to do this, but they all involve accessing the variable names using function <code>names()</code>.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="mod-03.html#cb458-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,] <span class="co"># spare copy for demonstration</span></span>
<span id="cb458-2"><a href="mod-03.html#cb458-2" tabindex="-1"></a></span>
<span id="cb458-3"><a href="mod-03.html#cb458-3" tabindex="-1"></a><span class="co"># by column number:</span></span>
<span id="cb458-4"><a href="mod-03.html#cb458-4" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;sep.len&quot;</span></span>
<span id="cb458-5"><a href="mod-03.html#cb458-5" tabindex="-1"></a>x</span>
<span id="cb458-6"><a href="mod-03.html#cb458-6" tabindex="-1"></a><span class="do">##   sep.len Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb458-7"><a href="mod-03.html#cb458-7" tabindex="-1"></a><span class="do">## 1     5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb458-8"><a href="mod-03.html#cb458-8" tabindex="-1"></a><span class="do">## 2     4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb458-9"><a href="mod-03.html#cb458-9" tabindex="-1"></a><span class="do">## 3     4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb458-10"><a href="mod-03.html#cb458-10" tabindex="-1"></a><span class="do">## 4     4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb458-11"><a href="mod-03.html#cb458-11" tabindex="-1"></a><span class="do">## 5     5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb458-12"><a href="mod-03.html#cb458-12" tabindex="-1"></a></span>
<span id="cb458-13"><a href="mod-03.html#cb458-13" tabindex="-1"></a><span class="co"># match name exactly:</span></span>
<span id="cb458-14"><a href="mod-03.html#cb458-14" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="fu">which</span>(<span class="fu">names</span>(x) <span class="sc">==</span> <span class="st">&quot;Petal.Length&quot;</span>)] <span class="ot">&lt;-</span> <span class="st">&quot;pet.len&quot;</span></span>
<span id="cb458-15"><a href="mod-03.html#cb458-15" tabindex="-1"></a>x</span>
<span id="cb458-16"><a href="mod-03.html#cb458-16" tabindex="-1"></a><span class="do">##   sep.len Sepal.Width pet.len Petal.Width Species</span></span>
<span id="cb458-17"><a href="mod-03.html#cb458-17" tabindex="-1"></a><span class="do">## 1     5.1         3.5     1.4         0.2  setosa</span></span>
<span id="cb458-18"><a href="mod-03.html#cb458-18" tabindex="-1"></a><span class="do">## 2     4.9         3.0     1.4         0.2  setosa</span></span>
<span id="cb458-19"><a href="mod-03.html#cb458-19" tabindex="-1"></a><span class="do">## 3     4.7         3.2     1.3         0.2  setosa</span></span>
<span id="cb458-20"><a href="mod-03.html#cb458-20" tabindex="-1"></a><span class="do">## 4     4.6         3.1     1.5         0.2  setosa</span></span>
<span id="cb458-21"><a href="mod-03.html#cb458-21" tabindex="-1"></a><span class="do">## 5     5.0         3.6     1.4         0.2  setosa</span></span>
<span id="cb458-22"><a href="mod-03.html#cb458-22" tabindex="-1"></a></span>
<span id="cb458-23"><a href="mod-03.html#cb458-23" tabindex="-1"></a><span class="co"># by position:</span></span>
<span id="cb458-24"><a href="mod-03.html#cb458-24" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="fu">ncol</span>(x)] <span class="ot">&lt;-</span> <span class="st">&quot;species&quot;</span></span>
<span id="cb458-25"><a href="mod-03.html#cb458-25" tabindex="-1"></a>x</span>
<span id="cb458-26"><a href="mod-03.html#cb458-26" tabindex="-1"></a><span class="do">##   sep.len Sepal.Width pet.len Petal.Width species</span></span>
<span id="cb458-27"><a href="mod-03.html#cb458-27" tabindex="-1"></a><span class="do">## 1     5.1         3.5     1.4         0.2  setosa</span></span>
<span id="cb458-28"><a href="mod-03.html#cb458-28" tabindex="-1"></a><span class="do">## 2     4.9         3.0     1.4         0.2  setosa</span></span>
<span id="cb458-29"><a href="mod-03.html#cb458-29" tabindex="-1"></a><span class="do">## 3     4.7         3.2     1.3         0.2  setosa</span></span>
<span id="cb458-30"><a href="mod-03.html#cb458-30" tabindex="-1"></a><span class="do">## 4     4.6         3.1     1.5         0.2  setosa</span></span>
<span id="cb458-31"><a href="mod-03.html#cb458-31" tabindex="-1"></a><span class="do">## 5     5.0         3.6     1.4         0.2  setosa</span></span>
<span id="cb458-32"><a href="mod-03.html#cb458-32" tabindex="-1"></a></span>
<span id="cb458-33"><a href="mod-03.html#cb458-33" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;petal.len&quot;</span></span>
<span id="cb458-34"><a href="mod-03.html#cb458-34" tabindex="-1"></a>x</span>
<span id="cb458-35"><a href="mod-03.html#cb458-35" tabindex="-1"></a><span class="do">##   petal.len Sepal.Width pet.len Petal.Width species</span></span>
<span id="cb458-36"><a href="mod-03.html#cb458-36" tabindex="-1"></a><span class="do">## 1       5.1         3.5     1.4         0.2  setosa</span></span>
<span id="cb458-37"><a href="mod-03.html#cb458-37" tabindex="-1"></a><span class="do">## 2       4.9         3.0     1.4         0.2  setosa</span></span>
<span id="cb458-38"><a href="mod-03.html#cb458-38" tabindex="-1"></a><span class="do">## 3       4.7         3.2     1.3         0.2  setosa</span></span>
<span id="cb458-39"><a href="mod-03.html#cb458-39" tabindex="-1"></a><span class="do">## 4       4.6         3.1     1.5         0.2  setosa</span></span>
<span id="cb458-40"><a href="mod-03.html#cb458-40" tabindex="-1"></a><span class="do">## 5       5.0         3.6     1.4         0.2  setosa</span></span>
<span id="cb458-41"><a href="mod-03.html#cb458-41" tabindex="-1"></a></span>
<span id="cb458-42"><a href="mod-03.html#cb458-42" tabindex="-1"></a><span class="co"># change several names at once:</span></span>
<span id="cb458-43"><a href="mod-03.html#cb458-43" tabindex="-1"></a><span class="fu">names</span>(x)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;x&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb458-44"><a href="mod-03.html#cb458-44" tabindex="-1"></a>x</span>
<span id="cb458-45"><a href="mod-03.html#cb458-45" tabindex="-1"></a><span class="do">##    x1  x2  x3  x4 species</span></span>
<span id="cb458-46"><a href="mod-03.html#cb458-46" tabindex="-1"></a><span class="do">## 1 5.1 3.5 1.4 0.2  setosa</span></span>
<span id="cb458-47"><a href="mod-03.html#cb458-47" tabindex="-1"></a><span class="do">## 2 4.9 3.0 1.4 0.2  setosa</span></span>
<span id="cb458-48"><a href="mod-03.html#cb458-48" tabindex="-1"></a><span class="do">## 3 4.7 3.2 1.3 0.2  setosa</span></span>
<span id="cb458-49"><a href="mod-03.html#cb458-49" tabindex="-1"></a><span class="do">## 4 4.6 3.1 1.5 0.2  setosa</span></span>
<span id="cb458-50"><a href="mod-03.html#cb458-50" tabindex="-1"></a><span class="do">## 5 5.0 3.6 1.4 0.2  setosa</span></span></code></pre></div>
<p>Finally, you can make a new copy of the variable with the name you want, then delete the original version. This has the disadvantage of changing the order of columns.</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="mod-03.html#cb459-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,] <span class="co"># spare copy for demonstration</span></span>
<span id="cb459-2"><a href="mod-03.html#cb459-2" tabindex="-1"></a>x<span class="sc">$</span>pet.len <span class="ot">&lt;-</span> x<span class="sc">$</span>Petal.Length</span>
<span id="cb459-3"><a href="mod-03.html#cb459-3" tabindex="-1"></a>x<span class="sc">$</span>Petal.Length <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb459-4"><a href="mod-03.html#cb459-4" tabindex="-1"></a>x</span>
<span id="cb459-5"><a href="mod-03.html#cb459-5" tabindex="-1"></a><span class="do">##   Sepal.Length Sepal.Width Petal.Width Species pet.len</span></span>
<span id="cb459-6"><a href="mod-03.html#cb459-6" tabindex="-1"></a><span class="do">## 1          5.1         3.5         0.2  setosa     1.4</span></span>
<span id="cb459-7"><a href="mod-03.html#cb459-7" tabindex="-1"></a><span class="do">## 2          4.9         3.0         0.2  setosa     1.4</span></span>
<span id="cb459-8"><a href="mod-03.html#cb459-8" tabindex="-1"></a><span class="do">## 3          4.7         3.2         0.2  setosa     1.3</span></span>
<span id="cb459-9"><a href="mod-03.html#cb459-9" tabindex="-1"></a><span class="do">## 4          4.6         3.1         0.2  setosa     1.5</span></span>
<span id="cb459-10"><a href="mod-03.html#cb459-10" tabindex="-1"></a><span class="do">## 5          5.0         3.6         0.2  setosa     1.4</span></span></code></pre></div>
</div>
<div id="rearranging-columns" class="section level4 hasAnchor" number="3.5.2.5">
<h4><span class="header-section-number">3.5.2.5</span> Rearranging columns<a href="mod-03.html#rearranging-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Reordering records or columns within a data frame is accomplished by creating a new version of the dataset with the desired arrangement. This rearrangement is accomplished using methods we have already seen.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="mod-03.html#cb460-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb460-2"><a href="mod-03.html#cb460-2" tabindex="-1"></a></span>
<span id="cb460-3"><a href="mod-03.html#cb460-3" tabindex="-1"></a><span class="co"># rearrange by number</span></span>
<span id="cb460-4"><a href="mod-03.html#cb460-4" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[,<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>)]</span>
<span id="cb460-5"><a href="mod-03.html#cb460-5" tabindex="-1"></a>x</span>
<span id="cb460-6"><a href="mod-03.html#cb460-6" tabindex="-1"></a><span class="do">##   Species Petal.Length Petal.Width Sepal.Length Sepal.Width</span></span>
<span id="cb460-7"><a href="mod-03.html#cb460-7" tabindex="-1"></a><span class="do">## 1  setosa          1.4         0.2          5.1         3.5</span></span>
<span id="cb460-8"><a href="mod-03.html#cb460-8" tabindex="-1"></a><span class="do">## 2  setosa          1.4         0.2          4.9         3.0</span></span>
<span id="cb460-9"><a href="mod-03.html#cb460-9" tabindex="-1"></a><span class="do">## 3  setosa          1.3         0.2          4.7         3.2</span></span>
<span id="cb460-10"><a href="mod-03.html#cb460-10" tabindex="-1"></a><span class="do">## 4  setosa          1.5         0.2          4.6         3.1</span></span>
<span id="cb460-11"><a href="mod-03.html#cb460-11" tabindex="-1"></a><span class="do">## 5  setosa          1.4         0.2          5.0         3.6</span></span>
<span id="cb460-12"><a href="mod-03.html#cb460-12" tabindex="-1"></a></span>
<span id="cb460-13"><a href="mod-03.html#cb460-13" tabindex="-1"></a><span class="co"># rearrange by name</span></span>
<span id="cb460-14"><a href="mod-03.html#cb460-14" tabindex="-1"></a>col.order <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Species&quot;</span>, <span class="st">&quot;Sepal.Length&quot;</span>, <span class="st">&quot;Sepal.Width&quot;</span>, </span>
<span id="cb460-15"><a href="mod-03.html#cb460-15" tabindex="-1"></a>               <span class="st">&quot;Petal.Length&quot;</span>, <span class="st">&quot;Petal.Width&quot;</span>)</span>
<span id="cb460-16"><a href="mod-03.html#cb460-16" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[,col.order]</span>
<span id="cb460-17"><a href="mod-03.html#cb460-17" tabindex="-1"></a>x</span>
<span id="cb460-18"><a href="mod-03.html#cb460-18" tabindex="-1"></a><span class="do">##   Species Sepal.Length Sepal.Width Petal.Length Petal.Width</span></span>
<span id="cb460-19"><a href="mod-03.html#cb460-19" tabindex="-1"></a><span class="do">## 1  setosa          5.1         3.5          1.4         0.2</span></span>
<span id="cb460-20"><a href="mod-03.html#cb460-20" tabindex="-1"></a><span class="do">## 2  setosa          4.9         3.0          1.4         0.2</span></span>
<span id="cb460-21"><a href="mod-03.html#cb460-21" tabindex="-1"></a><span class="do">## 3  setosa          4.7         3.2          1.3         0.2</span></span>
<span id="cb460-22"><a href="mod-03.html#cb460-22" tabindex="-1"></a><span class="do">## 4  setosa          4.6         3.1          1.5         0.2</span></span>
<span id="cb460-23"><a href="mod-03.html#cb460-23" tabindex="-1"></a><span class="do">## 5  setosa          5.0         3.6          1.4         0.2</span></span></code></pre></div>
</div>
<div id="sorting-and-ordering-data" class="section level4 hasAnchor" number="3.5.2.6">
<h4><span class="header-section-number">3.5.2.6</span> Sorting and ordering data<a href="mod-03.html#sorting-and-ordering-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sorting data frames is mostly done using the function <code>order()</code>. This function is usually put inside brackets in the rows slot. The arguments to <code>order()</code> define the variables by which the data frame will be sorted. Rows are sorted by the first variable, then the second, and so on. By default, rows are placed in <em>ascending</em> order.</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="mod-03.html#cb461-1" tabindex="-1"></a><span class="co"># not run (long output), but try on your machine!</span></span>
<span id="cb461-2"><a href="mod-03.html#cb461-2" tabindex="-1"></a></span>
<span id="cb461-3"><a href="mod-03.html#cb461-3" tabindex="-1"></a><span class="do">## order by conc (ascending)</span></span>
<span id="cb461-4"><a href="mod-03.html#cb461-4" tabindex="-1"></a>DNase</span>
<span id="cb461-5"><a href="mod-03.html#cb461-5" tabindex="-1"></a>DNase[<span class="fu">order</span>(DNase<span class="sc">$</span>conc),]</span>
<span id="cb461-6"><a href="mod-03.html#cb461-6" tabindex="-1"></a></span>
<span id="cb461-7"><a href="mod-03.html#cb461-7" tabindex="-1"></a><span class="do">## order by species (alphabetical ascending), </span></span>
<span id="cb461-8"><a href="mod-03.html#cb461-8" tabindex="-1"></a><span class="do">##  then by petal length (ascending)</span></span>
<span id="cb461-9"><a href="mod-03.html#cb461-9" tabindex="-1"></a>iris</span>
<span id="cb461-10"><a href="mod-03.html#cb461-10" tabindex="-1"></a>iris[<span class="fu">order</span>(iris<span class="sc">$</span>Species, iris<span class="sc">$</span>Petal.Length),]</span></code></pre></div>
<p>You can multiple variables to <code>order()</code>, by name, and R will order the rows in each variable in the order supplied. By default, records are sorted in ascending order. If you want a mix of ascending and descending order, you have to specify the <code>radix</code> method and specify whether you want the order to be decreasing (TRUE) or not (FALSE) for each variable:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="mod-03.html#cb462-1" tabindex="-1"></a><span class="co"># not run (long output), but try on your machine!</span></span>
<span id="cb462-2"><a href="mod-03.html#cb462-2" tabindex="-1"></a></span>
<span id="cb462-3"><a href="mod-03.html#cb462-3" tabindex="-1"></a>iris[<span class="fu">order</span>(iris<span class="sc">$</span>Species, iris<span class="sc">$</span>Petal.Length, </span>
<span id="cb462-4"><a href="mod-03.html#cb462-4" tabindex="-1"></a>           <span class="at">decreasing=</span><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb462-5"><a href="mod-03.html#cb462-5" tabindex="-1"></a>           <span class="at">method=</span><span class="st">&quot;radix&quot;</span>),]</span>
<span id="cb462-6"><a href="mod-03.html#cb462-6" tabindex="-1"></a></span>
<span id="cb462-7"><a href="mod-03.html#cb462-7" tabindex="-1"></a>iris[<span class="fu">order</span>(iris<span class="sc">$</span>Species, iris<span class="sc">$</span>Petal.Length, </span>
<span id="cb462-8"><a href="mod-03.html#cb462-8" tabindex="-1"></a>           <span class="at">decreasing=</span><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb462-9"><a href="mod-03.html#cb462-9" tabindex="-1"></a>           <span class="at">method=</span><span class="st">&quot;radix&quot;</span>),]</span></code></pre></div>
</div>
<div id="adding-or-removing-rows" class="section level4 hasAnchor" number="3.5.2.7">
<h4><span class="header-section-number">3.5.2.7</span> Adding or removing rows<a href="mod-03.html#adding-or-removing-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Removing rows works a lot like removing columns. You can use the bracket notation to either remove the rows with negative indices, or make a new version of the data frame with only some of the rows.</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="mod-03.html#cb463-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb463-2"><a href="mod-03.html#cb463-2" tabindex="-1"></a></span>
<span id="cb463-3"><a href="mod-03.html#cb463-3" tabindex="-1"></a><span class="co"># remove by row number</span></span>
<span id="cb463-4"><a href="mod-03.html#cb463-4" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb463-5"><a href="mod-03.html#cb463-5" tabindex="-1"></a><span class="do">##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb463-6"><a href="mod-03.html#cb463-6" tabindex="-1"></a><span class="do">## 2           4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb463-7"><a href="mod-03.html#cb463-7" tabindex="-1"></a><span class="do">## 3           4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb463-8"><a href="mod-03.html#cb463-8" tabindex="-1"></a><span class="do">## 4           4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb463-9"><a href="mod-03.html#cb463-9" tabindex="-1"></a><span class="do">## 5           5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb463-10"><a href="mod-03.html#cb463-10" tabindex="-1"></a><span class="do">## 6           5.4         3.9          1.7         0.4  setosa</span></span>
<span id="cb463-11"><a href="mod-03.html#cb463-11" tabindex="-1"></a><span class="do">## 7           4.6         3.4          1.4         0.3  setosa</span></span>
<span id="cb463-12"><a href="mod-03.html#cb463-12" tabindex="-1"></a><span class="do">## 8           5.0         3.4          1.5         0.2  setosa</span></span>
<span id="cb463-13"><a href="mod-03.html#cb463-13" tabindex="-1"></a><span class="do">## 9           4.4         2.9          1.4         0.2  setosa</span></span>
<span id="cb463-14"><a href="mod-03.html#cb463-14" tabindex="-1"></a><span class="do">## 10          4.9         3.1          1.5         0.1  setosa</span></span>
<span id="cb463-15"><a href="mod-03.html#cb463-15" tabindex="-1"></a>x[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),]</span>
<span id="cb463-16"><a href="mod-03.html#cb463-16" tabindex="-1"></a><span class="do">##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb463-17"><a href="mod-03.html#cb463-17" tabindex="-1"></a><span class="do">## 4           4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb463-18"><a href="mod-03.html#cb463-18" tabindex="-1"></a><span class="do">## 5           5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb463-19"><a href="mod-03.html#cb463-19" tabindex="-1"></a><span class="do">## 6           5.4         3.9          1.7         0.4  setosa</span></span>
<span id="cb463-20"><a href="mod-03.html#cb463-20" tabindex="-1"></a><span class="do">## 7           4.6         3.4          1.4         0.3  setosa</span></span>
<span id="cb463-21"><a href="mod-03.html#cb463-21" tabindex="-1"></a><span class="do">## 8           5.0         3.4          1.5         0.2  setosa</span></span>
<span id="cb463-22"><a href="mod-03.html#cb463-22" tabindex="-1"></a><span class="do">## 9           4.4         2.9          1.4         0.2  setosa</span></span>
<span id="cb463-23"><a href="mod-03.html#cb463-23" tabindex="-1"></a><span class="do">## 10          4.9         3.1          1.5         0.1  setosa</span></span>
<span id="cb463-24"><a href="mod-03.html#cb463-24" tabindex="-1"></a>x[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>),]</span>
<span id="cb463-25"><a href="mod-03.html#cb463-25" tabindex="-1"></a><span class="do">##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb463-26"><a href="mod-03.html#cb463-26" tabindex="-1"></a><span class="do">## 2           4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb463-27"><a href="mod-03.html#cb463-27" tabindex="-1"></a><span class="do">## 4           4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb463-28"><a href="mod-03.html#cb463-28" tabindex="-1"></a><span class="do">## 6           5.4         3.9          1.7         0.4  setosa</span></span>
<span id="cb463-29"><a href="mod-03.html#cb463-29" tabindex="-1"></a><span class="do">## 8           5.0         3.4          1.5         0.2  setosa</span></span>
<span id="cb463-30"><a href="mod-03.html#cb463-30" tabindex="-1"></a><span class="do">## 10          4.9         3.1          1.5         0.1  setosa</span></span>
<span id="cb463-31"><a href="mod-03.html#cb463-31" tabindex="-1"></a></span>
<span id="cb463-32"><a href="mod-03.html#cb463-32" tabindex="-1"></a><span class="co"># or, make a new copy with the </span></span>
<span id="cb463-33"><a href="mod-03.html#cb463-33" tabindex="-1"></a><span class="co"># rows to keep</span></span>
<span id="cb463-34"><a href="mod-03.html#cb463-34" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb463-35"><a href="mod-03.html#cb463-35" tabindex="-1"></a><span class="do">##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb463-36"><a href="mod-03.html#cb463-36" tabindex="-1"></a><span class="do">## 2           4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb463-37"><a href="mod-03.html#cb463-37" tabindex="-1"></a><span class="do">## 3           4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb463-38"><a href="mod-03.html#cb463-38" tabindex="-1"></a><span class="do">## 4           4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb463-39"><a href="mod-03.html#cb463-39" tabindex="-1"></a><span class="do">## 5           5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb463-40"><a href="mod-03.html#cb463-40" tabindex="-1"></a><span class="do">## 6           5.4         3.9          1.7         0.4  setosa</span></span>
<span id="cb463-41"><a href="mod-03.html#cb463-41" tabindex="-1"></a><span class="do">## 7           4.6         3.4          1.4         0.3  setosa</span></span>
<span id="cb463-42"><a href="mod-03.html#cb463-42" tabindex="-1"></a><span class="do">## 8           5.0         3.4          1.5         0.2  setosa</span></span>
<span id="cb463-43"><a href="mod-03.html#cb463-43" tabindex="-1"></a><span class="do">## 9           4.4         2.9          1.4         0.2  setosa</span></span>
<span id="cb463-44"><a href="mod-03.html#cb463-44" tabindex="-1"></a><span class="do">## 10          4.9         3.1          1.5         0.1  setosa</span></span>
<span id="cb463-45"><a href="mod-03.html#cb463-45" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>),]</span>
<span id="cb463-46"><a href="mod-03.html#cb463-46" tabindex="-1"></a><span class="do">##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb463-47"><a href="mod-03.html#cb463-47" tabindex="-1"></a><span class="do">## 2           4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb463-48"><a href="mod-03.html#cb463-48" tabindex="-1"></a><span class="do">## 4           4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb463-49"><a href="mod-03.html#cb463-49" tabindex="-1"></a><span class="do">## 6           5.4         3.9          1.7         0.4  setosa</span></span>
<span id="cb463-50"><a href="mod-03.html#cb463-50" tabindex="-1"></a><span class="do">## 8           5.0         3.4          1.5         0.2  setosa</span></span>
<span id="cb463-51"><a href="mod-03.html#cb463-51" tabindex="-1"></a><span class="do">## 10          4.9         3.1          1.5         0.1  setosa</span></span></code></pre></div>
<p>Adding rows can be done with <code>rbind()</code> (short for “row bind”). This function is analogous to <code>cbind()</code>, which joins objects by their columns. Adding rows to a data frame is tantamount to combining it with another data frame. The data frames being combined must have the same columns, with the same names, but the order of columns can be different.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="mod-03.html#cb464-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb464-2"><a href="mod-03.html#cb464-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> iris[<span class="dv">15</span><span class="sc">:</span><span class="dv">20</span>,]</span>
<span id="cb464-3"><a href="mod-03.html#cb464-3" tabindex="-1"></a></span>
<span id="cb464-4"><a href="mod-03.html#cb464-4" tabindex="-1"></a><span class="co"># columns match exactly:</span></span>
<span id="cb464-5"><a href="mod-03.html#cb464-5" tabindex="-1"></a><span class="fu">rbind</span>(x, y)</span>
<span id="cb464-6"><a href="mod-03.html#cb464-6" tabindex="-1"></a><span class="do">##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb464-7"><a href="mod-03.html#cb464-7" tabindex="-1"></a><span class="do">## 1           5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb464-8"><a href="mod-03.html#cb464-8" tabindex="-1"></a><span class="do">## 2           4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb464-9"><a href="mod-03.html#cb464-9" tabindex="-1"></a><span class="do">## 3           4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb464-10"><a href="mod-03.html#cb464-10" tabindex="-1"></a><span class="do">## 4           4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb464-11"><a href="mod-03.html#cb464-11" tabindex="-1"></a><span class="do">## 5           5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb464-12"><a href="mod-03.html#cb464-12" tabindex="-1"></a><span class="do">## 6           5.4         3.9          1.7         0.4  setosa</span></span>
<span id="cb464-13"><a href="mod-03.html#cb464-13" tabindex="-1"></a><span class="do">## 7           4.6         3.4          1.4         0.3  setosa</span></span>
<span id="cb464-14"><a href="mod-03.html#cb464-14" tabindex="-1"></a><span class="do">## 8           5.0         3.4          1.5         0.2  setosa</span></span>
<span id="cb464-15"><a href="mod-03.html#cb464-15" tabindex="-1"></a><span class="do">## 9           4.4         2.9          1.4         0.2  setosa</span></span>
<span id="cb464-16"><a href="mod-03.html#cb464-16" tabindex="-1"></a><span class="do">## 10          4.9         3.1          1.5         0.1  setosa</span></span>
<span id="cb464-17"><a href="mod-03.html#cb464-17" tabindex="-1"></a><span class="do">## 15          5.8         4.0          1.2         0.2  setosa</span></span>
<span id="cb464-18"><a href="mod-03.html#cb464-18" tabindex="-1"></a><span class="do">## 16          5.7         4.4          1.5         0.4  setosa</span></span>
<span id="cb464-19"><a href="mod-03.html#cb464-19" tabindex="-1"></a><span class="do">## 17          5.4         3.9          1.3         0.4  setosa</span></span>
<span id="cb464-20"><a href="mod-03.html#cb464-20" tabindex="-1"></a><span class="do">## 18          5.1         3.5          1.4         0.3  setosa</span></span>
<span id="cb464-21"><a href="mod-03.html#cb464-21" tabindex="-1"></a><span class="do">## 19          5.7         3.8          1.7         0.3  setosa</span></span>
<span id="cb464-22"><a href="mod-03.html#cb464-22" tabindex="-1"></a><span class="do">## 20          5.1         3.8          1.5         0.3  setosa</span></span>
<span id="cb464-23"><a href="mod-03.html#cb464-23" tabindex="-1"></a></span>
<span id="cb464-24"><a href="mod-03.html#cb464-24" tabindex="-1"></a><span class="co"># columns in different order:</span></span>
<span id="cb464-25"><a href="mod-03.html#cb464-25" tabindex="-1"></a>y2 <span class="ot">&lt;-</span> y[,<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">4</span>)]</span>
<span id="cb464-26"><a href="mod-03.html#cb464-26" tabindex="-1"></a><span class="fu">rbind</span>(x,y2)</span>
<span id="cb464-27"><a href="mod-03.html#cb464-27" tabindex="-1"></a><span class="do">##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb464-28"><a href="mod-03.html#cb464-28" tabindex="-1"></a><span class="do">## 1           5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb464-29"><a href="mod-03.html#cb464-29" tabindex="-1"></a><span class="do">## 2           4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb464-30"><a href="mod-03.html#cb464-30" tabindex="-1"></a><span class="do">## 3           4.7         3.2          1.3         0.2  setosa</span></span>
<span id="cb464-31"><a href="mod-03.html#cb464-31" tabindex="-1"></a><span class="do">## 4           4.6         3.1          1.5         0.2  setosa</span></span>
<span id="cb464-32"><a href="mod-03.html#cb464-32" tabindex="-1"></a><span class="do">## 5           5.0         3.6          1.4         0.2  setosa</span></span>
<span id="cb464-33"><a href="mod-03.html#cb464-33" tabindex="-1"></a><span class="do">## 6           5.4         3.9          1.7         0.4  setosa</span></span>
<span id="cb464-34"><a href="mod-03.html#cb464-34" tabindex="-1"></a><span class="do">## 7           4.6         3.4          1.4         0.3  setosa</span></span>
<span id="cb464-35"><a href="mod-03.html#cb464-35" tabindex="-1"></a><span class="do">## 8           5.0         3.4          1.5         0.2  setosa</span></span>
<span id="cb464-36"><a href="mod-03.html#cb464-36" tabindex="-1"></a><span class="do">## 9           4.4         2.9          1.4         0.2  setosa</span></span>
<span id="cb464-37"><a href="mod-03.html#cb464-37" tabindex="-1"></a><span class="do">## 10          4.9         3.1          1.5         0.1  setosa</span></span>
<span id="cb464-38"><a href="mod-03.html#cb464-38" tabindex="-1"></a><span class="do">## 15          5.8         4.0          1.2         0.2  setosa</span></span>
<span id="cb464-39"><a href="mod-03.html#cb464-39" tabindex="-1"></a><span class="do">## 16          5.7         4.4          1.5         0.4  setosa</span></span>
<span id="cb464-40"><a href="mod-03.html#cb464-40" tabindex="-1"></a><span class="do">## 17          5.4         3.9          1.3         0.4  setosa</span></span>
<span id="cb464-41"><a href="mod-03.html#cb464-41" tabindex="-1"></a><span class="do">## 18          5.1         3.5          1.4         0.3  setosa</span></span>
<span id="cb464-42"><a href="mod-03.html#cb464-42" tabindex="-1"></a><span class="do">## 19          5.7         3.8          1.7         0.3  setosa</span></span>
<span id="cb464-43"><a href="mod-03.html#cb464-43" tabindex="-1"></a><span class="do">## 20          5.1         3.8          1.5         0.3  setosa</span></span>
<span id="cb464-44"><a href="mod-03.html#cb464-44" tabindex="-1"></a></span>
<span id="cb464-45"><a href="mod-03.html#cb464-45" tabindex="-1"></a><span class="co"># result inherits order of columns from first argument:</span></span>
<span id="cb464-46"><a href="mod-03.html#cb464-46" tabindex="-1"></a><span class="fu">rbind</span>(y2,x)</span>
<span id="cb464-47"><a href="mod-03.html#cb464-47" tabindex="-1"></a><span class="do">##    Petal.Length Species Sepal.Width Sepal.Length Petal.Width</span></span>
<span id="cb464-48"><a href="mod-03.html#cb464-48" tabindex="-1"></a><span class="do">## 15          1.2  setosa         4.0          5.8         0.2</span></span>
<span id="cb464-49"><a href="mod-03.html#cb464-49" tabindex="-1"></a><span class="do">## 16          1.5  setosa         4.4          5.7         0.4</span></span>
<span id="cb464-50"><a href="mod-03.html#cb464-50" tabindex="-1"></a><span class="do">## 17          1.3  setosa         3.9          5.4         0.4</span></span>
<span id="cb464-51"><a href="mod-03.html#cb464-51" tabindex="-1"></a><span class="do">## 18          1.4  setosa         3.5          5.1         0.3</span></span>
<span id="cb464-52"><a href="mod-03.html#cb464-52" tabindex="-1"></a><span class="do">## 19          1.7  setosa         3.8          5.7         0.3</span></span>
<span id="cb464-53"><a href="mod-03.html#cb464-53" tabindex="-1"></a><span class="do">## 20          1.5  setosa         3.8          5.1         0.3</span></span>
<span id="cb464-54"><a href="mod-03.html#cb464-54" tabindex="-1"></a><span class="do">## 1           1.4  setosa         3.5          5.1         0.2</span></span>
<span id="cb464-55"><a href="mod-03.html#cb464-55" tabindex="-1"></a><span class="do">## 2           1.4  setosa         3.0          4.9         0.2</span></span>
<span id="cb464-56"><a href="mod-03.html#cb464-56" tabindex="-1"></a><span class="do">## 3           1.3  setosa         3.2          4.7         0.2</span></span>
<span id="cb464-57"><a href="mod-03.html#cb464-57" tabindex="-1"></a><span class="do">## 4           1.5  setosa         3.1          4.6         0.2</span></span>
<span id="cb464-58"><a href="mod-03.html#cb464-58" tabindex="-1"></a><span class="do">## 5           1.4  setosa         3.6          5.0         0.2</span></span>
<span id="cb464-59"><a href="mod-03.html#cb464-59" tabindex="-1"></a><span class="do">## 6           1.7  setosa         3.9          5.4         0.4</span></span>
<span id="cb464-60"><a href="mod-03.html#cb464-60" tabindex="-1"></a><span class="do">## 7           1.4  setosa         3.4          4.6         0.3</span></span>
<span id="cb464-61"><a href="mod-03.html#cb464-61" tabindex="-1"></a><span class="do">## 8           1.5  setosa         3.4          5.0         0.2</span></span>
<span id="cb464-62"><a href="mod-03.html#cb464-62" tabindex="-1"></a><span class="do">## 9           1.4  setosa         2.9          4.4         0.2</span></span>
<span id="cb464-63"><a href="mod-03.html#cb464-63" tabindex="-1"></a><span class="do">## 10          1.5  setosa         3.1          4.9         0.1</span></span></code></pre></div>
</div>
</div>
<div id="other-data-frame-operations" class="section level3 hasAnchor" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> Other data frame operations<a href="mod-03.html#other-data-frame-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="merging-datasets" class="section level4 hasAnchor" number="3.5.3.1">
<h4><span class="header-section-number">3.5.3.1</span> Merging datasets<a href="mod-03.html#merging-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Data sets for a complex project might reside in several tables, related by <strong>key variables</strong>. These are variables that are shared by more than one table, and define which records in each table are related to records in another table. This is exactly what relational databases do, but most biologists have small enough datasets that databases aren’t necessary.</p>
<p>Data frames can be combined by manually matching records between tables, using the function <code>match()</code>. The example below uses three interrelated tables from a stream dataset I work with. You need the datasets <a href="https://greenquanteco.github.io/dat_samples_2021-08-04.csv">dat_samples_2021-08-04.csv</a>, <a href="https://greenquanteco.github.io/dat_stream_indices_2021-08-04.csv">dat_stream_indices_2021-08-04.csv</a>, and <a href="https://greenquanteco.github.io/loc_meta_vaa_2020-11-18.csv">loc_meta_vaa_2020-11-18.csv</a>. Download them and put them in your R home directory.</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="mod-03.html#cb465-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span>
<span id="cb465-2"><a href="mod-03.html#cb465-2" tabindex="-1"></a></span>
<span id="cb465-3"><a href="mod-03.html#cb465-3" tabindex="-1"></a><span class="co"># data file names</span></span>
<span id="cb465-4"><a href="mod-03.html#cb465-4" tabindex="-1"></a>name1 <span class="ot">&lt;-</span> <span class="st">&quot;dat_samples_2021-08-04.csv&quot;</span></span>
<span id="cb465-5"><a href="mod-03.html#cb465-5" tabindex="-1"></a>name2 <span class="ot">&lt;-</span> <span class="st">&quot;dat_stream_indices_2021-08-04.csv&quot;</span></span>
<span id="cb465-6"><a href="mod-03.html#cb465-6" tabindex="-1"></a>name3 <span class="ot">&lt;-</span> <span class="st">&quot;loc_meta_vaa_2020-11-18.csv&quot;</span></span>
<span id="cb465-7"><a href="mod-03.html#cb465-7" tabindex="-1"></a></span>
<span id="cb465-8"><a href="mod-03.html#cb465-8" tabindex="-1"></a><span class="co"># import</span></span>
<span id="cb465-9"><a href="mod-03.html#cb465-9" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(name1, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb465-10"><a href="mod-03.html#cb465-10" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(name2, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb465-11"><a href="mod-03.html#cb465-11" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(name3, <span class="at">header=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>Notice that the tables have only “key” variables in common, and tables don’t necessarily share any variables with <em>every</em> other table.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="mod-03.html#cb466-1" tabindex="-1"></a><span class="fu">intersect</span>(<span class="fu">names</span>(x1), <span class="fu">names</span>(x2))</span>
<span id="cb466-2"><a href="mod-03.html#cb466-2" tabindex="-1"></a><span class="do">## [1] &quot;uocc&quot;</span></span>
<span id="cb466-3"><a href="mod-03.html#cb466-3" tabindex="-1"></a><span class="fu">intersect</span>(<span class="fu">names</span>(x1), <span class="fu">names</span>(x3))</span>
<span id="cb466-4"><a href="mod-03.html#cb466-4" tabindex="-1"></a><span class="do">## [1] &quot;loc&quot;</span></span>
<span id="cb466-5"><a href="mod-03.html#cb466-5" tabindex="-1"></a><span class="fu">intersect</span>(<span class="fu">names</span>(x2), <span class="fu">names</span>(x3))</span>
<span id="cb466-6"><a href="mod-03.html#cb466-6" tabindex="-1"></a><span class="do">## character(0)</span></span></code></pre></div>
<p>Table x2 contains the response variable, so we’ll use it to build main dataset <code>dat</code>.</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="mod-03.html#cb467-1" tabindex="-1"></a>dat <span class="ot">&lt;-</span> x2</span>
<span id="cb467-2"><a href="mod-03.html#cb467-2" tabindex="-1"></a></span>
<span id="cb467-3"><a href="mod-03.html#cb467-3" tabindex="-1"></a><span class="co"># add site name, year, and date from x1</span></span>
<span id="cb467-4"><a href="mod-03.html#cb467-4" tabindex="-1"></a><span class="co"># by matching unique occasion (uocc) from</span></span>
<span id="cb467-5"><a href="mod-03.html#cb467-5" tabindex="-1"></a><span class="co"># dat to metadata table x1</span></span>
<span id="cb467-6"><a href="mod-03.html#cb467-6" tabindex="-1"></a>matchx <span class="ot">&lt;-</span> <span class="fu">match</span>(dat<span class="sc">$</span>uocc, x1<span class="sc">$</span>uocc)</span>
<span id="cb467-7"><a href="mod-03.html#cb467-7" tabindex="-1"></a>dat<span class="sc">$</span>site <span class="ot">&lt;-</span> x1<span class="sc">$</span>loc[matchx]</span>
<span id="cb467-8"><a href="mod-03.html#cb467-8" tabindex="-1"></a>dat<span class="sc">$</span>year <span class="ot">&lt;-</span> x1<span class="sc">$</span>year[matchx]</span>
<span id="cb467-9"><a href="mod-03.html#cb467-9" tabindex="-1"></a>dat<span class="sc">$</span>doy  <span class="ot">&lt;-</span> x1<span class="sc">$</span>doy[matchx]</span>
<span id="cb467-10"><a href="mod-03.html#cb467-10" tabindex="-1"></a></span>
<span id="cb467-11"><a href="mod-03.html#cb467-11" tabindex="-1"></a><span class="co"># dat now has site, which allows it to be</span></span>
<span id="cb467-12"><a href="mod-03.html#cb467-12" tabindex="-1"></a><span class="co"># related to the geographic metadata x3.</span></span>
<span id="cb467-13"><a href="mod-03.html#cb467-13" tabindex="-1"></a><span class="co"># grab latitude and longitude from x3</span></span>
<span id="cb467-14"><a href="mod-03.html#cb467-14" tabindex="-1"></a>matchx <span class="ot">&lt;-</span> <span class="fu">match</span>(dat<span class="sc">$</span>site, x3<span class="sc">$</span>loc)</span>
<span id="cb467-15"><a href="mod-03.html#cb467-15" tabindex="-1"></a>dat<span class="sc">$</span>lat <span class="ot">&lt;-</span> x3<span class="sc">$</span>lat[matchx]</span>
<span id="cb467-16"><a href="mod-03.html#cb467-16" tabindex="-1"></a>dat<span class="sc">$</span>long <span class="ot">&lt;-</span> x3<span class="sc">$</span>long[matchx]</span>
<span id="cb467-17"><a href="mod-03.html#cb467-17" tabindex="-1"></a></span>
<span id="cb467-18"><a href="mod-03.html#cb467-18" tabindex="-1"></a><span class="co"># inspect the results</span></span>
<span id="cb467-19"><a href="mod-03.html#cb467-19" tabindex="-1"></a><span class="fu">head</span>(dat)</span>
<span id="cb467-20"><a href="mod-03.html#cb467-20" tabindex="-1"></a><span class="do">##      uocc      ind        site year doy      lat      long</span></span>
<span id="cb467-21"><a href="mod-03.html#cb467-21" tabindex="-1"></a><span class="do">## 1 occ_001 48.40576 RV_01_16345 2017  54 34.05400 -83.24100</span></span>
<span id="cb467-22"><a href="mod-03.html#cb467-22" tabindex="-1"></a><span class="do">## 2 occ_002 56.78960   RV_01_240 2006  25 32.67461 -81.46906</span></span>
<span id="cb467-23"><a href="mod-03.html#cb467-23" tabindex="-1"></a><span class="do">## 3 occ_003 60.06336   RV_01_241 2003  33 33.58468 -82.65235</span></span>
<span id="cb467-24"><a href="mod-03.html#cb467-24" tabindex="-1"></a><span class="do">## 4 occ_004 21.30232   RV_01_242 2002 292 33.38387 -82.00422</span></span>
<span id="cb467-25"><a href="mod-03.html#cb467-25" tabindex="-1"></a><span class="do">## 5 occ_005 51.50136   RV_01_243 2002  12 33.83757 -82.91251</span></span>
<span id="cb467-26"><a href="mod-03.html#cb467-26" tabindex="-1"></a><span class="do">## 6 occ_006 73.91343   RV_01_244 2007  16 34.95895 -83.57158</span></span></code></pre></div>
<p>Matching many variables by hand can become very tedious and error-prone. An alternative, and usually faster way is the function <code>merge()</code>. This is a shortcut for the matching that we did manually above. The downside of using <code>merge()</code> is that it can be a little obtuse–<code>merge()</code> will attempt to match records exactly, which may or may not return the results you expect. Using <code>merge()</code> can also sometimes result in many duplicate columns or extra rows in the result. Always inspect the results of <code>merge()</code> to make sure it is doing what you expect (i.e., that you wrote the code correctly to get what you wanted!).</p>
<p>The commands below duplicate the merging done piecemeal above.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="mod-03.html#cb468-1" tabindex="-1"></a><span class="co"># x2 contains the response variable</span></span>
<span id="cb468-2"><a href="mod-03.html#cb468-2" tabindex="-1"></a>dat <span class="ot">&lt;-</span> x2</span>
<span id="cb468-3"><a href="mod-03.html#cb468-3" tabindex="-1"></a></span>
<span id="cb468-4"><a href="mod-03.html#cb468-4" tabindex="-1"></a><span class="co"># merge by the variables in common:</span></span>
<span id="cb468-5"><a href="mod-03.html#cb468-5" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> <span class="fu">merge</span>(dat, x1)</span>
<span id="cb468-6"><a href="mod-03.html#cb468-6" tabindex="-1"></a>dat3 <span class="ot">&lt;-</span> <span class="fu">merge</span>(dat2, x3)</span>
<span id="cb468-7"><a href="mod-03.html#cb468-7" tabindex="-1"></a><span class="fu">head</span>(dat3)</span></code></pre></div>
<pre><code>##           loc    uocc      ind year doy      lat      long         basin
## 1 RV_01_16345 occ_001 48.40576 2017  54 34.05400 -83.24100 Savannah (01)
## 2   RV_01_240 occ_002 56.78960 2006  25 32.67461 -81.46906 Savannah (01)
## 3   RV_01_241 occ_003 60.06336 2003  33 33.58468 -82.65235 Savannah (01)
## 4   RV_01_242 occ_004 21.30232 2002 292 33.38387 -82.00422 Savannah (01)
## 5   RV_01_243 occ_005 51.50136 2002  12 33.83757 -82.91251 Savannah (01)
## 6   RV_01_244 occ_006 73.91343 2007  16 34.95895 -83.57158 Savannah (01)
##         huc12   state   county             ecoregion3 ecoregion4
## 1 30601040402 Georgia  Madison               Piedmont        45b
## 2 30601090104 Georgia  Screven Southern Coastal Plain        75f
## 3 30601050203 Georgia   Warren               Piedmont        45c
## 4 30601060602 Georgia Richmond    Southeastern Plains        65c
## 5 30601040504 Georgia   Wilkes               Piedmont        45c
## 6 30601020101 Georgia    Towns             Blue Ridge        66d
##                                       eco4 gridcode catchkm2      fid      bfi
## 1                  Southern Outer Piedmont  2331987   2.3616  6278849 59.00000
## 2                     Sea Island Flatwoods  2339456  12.5667 20103925 57.01117
## 3                      Carolina Slate Belt  2334311  11.7000  6289897 44.00000
## 4                               Sand Hills  2335367   1.8666 22725381 63.94214
## 5                      Carolina Slate Belt  2331832  13.6170  6280051 50.75585
## 6 Southern Crystaline Ridges and Mountains  2328238   4.6449  6267588 64.17283
##        elev  roaddens storder        flow      slope   huc08 fish.rich
## 1 206.97063 2.4394053       3 -0.24495427 0.00001000 3060104        35
## 2  28.11548 2.1069683       3 -0.23087494 0.00176311 3060109        61
## 3 142.94652 1.6804648       1 -0.81467829 0.00877661 3060105        21
## 4  55.97662 3.4675126       3 -0.03230713 0.00055628 3060106        83
## 5 166.52806 1.5691058       1 -0.72841189 0.00605539 3060104        35
## 6 925.20189 0.3386832       1 -0.52734597 0.03813850 3060102        51</code></pre>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="mod-03.html#cb470-1" tabindex="-1"></a><span class="co"># what if you only want some variables to be merged?</span></span>
<span id="cb470-2"><a href="mod-03.html#cb470-2" tabindex="-1"></a>x3.cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;loc&quot;</span>, <span class="st">&quot;lat&quot;</span>, <span class="st">&quot;long&quot;</span>)</span>
<span id="cb470-3"><a href="mod-03.html#cb470-3" tabindex="-1"></a>dat4 <span class="ot">&lt;-</span> <span class="fu">merge</span>(x2, x1)</span>
<span id="cb470-4"><a href="mod-03.html#cb470-4" tabindex="-1"></a>dat4 <span class="ot">&lt;-</span> <span class="fu">merge</span>(dat4, x3[,x3.cols])</span>
<span id="cb470-5"><a href="mod-03.html#cb470-5" tabindex="-1"></a><span class="fu">head</span>(dat4)</span></code></pre></div>
<pre><code>##           loc    uocc      ind year doy      lat      long
## 1 RV_01_16345 occ_001 48.40576 2017  54 34.05400 -83.24100
## 2   RV_01_240 occ_002 56.78960 2006  25 32.67461 -81.46906
## 3   RV_01_241 occ_003 60.06336 2003  33 33.58468 -82.65235
## 4   RV_01_242 occ_004 21.30232 2002 292 33.38387 -82.00422
## 5   RV_01_243 occ_005 51.50136 2002  12 33.83757 -82.91251
## 6   RV_01_244 occ_006 73.91343 2007  16 34.95895 -83.57158</code></pre>
<p>Some of the tidyverse packages offer alternative solutions for merging datasets that can be more or less elegant than <code>merge()</code>. However, the methods shown above use only base R functions and will get the job done.</p>
</div>
</div>
<div id="mod-03-reshape" class="section level3 hasAnchor" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> Reshaping data frames<a href="mod-03.html#mod-03-reshape" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In your career you are likely to encounter datasets organized in a variety of formats. Most of these formats fall into one of two categories: <strong>wide</strong> and <strong>long</strong>.</p>
<p><img src="03_09.jpg" width="90%" style="display: block; margin: auto;" /></p>
<p>In a <strong>long-format dataset</strong>, every value is stored in a separate <strong><em>row</em></strong>. The variable (AKA: feature or attribute) that each value represents is kept in a separate <strong><em>column</em></strong>. Many public or online data sources serve datasets in long format. This is usually because the data are pulled from a database, and it left to the user to reshape the data to fit their needs. Storing data in this manner can sometimes be more efficient from a computational standpoint, but it is usually not convenient for analysis. The reason that long format is inconvenient for analysis is because all of the information about individual samples (i.e, observations) are on different rows of the dataset.</p>
<p>In a <strong>wide-format dataset</strong>, each row contains <strong>all values</strong> associated with a particular <strong>sample</strong>. This means that each variable gets its own column, and each cell contains a single value. This format is sometimes called <strong>tidy</strong> format by the authors of the <code>tidyverse</code> set of R packages <span class="citation">(<a href="#ref-wickham2014">Wickham 2014</a>)</span>, but researchers were formatting data this way long before the tidyverse packages or R were developed <span class="citation">(<a href="#ref-broman2018">Broman and Woo 2018</a>)</span>. As a rule, you should store and manage your data in wide/tidy format. This format makes it easy to take advantage of R’s vectorized nature.</p>
<p>Base R has some functions for reshaping data, but most sources recommend using the <code>reshape2</code> package or the <code>tidyverse</code>. The examples below demonstrate reshaping a dataset from a typical long format to a more useful wide format. You will need the file <a href="https://greenquanteco.github.io/reshape_example.csv">reshape_example.csv</a> in your R home directory and package <code>reshape2</code>.</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="mod-03.html#cb472-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span>
<span id="cb472-2"><a href="mod-03.html#cb472-2" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span></code></pre></div>
<pre><code>## Warning: package &#39;reshape2&#39; was built under R version 4.3.3</code></pre>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="mod-03.html#cb474-1" tabindex="-1"></a>in.name <span class="ot">&lt;-</span> <span class="st">&quot;reshape_example.csv&quot;</span></span>
<span id="cb474-2"><a href="mod-03.html#cb474-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(in.name)</span>
<span id="cb474-3"><a href="mod-03.html#cb474-3" tabindex="-1"></a><span class="fu">head</span>(x)</span></code></pre></div>
<pre><code>##        site  attribute      value
## 1 RV_01_245        lat  33.757913
## 2 RV_01_245       long -82.383578
## 3 RV_01_245   catchkm2     11.079
## 4 RV_01_245 ecoregion3   Piedmont
## 5 RV_01_248        lat  34.952033
## 6 RV_01_248       long -83.516598</code></pre>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="mod-03.html#cb476-1" tabindex="-1"></a><span class="fu">class</span>(x<span class="sc">$</span>value)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Notice that the <code>value</code> column contains a mix of numeric and text values. This means that the numbers are stored as text. If we wanted to do something with those values, they need to be pulled out of the vector <code>value</code> and converted to numeric values. Because a vector can have only one type of value, the attributes will need to end up in their own columns. The fastest way to do this is to use the function <code>dcast()</code> from package <code>reshape2</code>.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="mod-03.html#cb478-1" tabindex="-1"></a>dx <span class="ot">&lt;-</span> <span class="fu">dcast</span>(x, site<span class="sc">~</span>attribute)</span>
<span id="cb478-2"><a href="mod-03.html#cb478-2" tabindex="-1"></a>dx<span class="sc">$</span>catchkm2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(dx<span class="sc">$</span>catchkm2)</span>
<span id="cb478-3"><a href="mod-03.html#cb478-3" tabindex="-1"></a>dx<span class="sc">$</span>lat <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(dx<span class="sc">$</span>lat)</span>
<span id="cb478-4"><a href="mod-03.html#cb478-4" tabindex="-1"></a>dx<span class="sc">$</span>long <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(dx<span class="sc">$</span>long)</span>
<span id="cb478-5"><a href="mod-03.html#cb478-5" tabindex="-1"></a><span class="fu">head</span>(dx)</span></code></pre></div>
<pre><code>##        site catchkm2 ecoregion3      lat      long
## 1 RV_01_245  11.0790   Piedmont 33.75791 -82.38358
## 2 RV_01_248   7.5924 Blue Ridge 34.95203 -83.51660
## 3 RV_01_250   0.6165 Blue Ridge 34.66491 -83.36978
## 4 RV_01_253   2.5614   Piedmont 33.84107 -82.95028
## 5 RV_01_255   7.8687   Piedmont 33.75356 -82.54828
## 6 RV_01_257   1.9629   Piedmont 33.66435 -82.55340</code></pre>
<p>If we needed to go the other way, from wide to long format, we use function <code>melt()</code>. This is essentially the reverse of <code>dcast()</code>.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="mod-03.html#cb480-1" tabindex="-1"></a>mx <span class="ot">&lt;-</span> <span class="fu">melt</span>(dx, </span>
<span id="cb480-2"><a href="mod-03.html#cb480-2" tabindex="-1"></a>           <span class="at">id.vars=</span><span class="st">&quot;site&quot;</span>, </span>
<span id="cb480-3"><a href="mod-03.html#cb480-3" tabindex="-1"></a>           <span class="at">measure.vars=</span><span class="fu">c</span>(<span class="st">&quot;lat&quot;</span>, <span class="st">&quot;long&quot;</span>, <span class="st">&quot;catchkm2&quot;</span>, <span class="st">&quot;ecoregion3&quot;</span>))</span>
<span id="cb480-4"><a href="mod-03.html#cb480-4" tabindex="-1"></a><span class="fu">head</span>(mx)</span></code></pre></div>
<pre><code>##        site variable     value
## 1 RV_01_245      lat 33.757913
## 2 RV_01_248      lat 34.952033
## 3 RV_01_250      lat 34.664911
## 4 RV_01_253      lat 33.841068
## 5 RV_01_255      lat 33.753558
## 6 RV_01_257      lat 33.664353</code></pre>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="mod-03.html#cb482-1" tabindex="-1"></a><span class="fu">head</span>(mx[<span class="fu">order</span>(mx<span class="sc">$</span>site, mx<span class="sc">$</span>variable),])</span></code></pre></div>
<pre><code>##         site   variable      value
## 1  RV_01_245        lat  33.757913
## 11 RV_01_245       long -82.383578
## 21 RV_01_245   catchkm2     11.079
## 31 RV_01_245 ecoregion3   Piedmont
## 2  RV_01_248        lat  34.952033
## 12 RV_01_248       long -83.516598</code></pre>
<p>The <code>tidyverse</code> equivalents for <code>melt()</code> and <code>dcast()</code> are <code>pivot_longer()</code> and <code>pivot_wider()</code>, respectively. The syntax of these <code>tidyverse</code> functions are similar to the <code>reshape2</code> functions. Note that the <code>tidyverse</code> functions will output a <strong>tibble</strong>, which is a form of data frame peculiar to the <code>tidyverse</code>. Some non-<code>tidyverse</code> functions can use tibbles, and some cannot. Tibbles can be converted to base R data frames with function <code>data.frame()</code>.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="mod-03.html#cb484-1" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code></pre></div>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 4.3.3</code></pre>
<pre><code>## 
## Attaching package: &#39;tidyr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:reshape2&#39;:
## 
##     smiths</code></pre>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="mod-03.html#cb488-1" tabindex="-1"></a>tdx <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(x, </span>
<span id="cb488-2"><a href="mod-03.html#cb488-2" tabindex="-1"></a>                   <span class="at">names_from=</span><span class="st">&quot;attribute&quot;</span>,</span>
<span id="cb488-3"><a href="mod-03.html#cb488-3" tabindex="-1"></a>                   <span class="at">values_from=</span><span class="st">&quot;value&quot;</span>)</span>
<span id="cb488-4"><a href="mod-03.html#cb488-4" tabindex="-1"></a><span class="fu">head</span>(tdx)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   site      lat       long       catchkm2 ecoregion3
##   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;     
## 1 RV_01_245 33.757913 -82.383578 11.079   Piedmont  
## 2 RV_01_248 34.952033 -83.516598 7.5924   Blue Ridge
## 3 RV_01_250 34.664911 -83.369779 0.6165   Blue Ridge
## 4 RV_01_253 33.841068 -82.95028  2.5614   Piedmont  
## 5 RV_01_255 33.753558 -82.548275 7.8687   Piedmont  
## 6 RV_01_257 33.664353 -82.553397 1.9629   Piedmont</code></pre>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="mod-03.html#cb490-1" tabindex="-1"></a>tmx <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(tdx,</span>
<span id="cb490-2"><a href="mod-03.html#cb490-2" tabindex="-1"></a>               <span class="at">cols=</span><span class="fu">c</span>(<span class="st">&quot;lat&quot;</span>, <span class="st">&quot;long&quot;</span>, <span class="st">&quot;catchkm2&quot;</span>, <span class="st">&quot;ecoregion3&quot;</span>),</span>
<span id="cb490-3"><a href="mod-03.html#cb490-3" tabindex="-1"></a>               <span class="at">names_to=</span><span class="st">&quot;variable&quot;</span>)</span>
<span id="cb490-4"><a href="mod-03.html#cb490-4" tabindex="-1"></a><span class="fu">head</span>(tmx)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   site      variable   value     
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     
## 1 RV_01_245 lat        33.757913 
## 2 RV_01_245 long       -82.383578
## 3 RV_01_245 catchkm2   11.079    
## 4 RV_01_245 ecoregion3 Piedmont  
## 5 RV_01_248 lat        34.952033 
## 6 RV_01_248 long       -83.516598</code></pre>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="mod-03.html#cb492-1" tabindex="-1"></a><span class="co"># if needed:</span></span>
<span id="cb492-2"><a href="mod-03.html#cb492-2" tabindex="-1"></a>tdx.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(tdx)</span></code></pre></div>

</div>
</div>
</div>
<h3>Literature Cited<a href="literature-cited.html#literature-cited" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-broman2018" class="csl-entry">
Broman, K. W., and K. H. Woo. 2018. <a href="https://doi.org/10.1080/00031305.2017.1375989">Data organization in spreadsheets</a>. The American Statistician 72:2–10.
</div>
<div id="ref-grolemund2011" class="csl-entry">
Grolemund, G., and H. Wickham. 2011. <a href="https://www.jstatsoft.org/v40/i03/">Dates and times made easy with <span class="nocase">lubridate</span></a>. Journal of Statistical Software 40:1–25.
</div>
<div id="ref-spector2008" class="csl-entry">
Spector, P. 2008. Data manipulation with <span>R</span>. Springer Science+Business Media, New York.
</div>
<div id="ref-wickham2014" class="csl-entry">
Wickham, H. 2014. <a href="https://doi.org/10.18637/jss.v059.i10">Tidy data</a>. Journal of Statistical Software 59.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="38">
<li id="fn38"><p>I don’t know if there is an actual name for this.<a href="mod-03.html#fnref38" class="footnote-back">↩︎</a></p></li>
<li id="fn39"><p>A binary operator uses two arguments, one before the symbol and one after. For example, <code>+</code> is a binary operator that adds the the argument before the <code>+</code> to the argument after the <code>+</code>.<a href="mod-03.html#fnref39" class="footnote-back">↩︎</a></p></li>
<li id="fn40"><p>This is slightly longer than a <em>Rent</em> year, which is 525600 minutes (31536000 seconds).<a href="mod-03.html#fnref40" class="footnote-back">↩︎</a></p></li>
<li id="fn41"><p><code>cbind()</code> also works on matrices.<a href="mod-03.html#fnref41" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mod-02.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mod-04.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-manip.rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["applied_biol_data_analysis_20220816.pdf", "applied_biol_data_analysis_20220816.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
